<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hundred Acre Celebration: Welcoming Baby Gunner</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* ===== RESET & BASE ===== */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --pooh-yellow: #FFC42B;
            --pooh-red: #D62E2E;
            --honey-gold: #E6B86A;
            --soft-blue: #B0D0E3;
            --sage-green: #9CAD90;
            --cream: #FFF7EC;
            --text-dark: #43302a;
            --storybook-brown: #8B4513;
            --page-yellow: #FEF9E7;
            --shadow-soft: 0 24px 70px rgba(15, 23, 42, 0.18);
            --radius-lg: 24px;
            --radius-pill: 999px;
            --transition-smooth: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --sidebar-width: 240px;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Lato', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 140px;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: var(--font-body);
            background: radial-gradient(ellipse at top, #FFF7EC 0%, #F5E6CC 35%, #E6D3B1 65%, #D3C1A1 100%);
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
            position: relative;
            perspective: 1000px;
        }

        body.storytime-active {
            background:
                radial-gradient(circle at top, #0f172a 0%, #020617 60%, #000 100%);
            color: #E5E7EB;
        }

        body.storytime-active .content-section {
            background: #020617;
            border-color: #FACC15;
            box-shadow: 0 26px 80px rgba(15, 23, 42, 0.65);
        }

        body.storytime-active .story-title,
        body.storytime-active .woodland-sign,
        body.storytime-active .nav-title,
        body.storytime-active .nav-subtitle {
            color: #FACC15;
        }

        /* ===== ACCESSIBILITY UTILITIES ===== */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 16px;
            background: #fff;
            color: var(--storybook-brown);
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            transition: top 0.3s ease;
            z-index: 1100;
            font-weight: 700;
        }

        .skip-link:focus-visible {
            top: 16px;
            outline: 3px solid var(--pooh-red);
            outline-offset: 4px;
        }

        :focus-visible {
            outline: 3px solid var(--pooh-red);
            outline-offset: 4px;
            box-shadow: 0 0 0 4px rgba(255, 196, 43, 0.45);
        }

        button:focus-visible,
        .nav-item:focus-visible,
        .chapter-chip:focus-visible,
        .magical-btn:focus-visible,
        .fab:focus-visible,
        .music-btn:focus-visible,
        .open-book-btn:focus-visible {
            transform: translateY(-2px);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        body.nav-open {
            overflow: hidden;
        }

        body.reduce-motion *,
        body.reduce-motion .sparkle,
        body.reduce-motion .floating-bee,
        body.reduce-motion .leaf,
        body.reduce-motion .loading-honey-fill,
        body.reduce-motion .loading-dot,
        body.reduce-motion .honey-drip,
        body.reduce-motion .cover-decoration,
        body.reduce-motion .content-section,
        body.reduce-motion .storybook-cover,
        body.reduce-motion .nav-toggle,
        body.reduce-motion .nav-item,
        body.reduce-motion .nav-dock__panel,
        body.reduce-motion .nav-dock__pill,
        body.reduce-motion .nav-dock__progress-fill,
        body.reduce-motion .fab,
        body.reduce-motion .music-btn {
            animation-duration: 0s !important;
            transition-duration: 0s !important;
        }

        /* ===== IMPROVED LOADING SCREEN ===== */
        .loading-screen {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at top, #FFEAA7 0, #FBBF24 35%, #D97706 70%, #7C2D12 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .honey-spinner {
            width: 120px;
            height: 120px;
            position: relative;
            margin-bottom: 25px;
        }

        .loading-jar {
            width: 80px;
            height: 96px;
            background: var(--honey-gold);
            border-radius: 16px 16px 10px 10px;
            position: relative;
            overflow: hidden;
            margin: 0 auto;
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
            border: 3px solid #FFF7EC;
        }

        .loading-honey-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(to top, #FFC42B, #FACC15);
            animation: fill-honey 2.4s ease-in-out infinite;
        }

        @keyframes fill-honey {
            0%, 100% { height: 15%; }
            50% { height: 95%; }
        }

        .loading-text {
            font-family: var(--font-heading);
            font-size: 2.3rem;
            color: #FFF;
            text-align: center;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.25);
            margin-bottom: 8px;
        }

        .loading-subtext {
            font-size: 1.05rem;
            color: #FFF;
            text-align: center;
            opacity: 0.9;
            max-width: 480px;
            line-height: 1.6;
        }

        .loading-hint {
            margin-top: 18px;
            font-size: 0.95rem;
            color: #FEF9C3;
            opacity: 0.85;
        }

        .loading-dots {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }

        .loading-dot {
            width: 11px;
            height: 11px;
            border-radius: 50%;
            background: white;
            animation: dot-bounce 1.4s ease-in-out infinite both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes dot-bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* ===== IMMERSIVE TOP NAVIGATION ===== */
        .sidebar-nav {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
            background: linear-gradient(90deg, #fffaf1 0%, #f3e7cf 100%);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 14px 20px;
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
            border-bottom: 1px solid rgba(139, 69, 19, 0.18);
            transition: background 0.3s ease, box-shadow 0.3s ease;
        }

        .nav-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.38);
            backdrop-filter: blur(2px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.35s ease, visibility 0.35s ease;
            z-index: 900;
        }

        .nav-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        /* ===== NAVIGATION CONTROL DOCK ===== */
        .nav-dock {
            flex: 1;
            display: flex;
            justify-content: flex-end;
            z-index: 960;
            min-width: 320px;
        }

        .nav-dock__panel {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 16px;
            border: 1px solid rgba(139, 69, 19, 0.14);
            box-shadow: 0 12px 28px rgba(15, 23, 42, 0.12);
            padding: 12px 14px;
            display: grid;
            grid-template-columns: minmax(240px, 1fr) auto;
            gap: 12px 16px;
            align-items: center;
            backdrop-filter: blur(6px);
        }

        .nav-dock__status {
            display: grid;
            gap: 4px;
        }

        .nav-dock__eyebrow {
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-size: 0.72rem;
            color: #7c6149;
            font-weight: 800;
        }

        .nav-dock__title {
            font-family: var(--font-heading);
            font-size: 1.1rem;
            color: var(--storybook-brown);
        }

        .nav-dock__hint {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .nav-dock__progress {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 8px;
            align-items: center;
        }

        .nav-dock__progress-track {
            position: relative;
            height: 8px;
            background: rgba(139, 69, 19, 0.12);
            border-radius: 999px;
            overflow: hidden;
        }

        .nav-dock__progress-fill {
            position: absolute;
            inset: 0;
            width: 18%;
            background: linear-gradient(90deg, #f7e3b4, #f1c86a);
            border-radius: inherit;
            transition: width 0.4s ease;
        }

        .nav-dock__progress-text {
            font-weight: 800;
            color: #5b3a1b;
            font-size: 0.95rem;
        }

        .nav-dock__actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-dock__pill {
            border: 1px solid rgba(139, 69, 19, 0.18);
            background: #fff7ec;
            color: #5b3a1b;
            font-weight: 800;
            padding: 8px 12px;
            border-radius: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
            box-shadow: 0 6px 14px rgba(0,0,0,0.08);
        }

        .nav-dock__pill:hover:not(:disabled) {
            transform: translateY(-2px);
            background: #fff;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .nav-dock__pill:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(0,0,0,0.12);
        }

        .nav-dock__pill:disabled {
            cursor: not-allowed;
            background: #ede9fe;
            color: #6b7280;
            box-shadow: none;
        }

        .nav-dock__pill--primary {
            background: linear-gradient(135deg, #f7e3b4, #f1c86a);
            border-color: rgba(139, 69, 19, 0.24);
            box-shadow: 0 8px 0 #d69e2e;
        }

        .nav-dock__pill--ghost {
            background: rgba(255, 255, 255, 0.75);
            border-style: dashed;
        }

        .nav-toggle {
            position: fixed;
            top: 18px;
            right: 18px;
            width: 48px;
            height: 48px;
            background: var(--pooh-yellow);
            border: 3px solid var(--storybook-brown);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            padding: 0;
            appearance: none;
        }

        .nav-toggle:hover {
            background: var(--pooh-red);
            transform: scale(1.08);
        }

        .nav-toggle i {
            color: white;
            font-size: 1.4rem;
            transition: transform 0.3s ease;
        }

        .sidebar-nav.active + .nav-toggle i {
            transform: rotate(90deg);
        }

        .nav-header {
            text-align: left;
            padding-right: 12px;
            border-right: 2px dashed rgba(84, 45, 20, 0.25);
            display: grid;
            gap: 2px;
            min-width: 210px;
            flex-shrink: 0;
        }

        .nav-title {
            font-family: var(--font-heading);
            font-size: 2.2rem;
            color: var(--storybook-brown);
            margin-bottom: 4px;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.75);
        }

        .nav-subtitle {
            font-family: var(--font-heading); font-style: italic;
            font-size: 1.5rem;
            color: var(--pooh-red);
        }

        .nav-menu {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 10px;
            flex: 1;
            padding: 4px 0;
            overflow-x: auto;
            align-items: center;
        }

        .nav-item {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 14px;
            text-decoration: none;
            color: var(--storybook-brown);
            font-weight: 700;
            transition: all 0.25s ease;
            border: 1px solid rgba(148, 81, 35, 0.14);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            font-size: 0.98rem;
            white-space: nowrap;
        }

        .nav-item:hover {
            background: #FFFFFF;
            transform: translateY(-2px);
            border-color: rgba(139, 69, 19, 0.32);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #f7e3b4, #f1c86a);
            color: #5b3a1b;
            border-color: rgba(139, 69, 19, 0.28);
            box-shadow: 0 6px 16px rgba(149, 92, 24, 0.28);
        }

        .nav-item i {
            font-size: 1.15rem;
            width: 24px;
            text-align: center;
        }

        .nav-divider {
            display: none;
        }

        .nav-footer {
            margin-left: 12px;
            text-align: right;
            padding-top: 0;
            border-top: none;
        }

        .nav-footer-text {
            font-family: var(--font-heading);
            font-size: 1.1rem;
            color: var(--storybook-brown);
            white-space: nowrap;
        }

        /* ===== QUICK STORY MAP ===== */
        .story-summary-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 12px;
            margin: 10px 0 18px;
        }

        .summary-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 14px 16px;
            border: 1px solid rgba(148, 81, 35, 0.18);
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 10px;
            align-items: center;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
        }

        .summary-icon {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            background: linear-gradient(135deg, #FFEAA7, #FFC42B);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: #7C2D12;
            font-size: 1.1rem;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.85);
        }

        .summary-label {
            font-size: 0.95rem;
            color: #7c6149;
            margin-bottom: 4px;
            font-weight: 700;
        }

        .summary-value {
            font-family: 'Playfair Display', serif;
            font-size: 1.05rem;
            color: var(--storybook-brown);
        }

        .navigation-map {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
            margin-bottom: 18px;
        }

        .navigation-map-label {
            font-weight: 700;
            color: var(--storybook-brown);
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .chapter-chip {
            border: 1px solid rgba(148, 81, 35, 0.25);
            background: rgba(255, 255, 255, 0.92);
            color: var(--storybook-brown);
            border-radius: 999px;
            padding: 8px 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        .chapter-chip:hover {
            transform: translateY(-2px);
            background: #fff;
        }

        .chapter-chip.active {
            background: var(--pooh-red);
            color: #fff;
            border-color: var(--storybook-brown);
            box-shadow: 0 8px 18px rgba(127, 29, 29, 0.22);
        }

        /* ===== STORYBOOK COVER ===== */
        .storybook-cover {
            position: fixed;
            inset: 0;
            background:
                linear-gradient(135deg, #fff8e8 0%, #f1dba9 45%, #e4c07a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            transition: transform 1.1s cubic-bezier(0.77, 0, 0.175, 1), opacity 0.8s ease;
            transform-style: preserve-3d;
            box-shadow: 0 18px 90px rgba(0,0,0,0.25);
            overflow: hidden;
            padding: 20px;
        }

        .storybook-cover.closed {
            transform: rotateY(88deg) scale(0.78);
            opacity: 0;
            pointer-events: none;
        }

        .cover-decoration {
            position: absolute;
            inset: 8%;
            border-radius: 24px;
            border: 2px solid rgba(255,255,255,0.6);
            box-shadow:
                inset 0 0 0 1px rgba(0,0,0,0.1),
                0 0 60px rgba(0,0,0,0.26);
            background: radial-gradient(circle at center, rgba(255,255,255,0.14) 0, transparent 60%);
        }

        .cover-title {
            font-family: var(--font-heading);
            font-size: clamp(2.8rem, 6vw, 4.6rem);
            color: #4a2f1e;
            text-align: center;
            margin-bottom: 0.5rem;
            text-shadow: 0 6px 26px rgba(0,0,0,0.12);
            position: relative;
            z-index: 2;
            line-height: 1.1;
        }

        .cover-subtitle {
            font-family: var(--font-heading); font-style: italic;
            font-size: clamp(2rem, 4vw, 3rem);
            color: #6f492d;
            text-align: center;
            margin-bottom: 2.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .open-book-btn {
            padding: 14px 38px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #fef6e4, #f3dfb2);
            color: #6a3d24;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 0 10px 26px rgba(0,0,0,0.25);
            transition: all 0.35s ease;
            font-family: var(--font-heading);
            position: relative;
            z-index: 2;
            overflow: hidden;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .open-book-btn i {
            margin-right: 8px;
        }

        .open-book-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.7), transparent);
            transition: left 0.8s;
        }

        .open-book-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 14px 32px rgba(0,0,0,0.3);
        }

        .open-book-btn:hover::before {
            left: 100%;
        }

        /* ===== BACKGROUND ELEMENTS ===== */
        .enchanted-forest {
            position: fixed;
            inset: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.35;
            pointer-events: none;
        }

        .tree {
            position: absolute;
            bottom: -40px;
            width: 180px;
            background: linear-gradient(to right, #8B5A2B, #A0522D);
            border-radius: 20px 20px 0 0;
            transform-origin: bottom;
            box-shadow: 0 0 18px rgba(0,0,0,0.25);
        }

        .floating-leaf {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(ellipse at center, #BBF7D0, #22C55E);
            border-radius: 50% 0 50% 50%;
            transform: rotate(45deg);
            animation: leaf-fall 15s linear infinite;
            opacity: 0.7;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.18));
        }

        @keyframes leaf-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.9;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .golden-light {
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse at center, rgba(255, 215, 0, 0.18) 0%, rgba(255, 215, 0, 0) 70%);
            z-index: -1;
            animation: light-pulse 16s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes light-pulse {
            0%, 100% { opacity: 0.12; }
            50% { opacity: 0.28; }
        }

        .honeycomb-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 25% 25%, rgba(255, 196, 43, 0.08) 0%, transparent 55%),
                radial-gradient(circle at 75% 75%, rgba(230, 184, 106, 0.1) 0%, transparent 55%),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><path d="M50,0 L75,25 L75,75 L50,100 L25,75 L25,25 Z" fill="%23E6B86A" opacity="0.04"/></svg>');
            background-size: auto, auto, 120px;
            z-index: -3;
            pointer-events: none;
        }

        /* ===== SPARKLES & HONEY DRIPS ===== */
        .sparkle {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.65);
            opacity: 0;
            animation: sparkle-blink 4s infinite;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes sparkle-blink {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 0.85; transform: scale(0.9); }
        }

        .honey-drip {
            width: 14px;
            height: 14px;
            border-radius: 999px;
            background: radial-gradient(circle at top, #FFFBEB 0%, #FACC15 40%, #E6B86A 100%);
            box-shadow: 0 5px 18px rgba(180, 83, 9, 0.65);
            animation: honey-drip-fall 3s ease-in forwards;
        }

        @keyframes honey-drip-fall {
            0% { transform: translate(0, 0) scale(0.9); opacity: 1; }
            80% { transform: translate(0, 140px) scale(1); opacity: 1; }
            100% { transform: translate(0, 160px) scale(0.8); opacity: 0; }
        }

        /* ===== STORYBOOK CONTENT LAYOUT ===== */
        .storybook-shell {
            max-width: 1240px;
            margin: 0 auto;
            padding: 40px 20px 60px;
        }

        .storybook {
            position: relative;
            width: 100%;
            opacity: 0;
            transition: opacity 1.4s ease;
            background: rgba(254, 249, 231, 0.96);
            border-radius: 28px;
            box-shadow: var(--shadow-soft);
            padding: 36px 34px 40px;
            border: 1px solid rgba(148, 81, 35, 0.25);
        }

        body.storytime-active .storybook {
            background: rgba(15, 23, 42, 0.96);
            border-color: rgba(148, 163, 184, 0.5);
        }

        .storybook.visible {
            opacity: 1;
        }

        .storybook-inner {
            max-width: 880px;
            margin: 0 auto;
        }

        .storybook-header {
            text-align: center;
            margin-bottom: 18px;
        }

        .storybook-heading {
            font-family: var(--font-heading);
            font-size: 2.4rem;
            color: var(--storybook-brown);
            margin-bottom: 4px;
        }

        .storybook-subheading {
            font-family: var(--font-heading); font-style: italic;
            font-size: 1.7rem;
            color: var(--pooh-red);
        }

        /* ===== CONTENT SECTIONS ===== */
        .content-section {
            background: var(--page-yellow);
            width: 100%;
            margin: 32px 0;
            border-radius: 20px;
            box-shadow:
                0 14px 40px rgba(15, 23, 42, 0.16);
            position: relative;
            overflow: hidden;
            padding: 28px 26px 30px;
            transform-style: preserve-3d;
            transition: opacity 0.6s ease, transform 0.6s ease;
            opacity: 0;
            transform: translateY(40px);
            border: 1px solid rgba(148, 81, 35, 0.22);
        }

        .content-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .content-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image:
                radial-gradient(circle at 5% 5%, rgba(252, 211, 77, 0.25) 0, transparent 45%),
                radial-gradient(circle at 95% 95%, rgba(252, 211, 77, 0.18) 0, transparent 45%);
            opacity: 0.7;
            pointer-events: none;
        }

        .content-section-inner {
            position: relative;
            z-index: 1;
        }

        .section-number {
            position: absolute;
            top: 18px;
            right: 26px;
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: rgba(67, 48, 42, 0.7);
        }

        .section-header {
            text-align: center;
            margin-bottom: 18px;
        }

        .story-title {
            font-family: var(--font-heading);
            font-size: 2.35rem;
            color: var(--pooh-red);
            position: relative;
        }

        .story-title::after {
            content: 'üçØ';
            display: block;
            font-size: 1.6rem;
            margin-top: 4px;
            color: var(--pooh-yellow);
        }

        /* ===== STORYTELLING ELEMENTS ===== */
        .story-section {
            margin: 18px 0;
            padding: 22px 22px 20px;
            background: rgba(255, 255, 255, 0.94);
            border-radius: 16px;
            border-left: 4px solid var(--pooh-yellow);
            position: relative;
        }

        .story-section::before {
            content: '‚Äú';
            position: absolute;
            top: -26px;
            left: 16px;
            font-size: 4.2rem;
            color: rgba(250, 204, 21, 0.4);
            font-family: 'Playfair Display', serif;
        }

        .story-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-dark);
        }

        .rsvp-form {
            background: rgba(255, 255, 255, 0.94);
            border-radius: 16px;
            padding: 18px;
            border: 1px solid rgba(148, 81, 35, 0.18);
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.12);
            margin-top: 12px;
        }

        .storybook-form {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .storybook-form .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
        }

        .storybook-form input,
        .storybook-form select,
        .storybook-form textarea {
            width: 100%;
            padding: 12px 14px;
            border-radius: 12px;
            border: 2px solid rgba(148, 81, 35, 0.2);
            background: #fff;
            font-family: inherit;
            font-size: 1rem;
            color: var(--text-dark);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .storybook-form input:focus,
        .storybook-form select:focus,
        .storybook-form textarea:focus {
            border-color: var(--pooh-red);
            box-shadow: 0 0 0 3px rgba(214, 46, 46, 0.2);
            outline: none;
        }

        .storybook-form button {
            align-self: flex-start;
        }

        /* ===== WOODLAND SIGN ===== */
        .woodland-sign {
            position: relative;
            background: var(--storybook-brown);
            color: white;
            padding: 12px 22px;
            border-radius: 12px;
            margin: 10px auto 18px;
            max-width: 320px;
            text-align: center;
            font-family: var(--font-heading);
            font-size: 1.5rem;
            box-shadow: 0 10px 26px rgba(55, 31, 14, 0.5);
            transform: rotate(-1.5deg);
            border: 3px solid rgba(250, 204, 21, 0.9);
        }

        .woodland-sign::before {
            content: '';
            position: absolute;
            bottom: -22px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 14px solid transparent;
            border-right: 14px solid transparent;
            border-top: 20px solid var(--storybook-brown);
        }

        .woodland-sign::after {
            content: '';
            position: absolute;
            bottom: -28px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            background: #5D4037;
            border-radius: 999px;
        }

        /* ===== HUNNY POT COLLECTION ===== */
        .hunny-pot-collection {
            display: flex;
            justify-content: center;
            gap: 18px;
            margin: 16px 0 10px;
            flex-wrap: wrap;
        }

        .hunny-pot {
            width: 62px;
            height: 82px;
            background: var(--honey-gold);
            border-radius: 30px 30px 16px 16px;
            position: relative;
            cursor: pointer;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.35);
        }

        .hunny-pot:hover {
            transform: translateY(-6px) rotate(4deg);
            box-shadow: 0 10px 24px rgba(15, 23, 42, 0.4);
        }

        .hunny-pot::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 16px;
            background: linear-gradient(to bottom, #FFC42B, #E6B86A);
            border-radius: 22px 22px 12px 12px;
        }

        .hunny-pot::after {
            content: 'HUNNY';
            position: absolute;
            bottom: 6px;
            left: 0;
            right: 0;
            text-align: center;
            font-family: var(--font-heading);
            color: var(--storybook-brown);
            font-size: 0.9rem;
        }

        /* ===== CHARACTER SPOTLIGHTS ===== */
        .character-spotlight {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 22px 0;
            padding: 18px 20px;
            background: rgba(255, 255, 255, 0.96);
            border-radius: 18px;
            border: 1px solid rgba(148, 81, 35, 0.25);
            box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .character-spotlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.45), transparent);
            transition: left 0.7s;
        }

        .character-spotlight:hover::before {
            left: 100%;
        }

        .character-spotlight:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 40px rgba(15, 23, 42, 0.18);
        }

        .character-illustration {
            width: 110px;
            height: 110px;
            border-radius: 999px;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 12px 26px rgba(0, 0, 0, 0.22);
            border: 4px solid var(--pooh-yellow);
            background: var(--page-yellow);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.28s ease;
        }

        .character-spotlight:hover .character-illustration {
            transform: scale(1.04);
        }

        .character-illustration img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .character-spotlight-content {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .character-quote {
            font-family: var(--font-heading);
            font-size: 1.6rem;
            color: var(--storybook-brown);
            line-height: 1.4;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.5);
        }

        .character-name {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: var(--pooh-red);
            font-size: 1.05rem;
        }

        /* ===== INVITATION DETAILS ===== */
        .invitation-details {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 18px;
            margin: 24px 0 10px;
        }

        .detail-card {
            background: #FFFFFF;
            padding: 18px 18px 16px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
            border-top: 5px solid var(--pooh-yellow);
            transition: all 0.25s ease;
            position: relative;
            overflow: hidden;
        }

        .detail-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--pooh-red);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.45s ease;
        }

        .detail-card:hover::before {
            transform: scaleX(1);
        }

        .detail-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 24px rgba(15, 23, 42, 0.18);
        }

        .detail-title {
            font-family: 'Playfair Display', serif;
            color: var(--pooh-red);
            font-size: 1.18rem;
            margin-bottom: 8px;
        }

        .detail-content {
            font-size: 0.98rem;
            color: var(--storybook-brown);
            line-height: 1.6;
        }

        /* ===== BUTTONS ===== */
        .magical-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 12px 28px;
            background: linear-gradient(135deg, var(--pooh-yellow), var(--honey-gold));
            color: white;
            border: none;
            border-radius: 50px;
            font-family: 'Playfair Display', serif;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.3);
            transition: all 0.28s ease;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .magical-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(15, 23, 42, 0.4);
        }

        .magical-btn:active {
            transform: translateY(0);
        }

        .magical-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.45), transparent);
            transition: left 0.5s;
        }

        .magical-btn:hover::before {
            left: 100%;
        }

        /* ===== FLOATING ACTION BUTTONS ===== */
        .fab-container {
            position: fixed;
            bottom: 96px;
            right: 24px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .fab {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: var(--pooh-yellow);
            border: none;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 22px rgba(15, 23, 42, 0.35);
            transition: all 0.25s ease;
        }

        .fab:hover {
            background: var(--pooh-red);
            transform: translateY(-3px) scale(1.06);
        }

        /* ===== MUSIC CONTROLS ===== */
        .music-controls {
            position: fixed;
            top: 18px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .music-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--pooh-yellow);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 18px rgba(15, 23, 42, 0.3);
            transition: all 0.25s ease;
        }

        .music-btn:hover {
            background: var(--pooh-red);
            transform: scale(1.06);
        }

        .accessibility-btn {
            padding: 10px 14px;
            border-radius: 14px;
            border: 2px solid var(--storybook-brown);
            background: #fff;
            color: var(--storybook-brown);
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(15, 23, 42, 0.16);
            transition: all 0.25s ease;
        }

        .accessibility-btn:hover {
            background: var(--pooh-yellow);
            color: #000;
            transform: translateY(-2px);
        }

        /* ===== READING PROGRESS ===== */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, var(--pooh-yellow), var(--pooh-red));
            z-index: 1000;
            transition: width 0.25s ease;
        }

        /* ===== CHARACTER MODAL ===== */
        .character-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.78);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.45s ease;
        }

        .character-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: #FEF9E7;
            width: 90%;
            max-width: 620px;
            border-radius: 22px;
            padding: 26px 26px 24px;
            position: relative;
            transform: scale(0.86);
            transition: transform 0.45s ease;
            box-shadow: 0 28px 80px rgba(0,0,0,0.55);
        }

        .character-modal.active .modal-content {
            transform: scale(1);
        }

        .close-modal {
            position: absolute;
            top: 14px;
            right: 16px;
            background: none;
            border: none;
            font-size: 1.4rem;
            cursor: pointer;
            color: var(--storybook-brown);
            transition: color 0.25s ease, transform 0.2s ease;
        }

        .close-modal:hover {
            color: var(--pooh-red);
            transform: scale(1.1);
        }

        .modal-character {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 18px;
        }

        .modal-character-icon {
            width: 78px;
            height: 78px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            flex-shrink: 0;
        }

        .modal-character-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.9rem;
            color: var(--pooh-red);
        }

        .modal-character-quote {
            font-family: var(--font-heading);
            font-size: 1.8rem;
            color: var(--storybook-brown);
            margin-bottom: 18px;
            text-align: center;
        }

        .modal-character-bio {
            font-size: 1rem;
            color: var(--storybook-brown);
            line-height: 1.7;
        }

        .pooh-icon { background: var(--pooh-yellow); }
        .piglet-icon { background: #F8BBD9; }
        .tigger-icon { background: #FF8C42; }
        .eeyore-icon { background: #9CA3AF; }
        .rabbit-icon { background: var(--sage-green); }
        .owl-icon { background: #8B7355; }
        .kanga-icon { background: #FAD7A0; }

        /* ===== HONEY ADVENTURE GAME ===== */
        .honey-adventure-game {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 22px;
            padding: 24px 22px 22px;
            margin: 26px 0;
            text-align: center;
            border: 2px dashed rgba(250, 204, 21, 0.9);
            position: relative;
            overflow: hidden;
            box-shadow: 0 12px 32px rgba(15, 23, 42, 0.16);
        }

        .game-header {
            text-align: center;
            margin-bottom: 22px;
            position: relative;
        }

        .game-header h1 {
            color: var(--pooh-red);
            text-shadow: 2px 2px 0 #ffccbc;
            font-size: 2.2em;
            margin-bottom: 6px;
            animation: bounce 2.4s infinite;
            font-family: var(--font-heading);
        }

        .game-header p {
            font-size: 0.98rem;
            color: var(--storybook-brown);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 12px;
            margin: 18px 0;
        }

        .game-mode-pill {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            background: #fff3d4;
            border-radius: 999px;
            border: 2px dashed #ffb300;
            font-weight: 700;
            color: var(--storybook-brown);
            box-shadow: 0 8px 16px rgba(0,0,0,0.08);
            margin-bottom: 10px;
        }

        .stat {
            background: linear-gradient(135deg, #ffcc80 0%, #ffb74d 100%);
            padding: 12px 10px;
            border-radius: 16px;
            font-size: 1.05em;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.12);
            border: 3px solid #ff9800;
        }

        .honey-display {
            text-align: center;
            margin: 24px 0 12px;
            position: relative;
        }

        .honey-jar {
            width: 110px;
            height: 140px;
            background: #ffb300;
            border-radius: 50% 50% 40% 40%;
            margin: 0 auto 18px;
            position: relative;
            border: 4px solid var(--storybook-brown);
            box-shadow: inset 0 0 30px #ff8f00;
            overflow: hidden;
        }

        .honey-fill {
            position: absolute;
            bottom: 0;
            left: 6px;
            right: 6px;
            background: linear-gradient(to top, #ff8f00 0%, #ffb300 100%);
            border-radius: 40% 40% 0 0;
            transition: height 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .honey-jar::after {
            content: '';
            position: absolute;
            top: -12px;
            left: 22px;
            width: 66px;
            height: 24px;
            background: var(--storybook-brown);
            border-radius: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .actions {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px;
            margin: 18px 0 16px;
        }

        .action-btn {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            border: none;
            border-radius: 999px;
            padding: 14px 12px;
            font-size: 1.05em;
            color: white;
            cursor: pointer;
            box-shadow: 0 6px 0 #e65100;
            transition: all 0.18s;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .action-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #e65100;
        }

        .action-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 3px 0 #e65100;
        }

        .action-btn:disabled {
            background: #bdbdbd;
            box-shadow: 0 4px 0 #757575;
            transform: none;
            cursor: not-allowed;
        }

        .friends-section {
            margin: 18px 0 10px;
        }

        .friends-section h2 {
            font-size: 1.25rem;
            margin-bottom: 8px;
        }

        .friends-grid {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 12px;
            margin-top: 10px;
        }

        .friend-card {
            background: #fff8e1;
            border: 2px solid #ffb300;
            border-radius: 12px;
            padding: 10px 10px 8px;
            text-align: center;
            transition: all 0.24s;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .friend-card:hover {
            transform: translateY(-3px);
            background: #ffecb3;
            box-shadow: 0 6px 14px rgba(0,0,0,0.16);
        }

        .friend-card h3 {
            color: var(--pooh-red);
            margin-bottom: 8px;
            font-family: 'Playfair Display', serif;
            font-size: 1.02rem;
        }

        .path-choices {
            background: #fff8e1;
            border: 2px dashed #ffb300;
            border-radius: 18px;
            padding: 14px;
            margin-top: 10px;
        }

        .path-choices h3 {
            margin-bottom: 8px;
            color: var(--storybook-brown);
        }

        .path-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .path-chip {
            border: 0;
            background: #ffe3a3;
            color: var(--storybook-brown);
            padding: 9px 12px;
            border-radius: 14px;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 0 4px 0 #d69e2e;
            transition: transform 0.16s ease, box-shadow 0.16s ease, background 0.2s ease;
        }

        .path-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #d69e2e;
        }

        .path-chip.active {
            background: linear-gradient(135deg, #ffd166, #fcbf49);
            box-shadow: 0 7px 0 #e09f3e;
        }

        .path-hint {
            margin-top: 8px;
            font-size: 0.95rem;
            color: #6b4a2c;
        }

        .message-box {
            background: #fff8e1;
            border: 3px dashed #ffb300;
            border-radius: 18px;
            padding: 16px 18px;
            margin: 18px 0 10px;
            min-height: 70px;
            font-size: 1.22em;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            animation: pulse 2.2s infinite;
            font-family: var(--font-heading);
        }

        @keyframes pulse {
            0%, 100% { border-color: #ffb300; }
            50% { border-color: #ff9800; }
        }

        .pooh-face {
            font-size: 1.8em;
            margin-right: 10px;
        }

        .achievements {
            margin-top: 18px;
            padding: 14px 12px 10px;
            background: #ffecb3;
            border-radius: 14px;
            border: 2px solid #ffb300;
            text-align: left;
            font-size: 0.95rem;
        }

        .achievements h3 {
            margin-bottom: 6px;
        }

        .achievement {
            display: inline-block;
            background: #ffcc80;
            padding: 6px 12px;
            margin: 4px;
            border-radius: 999px;
            font-size: 0.84em;
        }

        .game-log {
            margin-top: 14px;
            padding: 12px;
            background: #fff8e1;
            border-radius: 14px;
            border: 2px solid #ffb300;
            text-align: left;
        }

        .game-log h3 {
            margin-bottom: 8px;
        }

        .log-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 6px;
            font-size: 0.95rem;
            color: var(--storybook-brown);
        }

        .hidden {
            display: none;
        }

        .bounce {
            animation: bigBounce 0.5s;
        }

        @keyframes bigBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.14); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* ===== FLOATING BEES ===== */
        .floating-bee {
            position: fixed;
            width: 40px;
            height: 40px;
            z-index: 10;
            animation: bee-flight 25s infinite linear;
            cursor: pointer;
        }

        .bee-body {
            width: 25px;
            height: 18px;
            background: linear-gradient(90deg, #FACC15, #F97316);
            border-radius: 50%;
            position: relative;
            margin: 0 auto;
        }

        .bee-body:before,
        .bee-body:after {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: repeating-linear-gradient(
                    90deg,
                    rgba(17, 24, 39, 0.9) 0 2px,
                    transparent 2px 4px
            );
            mix-blend-mode: multiply;
            opacity: 0.85;
        }

        .bee-head {
            position: absolute;
            left: -8px;
            top: 3px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #111827;
        }

        .bee-wing {
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: radial-gradient(circle, #FEF3C7 0, #E0F2FE 40%, #BFDBFE 100%);
            opacity: 0.95;
            top: -10px;
            animation: wing-flutter 0.8s ease-in-out infinite alternate;
            transform-origin: bottom center;
            filter: drop-shadow(0 2px 4px rgba(148, 163, 184, 0.65));
        }

        .bee-wing.left {
            left: -3px;
        }

        .bee-wing.right {
            right: -3px;
            animation-delay: 0.1s;
        }

        @keyframes bee-flight {
            0%   { transform: translate(0, 0) rotate(0deg); }
            25%  { transform: translate(120px, 60px) rotate(90deg); }
            50%  { transform: translate(220px, 0) rotate(180deg); }
            75%  { transform: translate(120px, -60px) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        @keyframes wing-flutter {
            0%   { transform: rotate(-8deg) scale(1); }
            100% { transform: rotate(18deg) scale(1.06); }
        }

        /* ===== FOOTER ===== */
        .footer {
            text-align: center;
            padding: 26px 10px 6px;
            margin-top: 40px;
            font-family: var(--font-heading);
            font-size: 1.4rem;
            color: var(--storybook-brown);
            border-top: 1px dashed rgba(250, 204, 21, 0.9);
        }

        .footer p:last-child {
            font-size: 1.15rem;
            margin-top: 4px;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .sidebar-nav {
                flex-wrap: wrap;
                gap: 12px;
            }
            .storybook {
                padding: 34px 26px 36px;
            }
            .nav-title {
                font-size: 2rem;
            }
            .nav-subtitle {
                font-size: 1.3rem;
            }
            .nav-header {
                border-right: none;
                border-bottom: 2px dashed rgba(84, 45, 20, 0.25);
                padding-bottom: 10px;
                margin-bottom: 4px;
            }
        }

        @media (max-width: 992px) {
            .sidebar-nav {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            .nav-menu {
                width: 100%;
                display: none;
                flex-direction: column;
                align-items: stretch;
            }
            .nav-dock {
                width: 100%;
                display: none;
                justify-content: flex-start;
            }
            .nav-dock__panel {
                width: 100%;
                grid-template-columns: 1fr;
            }
            .nav-footer {
                width: 100%;
                margin-left: 0;
                text-align: left;
                padding-top: 4px;
            }
            body.nav-open .nav-menu,
            body.nav-open .nav-dock {
                display: flex;
            }
            .nav-toggle {
                display: flex;
            }
            .nav-overlay.visible {
                visibility: visible;
            }
        }

        @media (max-width: 768px) {
            .storybook-shell {
                padding-inline: 12px;
            }
            .storybook {
                padding: 26px 18px 30px;
            }
            .content-section {
                padding: 22px 18px 24px;
            }
            .story-title {
                font-size: 2rem;
            }

            .navigation-map {
                flex-direction: column;
                align-items: flex-start;
            }

            .chapter-chip {
                width: 100%;
                text-align: left;
            }

            .invitation-details {
                grid-template-columns: 1fr;
            }

            .friends-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .actions {
                grid-template-columns: 1fr 1fr;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }

            .character-spotlight {
                flex-direction: column;
                align-items: flex-start;
            }

            .character-illustration {
                width: 100px;
                height: 100px;
            }

            .fab-container {
                bottom: 86px;
                right: 16px;
            }

            .music-controls {
                top: 14px;
                right: 14px;
            }
            .nav-dock__panel {
                padding: 12px 14px;
            }
            .nav-dock__title {
                font-size: 1.15rem;
            }
            .nav-dock__pill {
                flex: 1 1 45%;
                justify-content: center;
            }
        }

        @media (max-width: 520px) {
            .cover-title {
                font-size: 2.2rem;
            }
            .cover-subtitle {
                font-size: 1.6rem;
            }
            .open-book-btn {
                padding: 11px 26px;
                font-size: 1.02rem;
            }
            .friends-grid {
                grid-template-columns: 1fr;
            }
            .actions {
                grid-template-columns: 1fr;
            }
            .nav-dock__actions {
                flex-direction: column;
            }
        }

        /* ===== CUSTOM SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 11px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(254, 249, 231, 0.9);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--pooh-yellow);
            border-radius: 999px;
            border: 2px solid rgba(254, 249, 231, 0.9);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--honey-gold);
        }
    </style>
</head>
<body>

<a class="skip-link" href="#mainContent">Skip to main content</a>

<!-- HONEYCOMB BACKGROUND -->
<div class="honeycomb-bg" aria-hidden="true"></div>

<!-- LOADING SCREEN -->
<div class="loading-screen" id="loadingScreen">
    <div class="honey-spinner">
        <div class="loading-jar">
            <div class="loading-honey-fill"></div>
        </div>
    </div>
    <div class="loading-text">Preparing the Hundred Acre Celebration...</div>
    <div class="loading-subtext">
        Gathering honey pots, fluffing tails, straightening bows, and tidying a cozy corner of the Wood for Baby Gunner.
    </div>
    <div class="loading-dots">
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
    </div>
    <div class="loading-hint">(tap or click anywhere to skip)</div>
    <button class="magical-btn" id="skipLoadingBtn">Skip loading screen</button>
</div>

<!-- IMMERSIVE TOP NAVIGATION -->
<nav class="sidebar-nav" id="sidebarNav" aria-label="Story navigation">
    <div class="nav-header">
        <h1 class="nav-title">Hundred Acre Wood</h1>
        <p class="nav-subtitle">Baby Gunner's Celebration</p>
    </div>

    <div class="nav-menu">
        <a href="#section1" class="nav-item active" data-section="section1">
            <i class="fas fa-home"></i>
            <span>Story Beginning</span>
        </a>
        <a href="#section2" class="nav-item" data-section="section2">
            <i class="fas fa-envelope"></i>
            <span>Invitation</span>
        </a>
        <a href="#section3" class="nav-item" data-section="section3">
            <i class="fas fa-users"></i>
            <span>Meet the Characters</span>
        </a>
        <a href="#section4" class="nav-item" data-section="section4">
            <i class="fas fa-gamepad"></i>
            <span>Woodland Activities</span>
        </a>

        <a href="#section5" class="nav-item" data-section="section5">
            <i class="fas fa-gift"></i>
            <span>Gunner's Treasure Trove</span>
        </a>
        <a href="#section6" class="nav-item" data-section="section6">
            <i class="fas fa-map-marker-alt"></i>
            <span>Location & Details</span>
        </a>

        <a href="#" class="nav-item" id="toggleGameNavBtn">
            <i class="fas fa-dice"></i>
            <span>Mini-Games</span>
        </a>
        <a href="#" class="nav-item" id="toggleMusicNavBtn">
            <i class="fas fa-music"></i>
            <span>Toggle Music</span>
        </a>
    </div>

    <div class="nav-dock" aria-label="Story navigation controls">
        <div class="nav-dock__panel">
            <div class="nav-dock__status">
                <span class="nav-dock__eyebrow">Now exploring</span>
                <span class="nav-dock__title" id="navActiveLabel">Story Beginning</span>
                <span class="nav-dock__hint">Use Alt + ‚Üê/‚Üí to jump between chapters</span>
                <div class="nav-dock__progress" role="presentation">
                    <div class="nav-dock__progress-track">
                        <div class="nav-dock__progress-fill" id="navProgressFill"></div>
                    </div>
                    <span class="nav-dock__progress-text" id="navProgressText">0% journey</span>
                </div>
            </div>
            <div class="nav-dock__actions" role="group" aria-label="Navigate story sections">
                <button class="nav-dock__pill" id="prevSectionBtn" aria-label="Go to previous section">
                    <i class="fas fa-arrow-left" aria-hidden="true"></i>
                    Previous
                </button>
                <button class="nav-dock__pill nav-dock__pill--primary" id="nextSectionBtn" aria-label="Go to next section">
                    Next
                    <i class="fas fa-arrow-right" aria-hidden="true"></i>
                </button>
                <button class="nav-dock__pill nav-dock__pill--ghost" id="openNavMapBtn" aria-label="Open chapter map">
                    <i class="fas fa-map-signs" aria-hidden="true"></i>
                    Open map
                </button>
            </div>
        </div>
    </div>

    <div class="nav-footer">
        <p class="nav-footer-text">Made with love and honey</p>
    </div>
</nav>

<div class="nav-overlay" id="navOverlay" aria-hidden="true"></div>

<!-- NAVIGATION TOGGLE -->
<button class="nav-toggle" id="navToggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="sidebarNav" type="button">
    <i class="fas fa-bars" aria-hidden="true"></i>
</button>

<main id="mainContent">
<!-- STORYBOOK COVER -->
<div class="storybook-cover" id="storybookCover" aria-label="Storybook cover: The Hundred Acre Celebration">
    <div class="cover-decoration"></div>
    <h1 class="cover-title">The Hundred Acre Celebration</h1>
    <p class="cover-subtitle">Welcoming Baby Gunner to Our Story</p>

    <button class="open-book-btn" id="openBookBtn">
        <i class="fas fa-book-open" aria-hidden="true"></i>
        Open the Story
    </button>
</div>

<!-- ENCHANTED FOREST BACKGROUND -->
<div class="enchanted-forest" aria-hidden="true">
    <div class="tree" style="left: 5%; height: 360px;"></div>
    <div class="tree" style="left: 25%; height: 420px;"></div>
    <div class="tree" style="left: 60%; height: 340px;"></div>
    <div class="tree" style="left: 85%; height: 400px;"></div>
</div>

<div class="golden-light" aria-hidden="true"></div>

<!-- READING PROGRESS -->
<div class="reading-progress" id="readingProgress"></div>
<div class="sr-only" id="progressStatus" aria-live="polite"></div>

<div class="sr-only" id="musicStatus" aria-live="polite">Music is paused.</div>

<!-- MUSIC CONTROLS -->
<div class="music-controls">
    <button class="accessibility-btn" id="motionToggleBtn" type="button" aria-pressed="false">
        Reduce motion
    </button>
    <button class="music-btn" id="musicBtn" aria-label="Toggle gentle background music">
        <i class="fas fa-music" aria-hidden="true"></i>
    </button>
</div>

<!-- FLOATING ACTION BUTTONS -->
<div class="fab-container" aria-label="Quick actions">
    <button class="fab" id="homeBtn" title="Back to the cover" aria-label="Back to the cover">
        <i class="fas fa-home" aria-hidden="true"></i>
    </button>
    <button class="fab" id="rsvpBtn" title="Quick RSVP" aria-label="Quick RSVP">
        <i class="fas fa-envelope" aria-hidden="true"></i>
    </button>
    <button class="fab" id="storyModeBtn" title="Toggle storytime mode" aria-label="Enable storytime mode">
        <i class="fas fa-book-open" aria-hidden="true"></i>
    </button>
</div>

<!-- FLOATING BEES -->
<div class="floating-bee" style="top: 10%; left: 5%;">
    <div class="bee-body"></div>
    <div class="bee-head"></div>
    <div class="bee-wing left"></div>
    <div class="bee-wing right"></div>
</div>
<div class="floating-bee" style="top: 30%; left: 80%; animation-delay: -5s;">
    <div class="bee-body"></div>
    <div class="bee-head"></div>
    <div class="bee-wing left"></div>
    <div class="bee-wing right"></div>
</div>

<!-- CHARACTER MODAL -->
<div class="character-modal" id="characterModal" aria-modal="true" role="dialog" aria-labelledby="modalCharacterName">
    <div class="modal-content">
        <button class="close-modal" id="closeModal" aria-label="Close character details">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        <div class="modal-character">
            <div class="modal-character-icon pooh-icon" id="modalCharacterIcon">
                <i class="fas fa-bear" aria-hidden="true"></i>
            </div>
            <div class="modal-character-name" id="modalCharacterName">Honey Bear</div>
        </div>
        <div class="modal-character-quote" id="modalCharacterQuote">
            "Some days call for a new baby, a full heart, and just one more spoon of honey."
        </div>
        <div class="modal-character-bio" id="modalCharacterBio">
            Honey Bear is a gentle, golden bear who thinks best with a small pot of something sweet nearby. He loves slow mornings, soft blankets, and any excuse to gather his friends under the trees to celebrate someone small and wonderful.
        </div>
    </div>
</div>

<!-- STORYBOOK WRAPPER -->
<div class="storybook-shell">
    <!-- STORYBOOK CONTENT -->
        <div class="storybook" id="storybook" role="main">
            <div class="storybook-inner">
                <header class="storybook-header">
                    <h2 class="storybook-heading">Once upon a very special day...</h2>
                    <p class="storybook-subheading">A new little friend joins the Hundred Acre Wood</p>

                    <div class="story-summary-bar" aria-label="Event highlights">
                        <div class="summary-item">
                            <div class="summary-icon" aria-hidden="true"><i class="fas fa-calendar-day"></i></div>
                            <div>
                                <div class="summary-label">Date &amp; Time</div>
                                <div class="summary-value">Saturday, April 12 ¬∑ 2:00 PM</div>
                            </div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-icon" aria-hidden="true"><i class="fas fa-map-signs"></i></div>
                            <div>
                                <div class="summary-label">Gathering Spot</div>
                                <div class="summary-value">The Clearing ¬∑ 14 Oak Lane</div>
                            </div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-icon" aria-hidden="true"><i class="fas fa-seedling"></i></div>
                            <div>
                                <div class="summary-label">Dress Code</div>
                                <div class="summary-value">Cozy woodland casual</div>
                            </div>
                        </div>
                    </div>

                    <div class="navigation-map" aria-label="Quick links to each chapter">
                        <span class="navigation-map-label"><i class="fas fa-location-arrow"></i>Jump to:</span>
                        <button class="chapter-chip active" data-section="section1">Beginning</button>
                        <button class="chapter-chip" data-section="section2">Invitation</button>
                        <button class="chapter-chip" data-section="section3">Friends</button>
                        <button class="chapter-chip" data-section="section4">Activities</button>
                        <button class="chapter-chip" data-section="section5">Gifts</button>
                        <button class="chapter-chip" data-section="section6">Details</button>
                    </div>
                </header>

            <!-- SECTION 1: THE BEGINNING -->
            <section class="content-section scroll-animate" id="section1">
                <div class="content-section-inner">
                    <div class="section-number">1</div>

                    <div class="section-header">
                        <h2 class="story-title">Once Upon a Time in the Hundred Acre Wood...</h2>
                    </div>

                    <div class="woodland-sign">
                        Welcome to the Hundred Acre Wood
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            In a corner of the world where stories grow on trees and adventures wait around every bend,
                            a very special celebration is being prepared. The friends of the Hundred Acre Wood are gathering
                            together, for they've heard the most wonderful news ‚Äì a new friend is coming to join their adventures!
                        </p>
                    </div>

                    <div class="hunny-pot-collection">
                        <div class="hunny-pot" onclick="playHunnySound()"></div>
                        <div class="hunny-pot" onclick="playHunnySound()"></div>
                        <div class="hunny-pot" onclick="playHunnySound()"></div>
                        <div class="hunny-pot" onclick="playHunnySound()"></div>
                    </div>

                    <div class="character-spotlight" data-character="pooh">
                        <div class="character-illustration">
                            <img src="Images/Characters/honey-bear.png" alt="Illustration of Winnie the Pooh holding a honey pot." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "Oh, bother! I do believe this calls for a Very Special Something. Perhaps with a little honey?"
                            </div>
                            <div class="character-name">- Winnie the Pooh</div>
                        </div>
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            And so it was decided that all the creatures of the wood would come together for a Grand Celebration
                            to welcome this new little friend. They would share stories, play games, and of course, enjoy
                            plenty of honey and treats. For when a new friend arrives in the Hundred Acre Wood, it is always
                            a cause for the happiest of gatherings.
                        </p>
                    </div>
                </div>
            </section>

            <!-- SECTION 2: THE INVITATION -->
            <section class="content-section scroll-animate" id="section2">
                <div class="content-section-inner">
                    <div class="section-number">2</div>

                    <div class="section-header">
                        <h2 class="story-title">You Are Cordially Invited</h2>
                    </div>

                    <div class="woodland-sign">
                        Party This Way ‚Üí
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            The friends of the Hundred Acre Wood request the pleasure of your company at a Very Special
                            Celebration in honor of the impending arrival of Baby Gunner. Come share in the joy, laughter,
                            and honey-sweet moments as we prepare to welcome this new little adventurer to our story.
                        </p>
                    </div>

                    <div class="invitation-details">
                        <div class="detail-card">
                            <div class="detail-title">When Shall We Meet?</div>
                            <div class="detail-content">
                                On the Twenty Second Day of March<br>
                                In the Year Two Thousand Twenty-Six<br>
                                At Two O'Clock in the Afternoon
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">Where Does Our Story Unfold?</div>
                            <div class="detail-content">
                                The Enchanted Woodland Venue<br>
                                In the Lovely Town of Wilmington<br>
                                Within the Beautiful State of Delaware
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">What Shall We Wear?</div>
                            <div class="detail-content">
                                Your Most Comfortable Storybook Attire<br>
                                Soft Yellows, Gentle Blues, Creamy Whites<br>
                                Or Whatever Makes Your Heart Feel Light
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">How Shall We Respond?</div>
                            <div class="detail-content">
                                By the Sixteenth of February<br>
                                Send a Message with Your Reply<br>
                                So We May Prepare Accordingly
                            </div>
                        </div>
                    </div>

                    <div class="rsvp-form" aria-labelledby="rsvp-heading">
                        <h3 class="story-title" id="rsvp-heading" style="text-align:center; margin-bottom:14px;">Send Your RSVP With a Buzz</h3>
                        <form class="storybook-form">
                            <div class="form-grid">
                                <label>
                                    <span class="sr-only">Your name</span>
                                    <input type="text" name="name" placeholder="Your name" required>
                                </label>
                                <label>
                                    <span class="sr-only">Email or phone</span>
                                    <input type="text" name="contact" placeholder="Email or phone" required>
                                </label>
                            </div>
                            <div class="form-grid">
                                <label>
                                    <span class="sr-only">Attendance</span>
                                    <select name="attendance" required>
                                        <option value="">Will you attend?</option>
                                        <option value="yes">Yes, I'll be there</option>
                                        <option value="no">Sadly, I cannot</option>
                                    </select>
                                </label>
                                <label>
                                    <span class="sr-only">Accessibility or notes</span>
                                    <input type="text" name="notes" placeholder="Accessibility or special notes">
                                </label>
                            </div>
                            <label>
                                <span class="sr-only">Message</span>
                                <textarea name="message" rows="3" placeholder="Leave a message for the family"></textarea>
                            </label>
                            <button type="submit" class="magical-btn" aria-label="Submit your RSVP">Submit RSVP</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- SECTION 3: MEET THE CHARACTERS -->
            <section class="content-section scroll-animate" id="section3">
                <div class="content-section-inner">
                    <div class="section-number">3</div>

                    <div class="section-header">
                        <h2 class="story-title">Meet Our Hosts</h2>
                    </div>

                    <div class="woodland-sign">
                        Character Meet &amp; Greet
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            All your favorite friends from the Hundred Acre Wood will be there to welcome you and share
                            in the celebration. Each has been preparing their own special way to make this day unforgettable.
                        </p>
                    </div>

                    <div class="character-spotlight" data-character="pooh">
                        <div class="character-illustration">
                            <img src="Images/Characters/honey-bear.png" alt="Illustration of Winnie the Pooh holding a honey pot." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "I'm bringing my very best honey pots, of course. A celebration isn't proper without them!"
                            </div>
                            <div class="character-name">Winnie the Pooh</div>
                        </div>
                    </div>

                    <div class="character-spotlight" data-character="piglet">
                        <div class="character-illustration">
                            <img src="Images/Characters/piglet.png" alt="Illustration of Piglet in his striped jumper." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "I may be small, but I've been practicing my welcoming speech for weeks!"
                            </div>
                            <div class="character-name">Piglet</div>
                        </div>
                    </div>

                    <div class="character-spotlight" data-character="tigger">
                        <div class="character-illustration">
                            <img src="Images/Characters/tigger.png" alt="Illustration of Tigger bouncing joyfully." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "The wonderful thing about celebrations is I get to bounce with everyone!"
                            </div>
                            <div class="character-name">Tigger</div>
                        </div>
                    </div>

                    <div class="character-spotlight" data-character="eeyore">
                        <div class="character-illustration">
                            <img src="Images/Characters/eeyore.png" alt="Illustration of Eeyore sitting beside a thistle." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "I've found a particularly nice patch of thistles for the occasion. Not that anyone will notice."
                            </div>
                            <div class="character-name">Eeyore</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 4: WOODLAND ACTIVITIES -->
            <section class="content-section scroll-animate" id="section4">
                <div class="content-section-inner">
                    <div class="section-number">4</div>

                    <div class="section-header">
                        <h2 class="story-title">Woodland Games &amp; Activities</h2>
                    </div>

                    <div class="woodland-sign">
                        Games &amp; Adventures
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            The Hundred Acre Wood is full of wonderful games and adventures.
                            Join us for some classic woodland fun!
                        </p>
                    </div>

                    <!-- HONEY ADVENTURE GAME -->
                    <div class="honey-adventure-game">
                        <div class="game-header">
                            <h1>Winnie the Pooh's Honey Adventure</h1>
                            <p>Help Pooh find honey before his tummy gets too rumbly!</p>
                        </div>

                        <div class="game-mode-pill" id="pathModePill">üåº Meadow Stroll selected</div>

                        <div class="stats-container">
                            <div class="stat" id="honey-count">üçØ Honey: 0</div>
                            <div class="stat" id="energy-level">‚ö° Energy: 10</div>
                            <div class="stat" id="friends-helped">üë´ Friends: 0</div>
                        </div>

                        <div class="honey-display">
                            <div class="honey-jar">
                                <div class="honey-fill" id="honey-fill" style="height: 0%"></div>
                            </div>
                            <h3>Pooh's Honey Jar</h3>
                        </div>

                        <div class="message-box">
                            <span class="pooh-face">üêª</span>
                            <span id="message">Oh bother! I'm feeling rather rumbly in my tumbly...</span>
                        </div>

                        <div class="actions">
                            <button class="action-btn" onclick="searchForHoney()" id="search-btn">
                                üîç Search for Honey
                            </button>
                            <button class="action-btn" onclick="climbTree()" id="climb-btn">
                                üå≥ Climb a Tree
                            </button>
                            <button class="action-btn" onclick="rest()" id="rest-btn">
                                üò¥ Take a Nap
                            </button>
                            <button class="action-btn" onclick="resetGame()">
                                üîÑ Start Over
                            </button>
                        </div>

                        <div class="path-choices" aria-live="polite">
                            <h3>Choose Pooh's Adventure Path</h3>
                            <div class="path-chips" role="group" aria-label="Adventure path">
                                <button class="path-chip active" data-path="meadow">üåº Meadow Stroll</button>
                                <button class="path-chip" data-path="river">üåä Riverbank Dash</button>
                                <button class="path-chip" data-path="canopy">üå≤ High Canopy Hunt</button>
                            </div>
                            <p class="path-hint" id="path-hint">A gentle wander with balanced honey and energy.</p>
                        </div>

                        <div class="friends-section">
                            <h2>Visit Friends</h2>
                            <div class="friends-grid">
                                <div class="friend-card" onclick="visitFriend('Piglet')">
                                    <h3>üê∑ Piglet</h3>
                                    <p>"Oh d-d-dear!"</p>
                                </div>
                                <div class="friend-card" onclick="visitFriend('Tigger')">
                                    <h3>üêØ Tigger</h3>
                                    <p>"TTFN! Ta-ta for now!"</p>
                                </div>
                                <div class="friend-card" onclick="visitFriend('Rabbit')">
                                    <h3>üê∞ Rabbit</h3>
                                    <p>"Organization is key!"</p>
                                </div>
                                <div class="friend-card" onclick="visitFriend('Eeyore')">
                                    <h3>üê¥ Eeyore</h3>
                                    <p>"Thanks for noticing..."</p>
                                </div>
                            </div>
                        </div>

                        <div class="achievements">
                            <h3>Honey Achievements</h3>
                            <div id="achievements-list">
                                <div class="achievement hidden" id="ach-1">üçØ First Taste</div>
                                <div class="achievement hidden" id="ach-5">üèÜ Honey Lover</div>
                                <div class="achievement hidden" id="ach-10">üåü Honey Master</div>
                            </div>
                        </div>

                        <div class="game-log" aria-live="polite">
                            <h3>Adventure Log</h3>
                            <ul class="log-list" id="game-log"></ul>
                        </div>
                    </div>

                    <div class="invitation-details">
                        <div class="detail-card">
                            <div class="detail-title">Games &amp; Activities</div>
                            <div class="detail-content">
                                ‚Ä¢ Pin the Tail on Eeyore<br>
                                ‚Ä¢ Guess the Honey in the Pot<br>
                                ‚Ä¢ Pooh's Quote Matching Game<br>
                                ‚Ä¢ "Wishes for Baby" station<br>
                                ‚Ä¢ Hundred Acre Wood photo booth<br>
                                ‚Ä¢ Storytime with Christopher Robin
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">For Our Littlest Guests</div>
                            <div class="detail-content">
                                ‚Ä¢ Quiet play corner<br>
                                ‚Ä¢ Coloring station<br>
                                ‚Ä¢ Age-appropriate snacks<br>
                                ‚Ä¢ Baby-changing facility<br>
                                ‚Ä¢ Designated nursing area<br>
                                ‚Ä¢ Tigger-approved bounce space
                            </div>
                        </div>
                    </div>

                    <div class="character-spotlight" data-character="tigger">
                        <div class="character-illustration">
                            <img src="Images/Characters/tigger.png" alt="Illustration of Tigger bouncing joyfully." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "The wonderful thing about celebrations? I get to bounce with everybody! Can't wait to see you there!"
                            </div>
                            <div class="character-name">Tigger</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 5: GUNNER'S TREASURE TROVE -->
            <section class="content-section scroll-animate" id="section5">
                <div class="content-section-inner">
                    <div class="section-number">5</div>

                    <div class="section-header">
                        <h2 class="story-title">Gunner's Treasure Trove</h2>
                    </div>

                    <div class="woodland-sign">
                        Baby's First Treasures
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            Your presence at our celebration is the greatest gift we could imagine. For those who have
                            asked about gifts, we've created a small treasure trove of items that would help welcome
                            our little one to the world. But please know that handwritten notes, favorite children's books,
                            or simple well-wishes are equally treasured.
                        </p>
                    </div>

                    <div style="text-align: center; margin: 26px 0;">
                        <a href="#" class="magical-btn">
                            <i class="fas fa-map"></i>
                            Explore the Treasure Map
                        </a>
                    </div>

                    <div class="character-spotlight" data-character="owl">
                        <div class="character-illustration">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' rx='32' fill='%238B7355'/%3E%3Ctext x='50%25' y='50%25' fill='%23FFF7EC' font-family='Playfair Display' font-size='56' text-anchor='middle' dominant-baseline='middle'%3EOwl%3C/text%3E%3C/svg%3E" alt="Stylized owl illustration placeholder in warm brown." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "The acquisition of knowledge through literature is, in my professional opinion, the finest gift one can bestow upon a young mind."
                            </div>
                            <div class="character-name">Owl</div>
                        </div>
                    </div>

                    <div class="character-spotlight" data-character="kanga">
                        <div class="character-illustration">
                            <img src="Images/Characters/roo.png" alt="Illustration of Kanga cuddling Roo in her pouch." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "Little Roo and I believe that cozy blankets and soft cuddles are the very best presents of all."
                            </div>
                            <div class="character-name">Kanga</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 6: PRACTICAL MATTERS -->
            <section class="content-section scroll-animate" id="section6">
                <div class="content-section-inner">
                    <div class="section-number">6</div>

                    <div class="section-header">
                        <h2 class="story-title">Finding Our Woodland Gathering</h2>
                    </div>

                    <div class="woodland-sign">
                        Directions &amp; Details
                    </div>

                    <div class="story-section">
                        <p class="story-text">
                            Even the most wonderful adventures require a bit of practical planning. Here you'll find
                            all the details needed to join our celebration without any bother.
                        </p>
                    </div>

                    <div class="invitation-details">
                        <div class="detail-card">
                            <div class="detail-title">The Very Specific Location</div>
                            <div class="detail-content">
                                <strong>The Enchanted Woodland Venue</strong><br>
                                123 Hundred Acre Lane<br>
                                Wilmington, Delaware 19801<br><br>
                                <i class="fas fa-map-marker-alt"></i>
                                <a href="#" style="color: var(--pooh-red); text-decoration: none;">View on Map</a>
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">Parking &amp; Arrival</div>
                            <div class="detail-content">
                                ‚Ä¢ Plenty of parking in the meadow<br>
                                ‚Ä¢ Follow the honey pot signs<br>
                                ‚Ä¢ Golf cart assistance available<br>
                                ‚Ä¢ Arrive 15 minutes early for magic<br>
                                ‚Ä¢ Text (609) 828-7347 if lost
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">For Our Out-of-Town Friends</div>
                            <div class="detail-content">
                                <strong>Recommended Inns:</strong><br>
                                ‚Ä¢ The Cozy Bear Inn (2 miles)<br>
                                ‚Ä¢ Rabbit's Garden Suites (3 miles)<br>
                                ‚Ä¢ The Blustery Day Hotel (5 miles)<br><br>
                                <em>Special rates available for our guests</em>
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-title">Accessibility Notes</div>
                            <div class="detail-content">
                                ‚Ä¢ Fully wheelchair accessible<br>
                                ‚Ä¢ Quiet room available<br>
                                ‚Ä¢ Allergy-aware menu options<br>
                                ‚Ä¢ Service animals welcome<br>
                                ‚Ä¢ Please indicate needs in RSVP
                            </div>
                        </div>
                    </div>

                    <div class="character-spotlight" data-character="rabbit">
                        <div class="character-illustration">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' rx='32' fill='%239CAD90'/%3E%3Ctext x='50%25' y='50%25' fill='%2343302a' font-family='Playfair Display' font-size='52' text-anchor='middle' dominant-baseline='middle'%3ERabbit%3C/text%3E%3C/svg%3E" alt="Stylized green illustration standing in for Rabbit." loading="lazy" />
                        </div>
                        <div class="character-spotlight-content">
                            <div class="character-quote">
                                "I've organized everything with military precision! Well, as precise as one can be when Tigger keeps moving the signs..."
                            </div>
                            <div class="character-name">Rabbit</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FOOTER -->
            <footer class="footer">
                <p>Made with love and honey for Baby Gunner</p>
                <p>¬© 2025 The Hundred Acre Wood</p>
            </footer>
        </div>
    </div>
    </div>
</main>

<!-- HIDDEN AUDIO ELEMENTS -->
<audio id="backgroundMusic" loop>
    <source src="https://assets.mixkit.co/music/preview/mixkit-gently-piano-578.mp3" type="audio/mpeg">
</audio>

<audio id="hunnySound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
<audio id="tiggerBounceSound" src="https://assets.mixkit.co/sfx/preview/mixkit-jump-into-the-water-1105.mp3"></audio>
<audio id="trapSound" src="https://assets.mixkit.co/sfx/preview/mixkit-falling-trap-1104.mp3"></audio>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const loadingScreen = document.getElementById('loadingScreen');
        const storybookCover = document.getElementById('storybookCover');
        const openBookBtn = document.getElementById('openBookBtn');
        const storybook = document.getElementById('storybook');
        const forestBg = document.querySelector('.enchanted-forest');
        const readingProgress = document.getElementById('readingProgress');
        const progressStatus = document.getElementById('progressStatus');
        const musicBtn = document.getElementById('musicBtn');
        const musicStatus = document.getElementById('musicStatus');
        const motionToggleBtn = document.getElementById('motionToggleBtn');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const characterModal = document.getElementById('characterModal');
        const closeModalBtn = document.getElementById('closeModal');
        const modalCharacterName = document.getElementById('modalCharacterName');
        const modalCharacterQuote = document.getElementById('modalCharacterQuote');
        const modalCharacterBio = document.getElementById('modalCharacterBio');
        const modalCharacterIcon = document.getElementById('modalCharacterIcon');
        const sidebarNav = document.getElementById('sidebarNav');
        const navOverlay = document.getElementById('navOverlay');
        const navToggle = document.getElementById('navToggle');
        const skipLoadingBtn = document.getElementById('skipLoadingBtn');
        const navItems = document.querySelectorAll('.nav-item');
        const chapterChips = document.querySelectorAll('.chapter-chip');
        const homeBtn = document.getElementById('homeBtn');
        const rsvpBtn = document.getElementById('rsvpBtn');
        const storyModeBtn = document.getElementById('storyModeBtn');
        const toggleGameNavBtn = document.getElementById('toggleGameNavBtn');
        const toggleMusicNavBtn = document.getElementById('toggleMusicNavBtn');
        const contentSections = document.querySelectorAll('.content-section');
        const scrollAnimateElements = document.querySelectorAll('.scroll-animate');
        const navActiveLabel = document.getElementById('navActiveLabel');
        const navProgressFill = document.getElementById('navProgressFill');
        const navProgressText = document.getElementById('navProgressText');
        const prevSectionBtn = document.getElementById('prevSectionBtn');
        const nextSectionBtn = document.getElementById('nextSectionBtn');
        const openNavMapBtn = document.getElementById('openNavMapBtn');

        let isMusicPlaying = false;
        let lastFocusedElement = null;
        const navigableSections = Array.from(navItems)
            .filter(item => item.dataset.section)
            .map(item => item.dataset.section);

        const characterData = {
            pooh: {
                name: "Winnie the Pooh",
                quote: "Oh, bother! I do believe this calls for a Very Special Something. Perhaps with a little honey?",
                bio: "Winnie the Pooh is a friendly, thoughtful and sometimes quiet teddy bear. He is always willing to help out his friends and try his best to be a good friend. He enjoys simple pleasures like eating honey and having adventures with his friends in the Hundred Acre Wood.",
                iconClass: "pooh-icon",
                iconHTML: '<i class="fas fa-bear" aria-hidden="true"></i>'
            },
            piglet: {
                name: "Piglet",
                quote: "I may be small, but I've been practicing my welcoming speech for weeks!",
                bio: "Piglet is a very small animal of a generally timid disposition. Despite his small size, Piglet often proves to be very brave when his friends need him.",
                iconClass: "piglet-icon",
                iconHTML: '<i class="fas fa-heart" aria-hidden="true"></i>'
            },
            tigger: {
                name: "Tigger",
                quote: "The wonderful thing about celebrations is I get to bounce with everyone!",
                bio: "Tigger is an energetic, outgoing, and fun-loving tiger who loves to bounce. He is always ready for adventure and brings excitement wherever he goes.",
                iconClass: "tigger-icon",
                iconHTML: '<i class="fas fa-paw" aria-hidden="true"></i>'
            },
            eeyore: {
                name: "Eeyore",
                quote: "I've found a particularly nice patch of thistles for the occasion. Not that anyone will notice.",
                bio: "Eeyore is an old grey donkey who is generally pessimistic and gloomy. Despite his outlook, Eeyore is a loyal friend and appreciated for his unique perspective.",
                iconClass: "eeyore-icon",
                iconHTML: '<i class="fas fa-cloud" aria-hidden="true"></i>'
            },
            rabbit: {
                name: "Rabbit",
                quote: "I've organized everything perfectly! Well, as perfectly as one can with Tigger around...",
                bio: "Rabbit is practical, organized, and likes things to be done properly. He tends to get frustrated when things don't go according to plan, especially when Tigger is involved.",
                iconClass: "rabbit-icon",
                iconHTML: '<i class="fas fa-carrot" aria-hidden="true"></i>'
            },
            owl: {
                name: "Owl",
                quote: "The acquisition of knowledge through literature is, in my professional opinion, the finest gift one can bestow upon a young mind.",
                bio: "Owl presents himself as knowledgeable and academic, though he sometimes gets facts wrong. He enjoys telling long, elaborate stories.",
                iconClass: "owl-icon",
                iconHTML: '<i class="fas fa-feather" aria-hidden="true"></i>'
            },
            kanga: {
                name: "Kanga",
                quote: "Little Roo and I believe that cozy blankets and soft cuddles are the very best presents of all.",
                bio: "Kanga is kind, gentle, and maternal, often looking after the other characters. She is always prepared to help anyone in need.",
                iconClass: "kanga-icon",
                iconHTML: '<i class="fas fa-baby" aria-hidden="true"></i>'
            }
        };

        function init() {
            createFloatingLeaves();
            createSparkles();

            const hideLoading = () => loadingScreen.classList.add('hidden');
            setTimeout(hideLoading, 1800);
            loadingScreen.addEventListener('click', hideLoading, { once: true });
            skipLoadingBtn.addEventListener('click', hideLoading, { once: true });

            initializeMotionPreference();
            setupEventListeners();
            checkScrollAnimations();
            updateActiveNav();
            initHoneyGame();
        }

        function createFloatingLeaves() {
            for (let i = 0; i < 14; i++) {
                const leaf = document.createElement('div');
                leaf.className = 'floating-leaf';

                const size = 15 + Math.random() * 25;
                const left = Math.random() * 100;
                const delay = Math.random() * 15;
                const duration = 12 + Math.random() * 18;

                leaf.style.width = `${size}px`;
                leaf.style.height = `${size}px`;
                leaf.style.left = `${left}vw`;
                leaf.style.animationDelay = `${delay}s`;
                leaf.style.animationDuration = `${duration}s`;

                forestBg.appendChild(leaf);
            }
        }

        function createSparkles() {
            for (let i = 0; i < 18; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';

                const top = Math.random() * 100;
                const left = Math.random() * 100;
                const delay = Math.random() * 6;
                const duration = 3 + Math.random() * 3;

                sparkle.style.top = `${top}vh`;
                sparkle.style.left = `${left}vw`;
                sparkle.style.animationDelay = `${delay}s`;
                sparkle.style.animationDuration = `${duration}s`;

                document.body.appendChild(sparkle);
            }
        }

        function initializeMotionPreference() {
            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)');
            if (prefersReduced.matches) {
                enableReducedMotion(true);
            }

            prefersReduced.addEventListener('change', (event) => {
                enableReducedMotion(event.matches);
            });
        }

        function toggleMotionPreference() {
            const isReduced = !document.body.classList.contains('reduce-motion');
            enableReducedMotion(isReduced);
        }

        function enableReducedMotion(isReduced) {
            document.body.classList.toggle('reduce-motion', isReduced);
            motionToggleBtn.setAttribute('aria-pressed', isReduced.toString());
            motionToggleBtn.textContent = isReduced ? 'Motion reduced' : 'Reduce motion';
        }

        function setupEventListeners() {
            openBookBtn.addEventListener('click', openStorybook);
            navToggle.addEventListener('click', () => toggleSidebarNav());
            navOverlay.addEventListener('click', () => toggleSidebarNav(false));

            openNavMapBtn.addEventListener('click', (e) => {
                e.preventDefault();
                toggleSidebarNav(true);
                const activeItem = sidebarNav.querySelector('.nav-item.active') || sidebarNav.querySelector('.nav-item');
                if (activeItem) {
                    activeItem.focus({ preventScroll: true });
                }
            });

            musicBtn.addEventListener('click', toggleMusic);
            motionToggleBtn.addEventListener('click', toggleMotionPreference);
            toggleMusicNavBtn.addEventListener('click', (e) => {
                e.preventDefault();
                toggleMusic();
            });

            document.querySelectorAll('.character-spotlight').forEach(character => {
                character.addEventListener('click', handleCharacterClick);
            });

            closeModalBtn.addEventListener('click', closeCharacterModal);
            characterModal.addEventListener('click', (e) => {
                if (e.target === characterModal) closeCharacterModal();
            });
            characterModal.addEventListener('keydown', trapFocusInModal);

            navItems.forEach(item => {
                if (!item.id && item.dataset.section) {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        scrollToSection(item.dataset.section);
                        if (window.innerWidth < 992) {
                            toggleSidebarNav(false);
                        }
                    });
                }
            });

            chapterChips.forEach(chip => {
                chip.addEventListener('click', (e) => {
                    e.preventDefault();
                    scrollToSection(chip.dataset.section);
                    if (window.innerWidth < 992) {
                        toggleSidebarNav(false);
                    }
                });
            });

            homeBtn.addEventListener('click', backToCover);
            rsvpBtn.addEventListener('click', () => {
                scrollToSection('section2');
                if (window.innerWidth < 992) {
                    toggleSidebarNav(false);
                }
            });
            storyModeBtn.addEventListener('click', toggleStoryMode);

            toggleGameNavBtn.addEventListener('click', (e) => {
                e.preventDefault();
                scrollToSection('section4');
                if (window.innerWidth < 992) {
                    toggleSidebarNav(false);
                }
            });

            prevSectionBtn.addEventListener('click', () => jumpSection(-1));
            nextSectionBtn.addEventListener('click', () => jumpSection(1));

            document.addEventListener('keydown', handleKeyPress);
            window.addEventListener('scroll', updateReadingProgress);
            window.addEventListener('scroll', updateActiveNav);
            window.addEventListener('scroll', checkScrollAnimations);
            window.addEventListener('resize', handleResize);

            updateReadingProgress();

            const bees = document.querySelectorAll('.floating-bee');
            bees.forEach(bee => {
                bee.addEventListener('click', function () {
                    this.style.animationPlayState = 'paused';

                    const rect = this.getBoundingClientRect();
                    const honeyDrip = document.createElement('div');
                    honeyDrip.className = 'honey-drip';
                    honeyDrip.style.left = `${rect.left + rect.width / 2}px`;
                    honeyDrip.style.top = `${rect.top + rect.height / 2}px`;
                    document.body.appendChild(honeyDrip);

                    setTimeout(() => {
                        this.style.animationPlayState = 'running';
                        honeyDrip.remove();
                    }, 3000);
                });
            });
        }

        function toggleSidebarNav(forceState) {
            const shouldOpen = typeof forceState === 'boolean' ? forceState : !sidebarNav.classList.contains('active');
            sidebarNav.classList.toggle('active', shouldOpen);
            navOverlay.classList.toggle('visible', shouldOpen);
            navToggle.setAttribute('aria-expanded', shouldOpen ? 'true' : 'false');
            document.body.classList.toggle('nav-open', shouldOpen);
        }

        function openStorybook() {
            storybookCover.classList.add('closed');

            setTimeout(() => {
                storybook.classList.add('visible');
                contentSections.forEach(section => {
                    section.classList.add('visible');
                });
            }, 800);
        }

        function backToCover() {
            storybook.classList.remove('visible');
            setTimeout(() => {
                storybookCover.classList.remove('closed');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 300);
        }

        function toggleMusic() {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                isMusicPlaying = false;
                musicBtn.innerHTML = '<i class="fas fa-music"></i>';
                musicBtn.setAttribute('aria-label', 'Play background music');
                musicStatus.textContent = 'Music is paused.';
            } else {
                backgroundMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    musicBtn.setAttribute('aria-label', 'Pause background music');
                    musicStatus.textContent = 'Music is playing.';
                }).catch((error) => {
                    console.log('Audio play failed:', error);
                    isMusicPlaying = false;
                    musicBtn.innerHTML = '<i class="fas fa-music"></i>';
                    musicBtn.setAttribute('aria-label', 'Play background music');
                    musicStatus.textContent = 'Music is paused.';
                });
            }
        }

        function toggleStoryMode() {
            const isActive = document.body.classList.toggle('storytime-active');
            if (isActive) {
                storyModeBtn.innerHTML = '<i class="fas fa-moon" aria-hidden="true"></i>';
                storyModeBtn.setAttribute('aria-label', 'Disable storytime mode');
                storyModeBtn.title = 'Disable storytime mode';
            } else {
                storyModeBtn.innerHTML = '<i class="fas fa-book-open" aria-hidden="true"></i>';
                storyModeBtn.setAttribute('aria-label', 'Enable storytime mode');
                storyModeBtn.title = 'Enable storytime mode';
            }
        }

        function handleCharacterClick(event) {
            const characterElement = event.currentTarget;
            const characterKey = characterElement.getAttribute('data-character');
            if (characterData[characterKey]) {
                openCharacterModal(characterKey);
            }
        }

        function openCharacterModal(characterKey) {
            lastFocusedElement = document.activeElement;
            const character = characterData[characterKey];
            modalCharacterName.textContent = character.name;
            modalCharacterQuote.textContent = `"${character.quote}"`;
            modalCharacterBio.textContent = character.bio;
            modalCharacterIcon.className = `modal-character-icon ${character.iconClass}`;
            modalCharacterIcon.innerHTML = character.iconHTML;
            characterModal.classList.add('active');

            const focusables = getFocusableElements(characterModal);
            if (focusables.length) {
                focusables[0].focus();
            }
        }

        function closeCharacterModal() {
            characterModal.classList.remove('active');
            if (lastFocusedElement) {
                lastFocusedElement.focus();
            }
        }

        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        }

        function getFocusableElements(container) {
            return Array.from(container.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))
                .filter(el => !el.hasAttribute('disabled') && el.offsetParent !== null);
        }

        function trapFocusInModal(event) {
            if (!characterModal.classList.contains('active') || event.key !== 'Tab') {
                return;
            }

            const focusable = getFocusableElements(characterModal);
            if (!focusable.length) return;

            const first = focusable[0];
            const last = focusable[focusable.length - 1];

            if (event.shiftKey && document.activeElement === first) {
                event.preventDefault();
                last.focus();
            } else if (!event.shiftKey && document.activeElement === last) {
                event.preventDefault();
                first.focus();
            }
        }

        function updateActiveNav() {
            const scrollPosition = window.pageYOffset + 140;
            let activeSectionId = navigableSections[0] || '';

            navItems.forEach(item => {
                const sectionId = item.getAttribute('data-section');
                if (sectionId) {
                    const section = document.getElementById(sectionId);
                    if (section) {
                        const rect = section.getBoundingClientRect();
                        const sectionTop = rect.top + window.pageYOffset;
                        const sectionBottom = sectionTop + section.offsetHeight;

                        if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                            item.classList.add('active');
                            activeSectionId = sectionId;
                            chapterChips.forEach(chip => {
                                chip.classList.toggle('active', chip.dataset.section === sectionId);
                            });
                        } else {
                            item.classList.remove('active');
                        }
                    }
                }
            });

            updateNavControls(activeSectionId);
        }

        function updateNavControls(activeSectionId) {
            const currentIndex = navigableSections.indexOf(activeSectionId);
            const navLabel = document.querySelector(`.nav-item[data-section="${activeSectionId}"] span`);
            navActiveLabel.textContent = navLabel ? navLabel.textContent : 'Navigate story';

            const totalSections = navigableSections.length || 1;
            const progressPercent = currentIndex >= 0 ? Math.round(((currentIndex + 1) / totalSections) * 100) : 0;

            if (navProgressFill) {
                navProgressFill.style.width = `${Math.min(Math.max(progressPercent, 0), 100)}%`;
            }

            if (navProgressText) {
                navProgressText.textContent = `${Math.max(progressPercent, 0)}% journey`;
            }

            prevSectionBtn.disabled = currentIndex <= 0;
            nextSectionBtn.disabled = currentIndex === -1 || currentIndex >= navigableSections.length - 1;
        }

        function jumpSection(direction) {
            const activeItem = document.querySelector('.nav-item.active[data-section]');
            const currentId = activeItem ? activeItem.dataset.section : navigableSections[0];
            const currentIndex = navigableSections.indexOf(currentId);
            const targetIndex = currentIndex + direction;

            if (targetIndex >= 0 && targetIndex < navigableSections.length) {
                scrollToSection(navigableSections[targetIndex]);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Escape') {
                closeCharacterModal();
                toggleSidebarNav(false);
            } else if (event.key === 'Home') {
                backToCover();
            } else if (event.altKey && event.key === 'ArrowRight') {
                event.preventDefault();
                jumpSection(1);
            } else if (event.altKey && event.key === 'ArrowLeft') {
                event.preventDefault();
                jumpSection(-1);
            }
        }

        function updateReadingProgress() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollProgress = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
            readingProgress.style.width = `${scrollProgress}%`;
            progressStatus.textContent = `Reading progress: ${Math.round(scrollProgress)} percent.`;
        }

        function handleResize() {
            if (window.innerWidth >= 992) {
                toggleSidebarNav(false);
            }
        }

        function checkScrollAnimations() {
            const windowHeight = window.innerHeight;
            const triggerBottom = windowHeight * 0.8;

            scrollAnimateElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                if (elementTop < triggerBottom) {
                    element.classList.add('visible');
                }
            });
        }

        window.playHunnySound = function() {
            const sound = document.getElementById('hunnySound');
            sound.currentTime = 0;
            sound.play();

            if (event && event.target) {
                event.target.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    event.target.style.transform = '';
                }, 200);
            }
        };

        function initHoneyGame() {
            const gameState = {
                honey: 0,
                energy: 10,
                friendsHelped: 0,
                maxHoney: 10,
                achievements: {
                    firstHoney: false,
                    fiveHoney: false,
                    tenHoney: false
                },
                path: 'meadow',
                log: []
            };

            const pathSettings = {
                meadow: {
                    label: 'Meadow Stroll',
                    energyCost: 1,
                    honeyRange: [1, 2],
                    friendBonus: 0.15,
                    risk: 0.05,
                    hint: 'A gentle wander with balanced honey and energy.'
                },
                river: {
                    label: 'Riverbank Dash',
                    energyCost: 1,
                    honeyRange: [0, 3],
                    friendBonus: 0.35,
                    risk: 0.2,
                    hint: 'Faster pace with higher honey swings and a chance to slip!'
                },
                canopy: {
                    label: 'High Canopy Hunt',
                    energyCost: 2,
                    honeyRange: [2, 4],
                    friendBonus: 0.2,
                    risk: 0.12,
                    hint: 'Bigger honey hauls, but it costs more energy to reach the treetops.'
                }
            };

            const pathModePill = document.getElementById('pathModePill');
            const pathHint = document.getElementById('path-hint');
            const pathChips = document.querySelectorAll('.path-chip');
            const gameLog = document.getElementById('game-log');

            const friendResponses = {
                Piglet: [
                    "Oh d-d-dear, Pooh! I saw some bees near the thistles!",
                    "You're my best friend, Pooh! Let's look together!",
                    "I'm not very big, but I'll help you search!",
                    "Oh, I do hope we find honey for you, Pooh!"
                ],
                Tigger: [
                    "Honey? That's bouncy-trouncy fun! Let's bounce to it!",
                    "The wonderful thing about honey is honey's a wonderful thing!",
                    "Tiggers love honey too! Bounce with me!",
                    "Honey hunting is what Tiggers do best!"
                ],
                Rabbit: [
                    "Pooh Bear! If you help me garden, I might share honey!",
                    "Organization is key! Let's make a proper honey-finding plan.",
                    "My garden first, then honey! That's the deal!",
                    "I've been saving honey for a special occasion..."
                ],
                Eeyore: [
                    "You might find some, but it'll probably rain soon anyway.",
                    "My tail fell off again. Honey would be nice, I suppose.",
                    "Don't expect much. Nothing good ever happens to me.",
                    "If you find extra, save some for a rainy day. Which is every day."
                ]
            };

            const honeyLocations = [
                "in a hollow tree",
                "by Rabbit's garden",
                "near the babbling brook",
                "under a patch of bluebells",
                "at Christopher Robin's house",
                "in a beehive up high",
                "behind Eeyore's gloomy place",
                "in the Hundred Acre Wood"
            ];

            function setPath(pathKey) {
                if (!pathSettings[pathKey]) return;
                gameState.path = pathKey;
                pathChips.forEach(chip => chip.classList.toggle('active', chip.dataset.path === pathKey));
                pathModePill.textContent = `${pathSettings[pathKey].label} selected`;
                pathHint.textContent = pathSettings[pathKey].hint;
                logEvent(`Switched to ${pathSettings[pathKey].label}.`);
            }

            function logEvent(entry) {
                gameState.log.unshift(entry);
                if (gameState.log.length > 5) {
                    gameState.log.pop();
                }
                renderLog();
            }

            function renderLog() {
                if (!gameLog) return;
                gameLog.innerHTML = '';
                gameState.log.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    gameLog.appendChild(li);
                });
            }

            function updateDisplay() {
                document.getElementById('honey-count').textContent = `üçØ Honey: ${gameState.honey}`;
                document.getElementById('energy-level').textContent = `‚ö° Energy: ${gameState.energy}`;
                document.getElementById('friends-helped').textContent = `üë´ Friends: ${gameState.friendsHelped}`;

                const fillPercentage = (gameState.honey / gameState.maxHoney) * 100;
                document.getElementById('honey-fill').style.height = `${fillPercentage}%`;

                document.getElementById('search-btn').disabled = gameState.energy < 1;
                document.getElementById('climb-btn').disabled = gameState.energy < 2;
                document.getElementById('rest-btn').disabled = gameState.energy >= 10;

                pathModePill.textContent = `${pathSettings[gameState.path].label} selected`;
                pathHint.textContent = pathSettings[gameState.path].hint;

                checkAchievements();
                renderLog();
            }

            function showMessage(text, isGood = true, logIt = true) {
                const messageBox = document.getElementById('message');
                const poohFace = document.querySelector('.pooh-face');

                messageBox.textContent = text;
                poohFace.textContent = isGood ? "üêª" : "üòû";

                if (logIt) {
                    logEvent(text);
                }

                messageBox.classList.add('bounce');
                setTimeout(() => {
                    messageBox.classList.remove('bounce');
                }, 500);
            }

            pathChips.forEach(chip => {
                chip.addEventListener('click', () => setPath(chip.dataset.path));
            });

            window.searchForHoney = function () {
                const path = pathSettings[gameState.path];
                if (gameState.energy < path.energyCost) {
                    showMessage("I'm too tired to search... need a nap!", false);
                    return;
                }

                gameState.energy -= path.energyCost;

                const honeyFound = Math.max(0, Math.floor(Math.random() * (path.honeyRange[1] - path.honeyRange[0] + 1)) + path.honeyRange[0]);
                const location = honeyLocations[Math.floor(Math.random() * honeyLocations.length)];
                const riskRoll = Math.random();

                if (riskRoll < path.risk) {
                    gameState.energy = Math.max(0, gameState.energy - 1);
                    showMessage("Buzz buzz! I had to duck from the bees. Lost a bit of energy!", false);
                } else if (honeyFound > 0) {
                    gameState.honey = Math.min(gameState.honey + honeyFound, gameState.maxHoney);
                    showMessage(`Yum! ${honeyFound} pot(s) of honey ${location}! *munch munch*`);

                    const fill = document.getElementById('honey-fill');
                    fill.classList.add('bounce');
                    setTimeout(() => fill.classList.remove('bounce'), 500);
                } else {
                    const failMessages = [
                        "Oh bother! No honey here. Just bees!",
                        "My tummy is still rumbly. No honey found.",
                        "I thought I smelled honey, but it was just flowers.",
                        "The bees are being rather protective today."
                    ];
                    showMessage(failMessages[Math.floor(Math.random() * failMessages.length)], false);
                }

                updateDisplay();
            };

            window.climbTree = function () {
                const path = pathSettings[gameState.path];
                const climbCost = Math.max(2, path.energyCost + 1);
                if (gameState.energy < climbCost) {
                    showMessage("I'm too tired to climb... I might get stuck!", false);
                    return;
                }

                gameState.energy -= climbCost;
                const outcome = Math.random();

                if (outcome < 0.5) {
                    const honeyFound = Math.max(2, path.honeyRange[1]);
                    gameState.honey = Math.min(gameState.honey + honeyFound, gameState.maxHoney);
                    showMessage(`I climbed high and found a beehive! ${honeyFound} pots of honey! *munch munch*`);

                    const fill = document.getElementById('honey-fill');
                    fill.classList.add('bounce');
                    setTimeout(() => fill.classList.remove('bounce'), 500);
                } else if (outcome < 0.8) {
                    showMessage("The bees didn't like me climbing their tree! I had to run away!", false);
                    const box = document.querySelector('.message-box');
                    box.classList.add('shake');
                    setTimeout(() => box.classList.remove('shake'), 500);
                } else {
                    showMessage("Oh bother! I'm stuck in the tree! Christopher Robin helped me down.");
                    gameState.energy = Math.min(gameState.energy + 1, 10);
                }

                updateDisplay();
            };

            window.visitFriend = function (friend) {
                if (gameState.energy < 1) {
                    showMessage("I'm too tired to visit friends right now...", false);
                    return;
                }

                gameState.energy--;
                gameState.friendsHelped++;

                const responses = friendResponses[friend];
                let message = responses[Math.floor(Math.random() * responses.length)];

                const honeyBonus = Math.min(0.7, 0.3 + pathSettings[gameState.path].friendBonus);
                if (Math.random() < honeyBonus && gameState.honey < gameState.maxHoney) {
                    gameState.honey++;
                    message += " And they shared some honey with me!";
                    const fill = document.getElementById('honey-fill');
                    fill.classList.add('bounce');
                    setTimeout(() => fill.classList.remove('bounce'), 500);
                }

                showMessage(`${friend}: "${message}"`);
                updateDisplay();
            };

            window.rest = function () {
                if (gameState.energy >= 10) {
                    showMessage("I'm not tired! Let's find more honey!");
                    return;
                }

                const energyGained = Math.min(5, 10 - gameState.energy);
                gameState.energy += energyGained;

                showMessage(`Zzzzz... *snore* ... Oh! I feel refreshed! (+${energyGained} energy)`);
                updateDisplay();
            };

            function checkAchievements() {
                if (gameState.honey >= 1 && !gameState.achievements.firstHoney) {
                    gameState.achievements.firstHoney = true;
                    document.getElementById('ach-1').classList.remove('hidden');
                    showMessage("I got my first taste of honey! üçØ");
                }

                if (gameState.honey >= 5 && !gameState.achievements.fiveHoney) {
                    gameState.achievements.fiveHoney = true;
                    document.getElementById('ach-5').classList.remove('hidden');
                    showMessage("I'm a true Honey Lover! üèÜ");
                }

                if (gameState.honey >= 10 && !gameState.achievements.tenHoney) {
                    gameState.achievements.tenHoney = true;
                    document.getElementById('ach-10').classList.remove('hidden');
                    showMessage("I've mastered the art of honey finding! üåü");
                }
            }

            window.resetGame = function () {
                gameState.honey = 0;
                gameState.energy = 10;
                gameState.friendsHelped = 0;
                gameState.achievements.firstHoney = false;
                gameState.achievements.fiveHoney = false;
                gameState.achievements.tenHoney = false;
                gameState.log = [];

                document.getElementById('ach-1').classList.add('hidden');
                document.getElementById('ach-5').classList.add('hidden');
                document.getElementById('ach-10').classList.add('hidden');

                setPath('meadow');
                logEvent("Starting a new honey adventure! Oh, what a day for honey!");
                showMessage("Starting a new honey adventure! Oh, what a day for honey!");
                updateDisplay();
            };

            setPath(gameState.path);
            updateDisplay();

            const poohThoughts = [
                "I wonder where the honey is...",
                "My tummy is making rumble noises...",
                "Think, think, think... about honey!",
                "A little smackerel would be nice right now...",
                "Oh bother, where could that honey be?"
            ];

            setInterval(() => {
                const box = document.querySelector('.message-box');
                if (Math.random() > 0.7 && !box.classList.contains('bounce')) {
                    const thought = poohThoughts[Math.floor(Math.random() * poohThoughts.length)];
                    showMessage(thought, true, false);
                }
            }, 8000);
        }

        init();
    });
</script>

</body>
</html>
