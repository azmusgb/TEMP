<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Baby Gunner's Hundred Acre Wood Adventure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="description" content="A storybook-style Hundred Acre Wood adventure with a honey-catching game to celebrate Baby Gunner." />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Patrick+Hand:wght@400;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    *:focus {
      outline: 2px solid var(--honey);
      outline-offset: 2px;
    }

    :root {
      --parchment: #f9f4e8;
      --parchment-dark: #e8dcc5;
      --ink: #2b1810;
      --honey: #f4a944;
      --honey-dark: #d48a1f;
      --pooh-red: #d32f2f;
      --forest-green: #5a7c3e;
      --baby-blue: #6ba3d4;
      --shadow: rgba(43, 24, 16, 0.15);
    }

    body {
      font-family: 'Patrick Hand', 'Georgia', 'Garamond', serif;
      background:
        radial-gradient(circle at 20% 20%, rgba(255, 247, 224, 0.18), transparent 35%),
        radial-gradient(circle at 80% 10%, rgba(212, 233, 202, 0.14), transparent 30%),
        linear-gradient(135deg, #d7b98d 0%, #a37c4e 40%, #5a4a3a 100%);
      color: var(--ink);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
      overflow-x: hidden;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><text y="20" font-size="20">üçØ</text></svg>'), auto;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(244, 169, 68, 0.08) 0, rgba(244, 169, 68, 0.08) 8px, transparent 12px),
        radial-gradient(circle at 60% 10%, rgba(90, 124, 62, 0.06) 0, rgba(90, 124, 62, 0.06) 10px, transparent 16px),
        radial-gradient(circle at 80% 70%, rgba(211, 47, 47, 0.05) 0, rgba(211, 47, 47, 0.05) 12px, transparent 18px);
      background-size: 140px 140px, 200px 200px, 220px 220px;
      opacity: 0.55;
      pointer-events: none;
      z-index: 0;
    }

    /* Ambient scene background */
    .ambient-scene {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .butterfly {
      position: absolute;
      font-size: 24px;
      animation: flutter 8s ease-in-out infinite;
      opacity: 0.7;
    }

    .butterfly:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
    .butterfly:nth-child(2) { top: 60%; right: 15%; animation-delay: 2s; }
    .butterfly:nth-child(3) { top: 40%; left: 70%; animation-delay: 4s; }

    @keyframes flutter {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(30px, -20px) rotate(5deg); }
      50% { transform: translate(60px, 10px) rotate(-5deg); }
      75% { transform: translate(30px, 30px) rotate(3deg); }
    }

    .floating-leaf {
      position: absolute;
      font-size: 20px;
      animation: fall 15s linear infinite;
      opacity: 0.6;
    }

    .floating-leaf:nth-child(4) { left: 20%; animation-delay: 0s; }
    .floating-leaf:nth-child(5) { left: 50%; animation-delay: 5s; }
    .floating-leaf:nth-child(6) { left: 80%; animation-delay: 10s; }

    @keyframes fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
      10% { opacity: 0.6; }
      90% { opacity: 0.6; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }

    .bee-ambient {
      position: absolute;
      font-size: 18px;
      animation: buzz 12s linear infinite;
    }

    .bee-ambient:nth-child(7) { top: 30%; animation-delay: 1s; }
    .bee-ambient:nth-child(8) { top: 70%; animation-delay: 6s; }

    @keyframes buzz {
      0% { left: -50px; transform: translateY(0); }
      50% { transform: translateY(-30px); }
      100% { left: calc(100% + 50px); transform: translateY(0); }
    }

    /* Parallax clouds */
    .cloud-layer {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .cloud {
      position: absolute;
      font-size: 48px;
      opacity: 0.3;
      animation: drift 60s linear infinite;
    }

    /* Pooh masthead and characters */
    .pooh-masthead {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto 18px;
      position: relative;
      z-index: 1;
    }

    .masthead-inner {
      background: linear-gradient(180deg, rgba(249, 244, 232, 0.94), rgba(232, 220, 197, 0.94));
      border: 3px solid rgba(244, 169, 68, 0.55);
      border-radius: 16px;
      box-shadow: 0 18px 32px rgba(43, 24, 16, 0.28);
      padding: 22px 26px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      position: relative;
      overflow: hidden;
    }

    .honey-drip {
      position: absolute;
      inset: -18px -12px auto -12px;
      height: 36px;
      background: radial-gradient(circle at 10% 60%, rgba(244, 169, 68, 0.8) 0, rgba(244, 169, 68, 0.8) 14px, transparent 18px),
                  radial-gradient(circle at 35% 60%, rgba(212, 138, 31, 0.8) 0, rgba(212, 138, 31, 0.8) 13px, transparent 18px),
                  radial-gradient(circle at 65% 60%, rgba(244, 169, 68, 0.8) 0, rgba(244, 169, 68, 0.8) 15px, transparent 18px),
                  radial-gradient(circle at 90% 60%, rgba(212, 138, 31, 0.8) 0, rgba(212, 138, 31, 0.8) 12px, transparent 18px);
      background-size: 90px 36px;
      mix-blend-mode: multiply;
      opacity: 0.8;
    }

    .masthead-title {
      font-size: 2.1rem;
      color: var(--pooh-red);
      text-shadow: 2px 2px 6px rgba(0,0,0,0.15);
      letter-spacing: 1px;
    }

    .masthead-tagline {
      color: #3c2a1a;
      font-size: 1.05rem;
      line-height: 1.5;
      max-width: 720px;
    }

    .forest-garland {
      display: flex;
      gap: 10px;
      font-size: 1.3rem;
      color: var(--forest-green);
      margin-top: 8px;
    }

    .honeypot-badge {
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.4), rgba(244, 169, 68, 0.9));
      border: 3px solid rgba(212, 138, 31, 0.7);
      color: #3c1f0a;
      padding: 14px 16px;
      border-radius: 14px;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.4), 0 10px 20px rgba(0,0,0,0.15);
      text-transform: uppercase;
      letter-spacing: 1px;
      white-space: nowrap;
    }

    .character-banner {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-top: 12px;
    }

    .character-card {
      background: rgba(255,255,255,0.92);
      border: 2px dashed rgba(244, 169, 68, 0.8);
      border-radius: 14px;
      padding: 12px;
      display: grid;
      justify-items: center;
      gap: 8px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .character-card:hover {
      transform: translateY(-4px) rotate(-1deg);
      box-shadow: 0 12px 24px rgba(0,0,0,0.18);
    }

    .character-card img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.2));
    }

    .character-card img.fallback-img {
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(107, 163, 212, 0.3));
      border-radius: 12px;
      padding: 8px;
      filter: none;
    }

    .character-name {
      font-weight: 700;
      color: var(--pooh-red);
      text-align: center;
    }

    .character-trait {
      font-size: 0.9rem;
      color: #4a3928;
      text-align: center;
      line-height: 1.4;
    }

    .cloud:nth-child(1) { top: 10%; animation-duration: 80s; }
    .cloud:nth-child(2) { top: 30%; animation-duration: 100s; animation-delay: -20s; }
    .cloud:nth-child(3) { top: 50%; animation-duration: 90s; animation-delay: -40s; }

    @keyframes drift {
      from { transform: translateX(-100px); }
      to { transform: translateX(100vw); }
    }

    /* Book container */
    .book-container {
      max-width: 1200px;
      width: 100%;
      perspective: 2500px;
      position: relative;
      z-index: 1;
      margin-top: 10px;
    }

    .book-container::before {
      content: '';
      position: absolute;
      inset: -10px -14px -30px -14px;
      background: radial-gradient(circle at 20% 20%, rgba(0,0,0,0.18), transparent 35%),
                  radial-gradient(circle at 80% 20%, rgba(0,0,0,0.14), transparent 32%);
      filter: blur(28px);
      opacity: 0.55;
      z-index: 0;
      pointer-events: none;
    }

    .book {
      background: linear-gradient(135deg, #3c2c1d 0%, #2c1f13 46%, #24160d 100%);
      padding: 46px 52px;
      border-radius: 14px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,255,0.05);
      position: relative;
      transform-style: preserve-3d;
      overflow: hidden;
      isolation: isolate;
    }

    .book::after {
      content: '';
      position: absolute;
      inset: 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.06);
      pointer-events: none;
      box-shadow: inset 0 0 40px rgba(0,0,0,0.35);
    }

    .chapter-tracker {
      background: linear-gradient(120deg, rgba(249, 244, 232, 0.9), rgba(232, 220, 197, 0.95));
      border: 2px solid rgba(244, 169, 68, 0.35);
      padding: 16px 18px 12px;
      border-radius: 16px;
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.18);
      margin-bottom: 18px;
      position: relative;
      overflow: hidden;
    }

    .chapter-tracker::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 18% 30%, rgba(255,255,255,0.45), transparent 38%),
                  radial-gradient(circle at 80% 20%, rgba(244, 169, 68, 0.25), transparent 40%);
      pointer-events: none;
    }

    .tracker-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .tracker-label {
      font-size: 1.05rem;
      color: var(--pooh-red);
      font-weight: 700;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .tracker-label::before {
      content: 'üìñ';
      font-size: 1.2rem;
    }

    .book-progress {
      position: relative;
      flex: 1;
      height: 10px;
      border-radius: 999px;
      background: rgba(212, 138, 31, 0.16);
      overflow: hidden;
      border: 1px solid rgba(212, 138, 31, 0.2);
    }

    .progress-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      background: linear-gradient(90deg, var(--honey), var(--honey-dark));
      border-radius: 999px;
      box-shadow: 0 0 12px rgba(244, 169, 68, 0.55);
      transition: width 0.4s ease;
    }

    .chapter-pill-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 10px;
    }

    .chapter-pill {
      border: 2px dashed rgba(212, 138, 31, 0.6);
      background: rgba(255,255,255,0.92);
      padding: 10px 12px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      min-height: 44px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      text-align: left;
      position: relative;
      overflow: hidden;
    }

    .chapter-pill::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(244, 169, 68, 0.12), transparent 50%);
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .chapter-pill:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 22px rgba(0,0,0,0.12);
      border-color: var(--honey);
    }

    .chapter-pill:hover::after { opacity: 1; }

    .chapter-pill.active {
      border-style: solid;
      border-color: var(--honey);
      box-shadow: 0 12px 22px rgba(0,0,0,0.16), inset 0 0 0 2px rgba(255,255,255,0.7);
    }

    .chapter-pill.visited {
      border-color: rgba(90, 124, 62, 0.7);
      opacity: 0.9;
    }

    .chapter-pill.visited .pill-number {
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.7), rgba(90, 124, 62, 0.75));
      color: white;
    }

    .chapter-pill.visited::after {
      opacity: 0.4;
    }

    .pill-number {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.45), rgba(244, 169, 68, 0.95));
      display: grid;
      place-items: center;
      color: #3c1f0a;
      font-weight: 800;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.4);
      flex-shrink: 0;
    }

    .pill-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .pill-title {
      font-weight: 700;
      color: var(--ink);
      font-size: 1rem;
    }

    .pill-detail {
      font-size: 0.9rem;
      color: #4a3928;
    }

    /* Book spine decoration */
    .book::before {
      content: '';
      position: absolute;
      left: -10px;
      top: 10%;
      bottom: 10%;
      width: 10px;
      background: linear-gradient(180deg, #2a1a0a, #4a3a2a);
      border-radius: 3px 0 0 3px;
      box-shadow: inset -2px 0 4px rgba(0,0,0,0.5);
    }

    .pages-wrapper {
      display: flex;
      gap: 32px;
      min-height: 600px;
      position: relative;
      padding: 12px 10px;
      background: linear-gradient(120deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border-radius: 10px;
    }

    .page {
      flex: 1;
      background: radial-gradient(circle at 20% 20%, rgba(244, 169, 68, 0.04), transparent 35%),
                  radial-gradient(circle at 80% 10%, rgba(106, 159, 96, 0.05), transparent 32%),
                  var(--parchment);
      padding: 42px;
      border-radius: 12px;
      border: 1px solid var(--parchment-dark);
      box-shadow:
        inset 0 0 30px rgba(139, 111, 71, 0.12),
        0 18px 32px rgba(0, 0, 0, 0.24);
      position: relative;
      max-height: none;
      overflow-y: visible;
      display: none;
      transform-style: preserve-3d;
      background-image:
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 31px,
          rgba(139, 111, 71, 0.03) 31px,
          rgba(139, 111, 71, 0.03) 32px
        );
    }

    .page-content {
      display: grid;
      grid-template-columns: 1.6fr 1fr;
      gap: 24px;
      align-items: start;
      margin-bottom: 24px;
    }

    .page-column {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .page.active {
      display: block;
      animation: pageEnter 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .page.exiting {
      animation: pageExit 0.6s cubic-bezier(0.55, 0.085, 0.68, 0.53);
    }

    @keyframes pageEnter {
      0% {
        transform: rotateY(-90deg);
        opacity: 0;
        transform-origin: left center;
      }
      100% {
        transform: rotateY(0deg);
        opacity: 1;
        transform-origin: left center;
      }
    }

    @keyframes pageExit {
      0% {
        transform: rotateY(0deg);
        opacity: 1;
        transform-origin: left center;
      }
      100% {
        transform: rotateY(90deg);
        opacity: 0;
        transform-origin: left center;
      }
    }

    .page::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 40%, rgba(244, 169, 68, 0.03), transparent 60%);
      pointer-events: none;
    }

    .page::after {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 24px;
      width: 12px;
      background: linear-gradient(90deg, rgba(0,0,0,0.08), rgba(0,0,0,0));
      opacity: 0.2;
      pointer-events: none;
    }

    /* Chapter headers */
    .chapter-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--honey);
      position: relative;
    }

    .chapter-header::before,
    .chapter-header::after {
      content: 'üåø';
      position: absolute;
      bottom: -15px;
      font-size: 24px;
      animation: sway 3s ease-in-out infinite;
    }

    .chapter-header::before {
      left: 20px;
    }

    .chapter-header::after {
      right: 20px;
      animation-delay: 1.5s;
    }

    @keyframes sway {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    .chapter-number {
      font-size: 0.9rem;
      letter-spacing: 3px;
      color: var(--honey-dark);
      text-transform: uppercase;
      margin-bottom: 10px;
      animation: fadeInDown 0.8s ease;
    }

    .chapter-title {
      font-size: 2rem;
      color: var(--pooh-red);
      font-weight: normal;
      margin-bottom: 10px;
      font-style: italic;
      animation: fadeInUp 1s ease;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .chapter-subtitle {
      font-size: 1rem;
      color: var(--ink);
      opacity: 0.7;
      animation: fadeIn 1.2s ease;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .story-text {
      font-size: 1.1rem;
      line-height: 1.8;
      margin-bottom: 20px;
      text-indent: 2em;
      text-align: justify;
      animation: fadeIn 1.5s ease;
    }

    .story-text:first-of-type::first-letter {
      font-size: 3.5rem;
      float: left;
      line-height: 0.9;
      margin: 5px 8px 0 0;
      color: var(--pooh-red);
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .illustration-box {
      border: 3px solid var(--honey);
      padding: 20px;
      margin: 30px 0;
      background: white;
      text-align: center;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
      animation: slideIn 1s ease;
    }

    @keyframes slideIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .illustration-box::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
      animation: shine 3s ease-in-out infinite;
    }

    @keyframes shine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .bear-illustration {
      font-size: 80px;
      margin: 20px 0;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .party-details {
      background: white;
      padding: 25px;
      border-radius: 8px;
      border: 2px solid var(--baby-blue);
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      animation: fadeIn 1.8s ease;
    }

    .party-details h3 {
      color: var(--baby-blue);
      margin-bottom: 15px;
      text-align: center;
    }

    .info-card {
      background: white;
      border: 2px solid var(--parchment-dark);
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .info-card h4 {
      color: var(--honey-dark);
      font-size: 1rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .lore-panel {
      background: rgba(255, 255, 255, 0.94);
      border: 2px dashed rgba(244, 169, 68, 0.8);
      border-radius: 14px;
      padding: 14px 16px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
    }

    .lore-panel summary {
      list-style: none;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      font-weight: 800;
      color: var(--pooh-red);
      font-size: 1.05rem;
    }

    .lore-panel summary::-webkit-details-marker {
      display: none;
    }

    .lore-panel[open] {
      border-style: solid;
    }

    .lore-content {
      margin-top: 12px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 16px;
      align-items: start;
    }

    .lore-stories {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .detail-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px 0;
      border-bottom: 1px solid var(--parchment-dark);
      transition: transform 0.3s ease;
    }

    .detail-item:hover {
      transform: translateX(5px);
    }

    .detail-item:last-child {
      border-bottom: none;
    }

    .detail-icon {
      font-size: 1.5rem;
      width: 40px;
      text-align: center;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    /* GAME SECTION STYLING
       ==================== */

    .game-section {
      margin-top: 10px;
      padding: 22px 24px 26px;
      border-radius: 18px;
      background:
        radial-gradient(circle at 0 0, rgba(250, 236, 200, 0.9), transparent 60%),
        radial-gradient(circle at 100% 0, rgba(212, 233, 202, 0.85), transparent 60%),
        var(--parchment);
      box-shadow:
        0 22px 50px rgba(0, 0, 0, 0.22),
        inset 0 0 0 1px rgba(0, 0, 0, 0.03);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 20px;
      max-width: 960px;
      margin-left: auto;
      margin-right: auto;
    }

    .game-section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    .game-section-title {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .game-section-title span:first-child {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--forest-green);
    }

    .game-section-title span:last-child {
      font-size: 1.6rem;
      font-weight: 800;
      color: var(--pooh-red);
    }

    .game-tag {
      padding: 7px 14px;
      border-radius: 999px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(244, 169, 68, 0.12);
      border: 1px solid rgba(212, 138, 31, 0.5);
      color: #5a3a1f;
      white-space: nowrap;
    }

    .game-layout {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin: 0;
    }

    .game-top {
      display: grid;
      grid-template-columns: minmax(0, 1.25fr) minmax(280px, 0.85fr);
      gap: 16px;
      align-items: stretch;
    }

    .game-container {
      background: white;
      padding: 18px 18px 16px;
      border-radius: 16px;
      border: 3px solid rgba(244, 169, 68, 0.9);
      position: relative;
      box-shadow:
        0 14px 34px rgba(43, 24, 16, 0.22),
        inset 0 0 0 1px rgba(255, 255, 255, 0.7);
      overflow: hidden;
    }

    .game-container::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.35), transparent 58%);
      opacity: 0.6;
      pointer-events: none;
    }

    .game-inner {
      position: relative;
      z-index: 1;
    }

    .control-panel {
      background: white;
      border: 3px solid rgba(107, 163, 212, 0.55);
      border-radius: 16px;
      padding: 16px 18px;
      box-shadow:
        0 14px 34px rgba(43, 24, 16, 0.22),
        inset 0 0 0 1px rgba(255, 255, 255, 0.75);
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 100%;
    }

    .control-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1rem;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      color: #2f4f6b;
    }

    .honey-drip {
      position: absolute;
      top: -1px;
      width: 14px;
      height: 28px;
      background: linear-gradient(180deg, var(--honey) 0%, var(--honey-dark) 100%);
      border-radius: 0 0 12px 12px;
      animation: drip 4s ease-in-out infinite;
      z-index: 1;
    }

    .honey-drip:nth-child(1) { left: 18%; animation-delay: 0s; }
    .honey-drip:nth-child(2) { left: 50%; animation-delay: 1.5s; }
    .honey-drip:nth-child(3) { left: 80%; animation-delay: 3s; }

    @keyframes drip {
      0%, 100% { height: 0; opacity: 0; }
      45% { height: 28px; opacity: 1; }
      55% { height: 26px; opacity: 1; }
    }

    #gameCanvas {
      display: block;
      width: 100%;
      max-width: 560px;
      height: 380px;
      margin: 0 auto;
      border: 2px solid var(--parchment-dark);
      border-radius: 10px;
      background: #87CEEB;
      transition: box-shadow 0.3s ease, transform 0.15s ease;
    }

    #gameCanvas:hover {
      box-shadow: 0 0 24px rgba(244, 169, 68, 0.55);
      transform: translateY(-1px);
    }

    .game-stats {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      margin: 14px 0 10px;
    }

    .stat {
      text-align: left;
      padding: 10px 12px;
      background: var(--parchment);
      border-radius: 10px;
      border: 1px solid var(--parchment-dark);
      display: flex;
      flex-direction: column;
      gap: 4px;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.3s ease, background 0.3s ease;
      min-width: 0;
    }

    .stat:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.16);
    }

    .stat-alert {
      border-color: #d32f2f;
      box-shadow: 0 8px 18px rgba(211, 47, 47, 0.25);
      animation: stat-shake 0.55s ease;
      background: linear-gradient(180deg, #fff8f7, #fde8e6);
    }

    .timer-warning {
      border-color: #b02525;
      background: linear-gradient(180deg, #fff3f0, #fde1dc);
      box-shadow: 0 10px 18px rgba(176, 37, 37, 0.2);
    }

    .timer-warning .stat-label-row,
    .timer-warning .stat-value {
      color: #8c1717;
    }

    @keyframes stat-shake {
      0% { transform: translateY(0); }
      20% { transform: translateY(-2px); }
      40% { transform: translateY(2px); }
      60% { transform: translateY(-2px); }
      80% { transform: translateY(2px); }
      100% { transform: translateY(0); }
    }

    .stat-label-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--honey-dark);
    }

    .stat-emoji {
      font-size: 1rem;
    }

    .stat-value {
      font-size: 1.4rem;
      font-weight: bold;
      color: var(--ink);
    }

    .control-actions,
    .game-controls {
      display: flex;
      gap: 8px;
      justify-content: flex-start;
      flex-wrap: wrap;
      margin-top: 4px;
    }

    .control-note {
      font-size: 0.92rem;
      color: #3c2a1a;
      line-height: 1.4;
    }

    .start-with-tip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      position: relative;
    }

    .inline-tip {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--parchment);
      border: 2px solid var(--honey-dark);
      color: var(--honey-dark);
      font-weight: bold;
      cursor: help;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .inline-tip:focus-visible {
      outline: 2px solid var(--honey);
      outline-offset: 3px;
    }

    .inline-tip .tooltip {
      visibility: hidden;
      opacity: 0;
      position: absolute;
      bottom: calc(100% + 10px);
      left: 50%;
      transform: translateX(-50%);
      background: var(--parchment);
      border: 1px solid var(--parchment-dark);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.18);
      border-radius: 10px;
      padding: 10px 12px;
      width: 240px;
      color: var(--ink);
      line-height: 1.4;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      z-index: 2;
      text-align: left;
    }

    .inline-tip .tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border-width: 8px;
      border-style: solid;
      border-color: var(--parchment) transparent transparent transparent;
    }

    .inline-tip:hover .tooltip,
    .inline-tip:focus .tooltip,
    .inline-tip:focus-within .tooltip {
      visibility: visible;
      opacity: 1;
    }

    .btn {
      padding: 11px 22px;
      border: 2px solid var(--ink);
      background: var(--honey);
      color: var(--ink);
      font-family: inherit;
      font-size: 0.98rem;
      cursor: pointer;
      border-radius: 999px;
      transition: all 0.25s;
      font-weight: bold;
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      min-height: 44px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn:hover::before {
      width: 260px;
      height: 260px;
    }

    .btn:hover {
      background: var(--honey-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 10px var(--shadow);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--parchment-dark);
    }

    .btn-secondary:hover {
      background: #d4c8ad;
    }

    .difficulty-selector {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: flex-start;
      margin: 6px 0 0px;
      width: 100%;
    }

    .difficulty-btn {
      padding: 7px 14px;
      border: 1px solid var(--ink);
      background: white;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.82rem;
      transition: all 0.2s;
      border-radius: 999px;
    }

    .difficulty-btn.active {
      background: var(--forest-green);
      color: white;
      border-color: var(--forest-green);
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(90, 124, 62, 0.35);
    }

    /* Mobile touch controls default hidden until small screens */
    .mobile-controls {
      display: none;
      justify-content: center;
      margin-top: 10px;
    }

    .mobile-thumbstick {
      display: inline-flex;
      align-items: stretch;
      gap: 8px;
      background: linear-gradient(180deg, rgba(107, 163, 212, 0.14), rgba(107, 163, 212, 0.24));
      border: 2px solid rgba(107, 163, 212, 0.55);
      border-radius: 18px;
      padding: 10px 12px;
      box-shadow: 0 8px 16px rgba(43, 24, 16, 0.14);
      width: 100%;
      max-width: 280px;
    }

    .thumb-pad {
      flex: 1;
      min-height: 52px;
      border: none;
      border-radius: 14px;
      background: var(--baby-blue);
      color: white;
      font-size: 1.25rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
      touch-action: manipulation;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    }

    .thumb-pad:active {
      background: #5a8ab8;
      transform: translateY(1px);
    }

    .thumb-divider {
      width: 2px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.75);
      margin: 4px 0;
    }

    /* Game Overlay
       ------------ */

    .game-overlay {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      right: 10px;
      bottom: 10px;
      background: linear-gradient(180deg, rgba(249, 244, 232, 0.97), rgba(232, 220, 197, 0.97));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px 22px 18px;
      text-align: center;
      border-radius: 14px;
      max-width: 520px;
      margin: 0 auto;
      box-shadow:
        0 18px 32px rgba(43, 24, 16, 0.28),
        inset 0 0 0 2px rgba(244, 169, 68, 0.3);
      border: 3px solid rgba(90, 124, 62, 0.18);
      overflow: hidden;
      gap: 10px;
      max-height: 82%;
    }

    .game-overlay-content {
      width: 100%;
      overflow-y: auto;
      padding-right: 4px;
    }

    /* If you wrap inner overlay HTML with an extra div.game-overlay-content,
       these scrolling rules will kick in. If not, the max-height still prevents
       the ‚Äúbookmark skyscraper‚Äù effect. */

    .game-overlay.hidden {
      display: none;
    }

    .overlay-title {
      font-size: 1.9rem;
      color: var(--pooh-red);
      margin-bottom: 6px;
    }

    .overlay-subtitle {
      font-size: 1.05rem;
      color: #5a3a1f;
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .overlay-text {
      font-size: 1rem;
      margin-bottom: 16px;
      max-width: 440px;
    }

    .overlay-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(107, 163, 212, 0.12);
      border: 1px solid rgba(107, 163, 212, 0.35);
      color: #2f4f6b;
      padding: 7px 13px;
      border-radius: 999px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 0.82rem;
    }

    .overlay-steps {
      list-style: none;
      padding: 0;
      margin: 4px 0 10px;
      width: 100%;
      text-align: left;
      display: grid;
      gap: 8px;
      font-size: 0.96rem;
    }

    .overlay-steps li {
      background: rgba(244, 169, 68, 0.12);
      border: 1px solid rgba(244, 169, 68, 0.35);
      padding: 10px 12px;
      border-radius: 10px;
      line-height: 1.5;
      box-shadow: 0 6px 12px rgba(43, 24, 16, 0.08);
    }

    .overlay-controls {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      width: 100%;
      text-align: left;
      margin-bottom: 6px;
      font-size: 0.95rem;
    }

    .overlay-controls .control-label {
      font-weight: bold;
      margin-bottom: 4px;
      color: #3c2a1a;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .overlay-controls p {
      margin: 0;
      line-height: 1.5;
    }

    .overlay-footer {
      color: #6b4b2b;
      font-size: 0.9rem;
      margin-top: 5px;
    }

    .overlay-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      width: 100%;
      margin: 6px 0 10px;
    }

    .metric-card {
      background: rgba(107, 163, 212, 0.1);
      border: 1px solid rgba(107, 163, 212, 0.35);
      border-radius: 10px;
      padding: 11px;
      text-align: center;
      box-shadow: 0 6px 12px rgba(43, 24, 16, 0.08);
    }

    .metric-label {
      color: #345;
      font-weight: bold;
      letter-spacing: 0.3px;
      display: block;
      margin-bottom: 4px;
    }

    .metric-value {
      font-size: 1.4rem;
      color: var(--pooh-red);
      font-weight: bold;
    }

    .canvas-hint {
      position: absolute;
      inset: 8px auto auto 10px;
      background: rgba(0, 0, 0, 0.48);
      color: white;
      padding: 8px 10px;
      border-radius: 12px;
      font-size: 0.85rem;
      line-height: 1.3;
      backdrop-filter: blur(4px);
      box-shadow: 0 8px 14px rgba(0,0,0,0.3);
      display: flex;
      gap: 8px;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .canvas-hint.visible {
      opacity: 1;
    }

    .hint-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 28px;
      height: 28px;
      background: rgba(244, 169, 68, 0.9);
      color: #3c1f0a;
      border-radius: 999px;
      font-weight: 800;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.5);
    }

    .hint-text {
      display: grid;
      gap: 2px;
      max-width: 220px;
    }

    .best-stat {
      background: rgba(106, 170, 90, 0.14);
      border: 1px dashed rgba(90, 124, 62, 0.6);
    }

    .sparkle {
      position: relative;
    }

    .sparkle::after {
      content: '‚ú®';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 1rem;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .sparkle:hover::after {
      opacity: 0.55;
      animation: twinkle 0.5s ease;
    }

    @keyframes twinkle {
      0%, 100% { transform: scale(0); }
      50% { transform: scale(1.2); }
    }

    /* RESPONSIVE TUNING
       ================= */

    @media (max-width: 900px) {
      body {
        align-items: flex-start;
        padding: 18px 14px;
      }

      .masthead-inner {
        flex-direction: column;
        align-items: flex-start;
      }

      .honeypot-badge {
        align-self: flex-end;
      }

      .book {
        padding: 24px;
      }

      .chapter-tracker {
        padding: 14px 14px 10px;
      }

      .tracker-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .chapter-pill-row {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .page {
        padding: 22px;
      }

      .chapter-title {
        font-size: 1.55rem;
      }

      .page-content {
        grid-template-columns: 1fr;
        gap: 18px;
      }

      .game-section {
        padding: 18px 16px 20px;
        border-radius: 16px;
      }

      .game-top {
        grid-template-columns: 1fr;
      }

      .game-container {
        padding: 14px 12px 14px;
      }

      .lore-content {
        grid-template-columns: 1fr;
      }

      #gameCanvas {
        height: 320px;
      }

      .game-stats {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 600px) {
      body {
        align-items: flex-start;
        padding: 14px 10px;
      }

      .book {
        padding: 18px 14px;
      }

      .chapter-tracker {
        padding: 12px;
      }

      .chapter-pill-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }

      .page {
        padding: 18px 14px;
      }

      .chapter-title {
        font-size: 1.45rem;
      }

      .story-text {
        font-size: 0.98rem;
        text-indent: 1.2em;
      }

      .game-section {
        padding: 14px 12px 16px;
        border-radius: 14px;
        margin-top: 12px;
      }

      .game-section-title span:last-child {
        font-size: 1.25rem;
      }

      .game-top {
        grid-template-columns: 1fr;
        row-gap: 14px;
      }

      .lore-content {
        grid-template-columns: 1fr;
      }

      .game-container {
        padding: 12px 10px 12px;
      }

      #gameCanvas {
        height: 260px;
      }

      .game-stats {
        grid-template-columns: 1fr;
        gap: 8px;
        margin-top: 10px;
      }

      .stat {
        padding: 8px 10px;
      }

      .stat-label-row {
        font-size: 0.74rem;
      }

      .stat-value {
        font-size: 1.2rem;
      }

      .game-controls {
        flex-direction: column;
        gap: 8px;
        margin-top: 8px;
      }

      .btn {
        width: 100%;
        padding: 10px 16px;
        font-size: 0.95rem;
      }

      .mobile-controls {
        display: flex;
        justify-content: center;
        margin-top: 8px;
      }

      .mobile-thumbstick {
        max-width: 240px;
        padding: 8px 10px;
        gap: 6px;
      }

      .thumb-pad {
        min-height: 48px;
        font-size: 1.1rem;
      }

      /* Overlay as compact bottom sheet on phones */
      .game-overlay {
        top: auto;
        bottom: 10px;
        left: 50%;
        right: auto;
        transform: translateX(-50%);
        width: calc(100% - 26px);
        max-width: 380px;
        padding: 12px 12px 10px;
        border-radius: 16px;
        max-height: 70%;
      }

      .overlay-title {
        font-size: 1.25rem;
        margin-bottom: 4px;
      }

      .overlay-subtitle {
        font-size: 0.9rem;
        margin-bottom: 6px;
      }

      .overlay-text {
        font-size: 0.9rem;
        margin-bottom: 10px;
      }

      .overlay-steps {
        font-size: 0.88rem;
        gap: 6px;
      }

      .overlay-steps li {
        padding: 7px 8px;
      }

      .overlay-controls {
        grid-template-columns: 1fr;
        gap: 6px;
        font-size: 0.88rem;
      }

      .overlay-metrics {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px;
      }

      .metric-card {
        padding: 8px;
      }

      .metric-value {
        font-size: 1.2rem;
      }

      .overlay-footer {
        font-size: 0.82rem;
      }

      .book-nav {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }

      .page-indicator {
        order: -1;
        font-size: 0.88rem;
      }
    }

    /* Navigation with page curl effect */
    .book-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid var(--honey);
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-btn {
      padding: 10px 20px;
      background: var(--pooh-red);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      white-space: nowrap;
    }

    .nav-btn::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 0;
      height: 0;
      border-style: solid;
      transition: all 0.3s;
    }

    .nav-btn.next:hover::after {
      width: 20px;
      height: 20px;
      border-width: 0 20px 20px 0;
      border-color: transparent rgba(255,255,255,0.3) transparent transparent;
    }

    .nav-btn:hover {
      background: #b02626;
      transform: scale(1.05);
    }

    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      transform: none;
    }

    .page-indicator {
      text-align: center;
      color: var(--honey-dark);
      font-size: 0.9rem;
      margin-top: 10px;
      animation: fadeIn 2s ease;
      flex: 1;
    }

    /* Registry Section */
    .registry-links {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .registry-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px 25px;
      background: white;
      border: 2px solid var(--baby-blue);
      border-radius: 8px;
      text-decoration: none;
      color: var(--ink);
      transition: all 0.3s;
      font-weight: bold;
    }

    .registry-link:hover {
      background: var(--baby-blue);
      color: white;
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 6px 20px var(--shadow);
    }

    /* Wishes Form */
    .wishes-form {
      background: white;
      padding: 25px;
      border-radius: 8px;
      margin: 20px 0;
      animation: fadeIn 2.2s ease;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: var(--honey-dark);
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--parchment-dark);
      border-radius: 6px;
      font-family: inherit;
      font-size: 1rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: 2px solid var(--honey);
      outline-offset: 2px;
      border-color: var(--honey);
      box-shadow: 0 0 10px rgba(244, 169, 68, 0.3);
    }

    .form-group textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form-feedback {
      margin-top: -6px;
      margin-bottom: 12px;
      font-weight: 600;
      color: var(--pooh-red);
      min-height: 20px;
    }

    .wishes-list {
      display: grid;
      gap: 14px;
    }

    .wish-card {
      background: linear-gradient(120deg, rgba(249, 244, 232, 0.95), rgba(232, 220, 197, 0.95));
      border-radius: 12px;
      padding: 14px 16px;
      border: 1px solid rgba(244, 169, 68, 0.35);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
      display: grid;
      gap: 6px;
    }

    .wish-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: var(--honey-dark);
    }

    .wish-time {
      font-size: 0.9rem;
      color: #4a3928;
      opacity: 0.8;
    }

    .wish-message {
      line-height: 1.6;
      font-style: italic;
    }

    .wish-empty {
      text-align: center;
      color: #5a3a1f;
      padding: 12px;
      border: 1px dashed rgba(90, 124, 62, 0.3);
      border-radius: 12px;
    }

    .divider {
      text-align: center;
      margin: 30px 0;
      color: var(--honey);
      font-size: 1.5rem;
      animation: fadeIn 2.5s ease;
    }

    /* Mobile Touch Controls */
    .mobile-controls {
      display: none;
      justify-content: center;
      margin-top: 10px;
    }

    .mobile-thumbstick {
      display: inline-flex;
      align-items: stretch;
      gap: 8px;
      background: linear-gradient(180deg, rgba(107, 163, 212, 0.14), rgba(107, 163, 212, 0.24));
      border: 2px solid rgba(107, 163, 212, 0.55);
      border-radius: 18px;
      padding: 10px 12px;
      box-shadow: 0 8px 16px rgba(43, 24, 16, 0.14);
      width: 100%;
      max-width: 280px;
    }

    .thumb-pad {
      flex: 1;
      min-height: 52px;
      border: none;
      border-radius: 14px;
      background: var(--baby-blue);
      color: white;
      font-size: 1.25rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
      touch-action: manipulation;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    }

    .thumb-pad:active {
      background: #5a8ab8;
      transform: translateY(1px);
    }

    .thumb-divider {
      width: 2px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.75);
      margin: 4px 0;
    }

    /* Game Overlay */
    .game-overlay {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      right: 10px;
      bottom: 10px;
      background: linear-gradient(180deg, rgba(249, 244, 232, 0.97), rgba(232, 220, 197, 0.97));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px 18px 18px;
      text-align: center;
      border-radius: 12px;
      animation: fadeIn 0.5s ease;
      max-width: 520px;
      margin: 0 auto;
      box-shadow:
        0 15px 30px rgba(43, 24, 16, 0.25),
        inset 0 0 0 2px rgba(244, 169, 68, 0.3);
      border: 3px solid rgba(90, 124, 62, 0.18);
      overflow: hidden;
      gap: 10px;
    }

    .game-overlay.hidden {
      display: none;
    }

    .overlay-title {
      font-size: 1.9rem;
      color: var(--pooh-red);
      margin-bottom: 6px;
    }

    .overlay-subtitle {
      font-size: 1.05rem;
      color: #5a3a1f;
      margin-bottom: 6px;
      line-height: 1.5;
    }

    .overlay-text {
      font-size: 1rem;
      margin-bottom: 18px;
      max-width: 440px;
    }

    .overlay-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(107, 163, 212, 0.12);
      border: 1px solid rgba(107, 163, 212, 0.35);
      color: #2f4f6b;
      padding: 7px 13px;
      border-radius: 999px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 0.82rem;
    }

    .overlay-steps {
      list-style: none;
      padding: 0;
      margin: 4px 0 10px;
      width: 100%;
      text-align: left;
      display: grid;
      gap: 8px;
      font-size: 0.96rem;
    }

    .overlay-steps li {
      background: rgba(244, 169, 68, 0.12);
      border: 1px solid rgba(244, 169, 68, 0.35);
      padding: 10px 12px;
      border-radius: 10px;
      line-height: 1.5;
      box-shadow: 0 6px 12px rgba(43, 24, 16, 0.08);
    }

    .overlay-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      width: 100%;
      text-align: left;
      margin-bottom: 4px;
      font-size: 0.95rem;
    }

    .overlay-controls .control-label {
      font-weight: bold;
      margin-bottom: 4px;
      color: #3c2a1a;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .overlay-controls p {
      margin: 0;
      line-height: 1.5;
    }

    .overlay-footer {
      color: #6b4b2b;
      font-size: 0.9rem;
      margin-top: 3px;
    }

    .overlay-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      width: 100%;
      margin-top: 4px;
    }

    .overlay-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      width: 100%;
      margin: 6px 0 10px;
    }

    .metric-card {
      background: rgba(107, 163, 212, 0.1);
      border: 1px solid rgba(107, 163, 212, 0.35);
      border-radius: 10px;
      padding: 11px;
      text-align: center;
      box-shadow: 0 6px 12px rgba(43, 24, 16, 0.08);
    }

    .metric-label {
      color: #345;
      font-weight: bold;
      letter-spacing: 0.3px;
      display: block;
      margin-bottom: 4px;
    }

    .metric-value {
      font-size: 1.4rem;
      color: var(--pooh-red);
      font-weight: bold;
    }

    /* Sparkle effect on hover */
    .sparkle {
      position: relative;
    }

    .sparkle::after {
      content: '‚ú®';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 1rem;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .sparkle:hover::after {
      opacity: 0.55;
      animation: twinkle 0.5s ease;
    }

    @keyframes twinkle {
      0%, 100% { transform: scale(0); }
      50% { transform: scale(1.2); }
    }

    /* Responsive tweaks */
    @media (max-width: 900px) {
      body {
        align-items: flex-start;
        cursor: auto;
      }

      .chapter-tracker {
        padding: 14px 14px 10px;
      }

      .tracker-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .chapter-pill-row {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .book {
        padding: 24px;
      }

      .page {
        padding: 24px;
      }

      .chapter-title {
        font-size: 1.6rem;
      }

      .story-text {
        font-size: 1rem;
        text-indent: 1.5em;
      }

      .page-content {
        grid-template-columns: 1fr;
      }

      .game-layout {
        grid-template-columns: 1fr;
      }

      #gameCanvas {
        height: 320px;
      }

      .game-controls {
        flex-direction: column;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }

      .mobile-controls {
        display: flex;
      }

      .book-nav {
        flex-direction: column;
        align-items: stretch;
      }

      .page-indicator {
        order: -1;
      }
    }

@media (max-width: 600px) {
  body {
    align-items: flex-start;
    padding: 14px;
  }

  .ambient-scene,
  .cloud-layer {
    display: none;
  }

  .chapter-tracker {
    padding: 12px;
  }

  .chapter-pill-row {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .masthead-inner {
    padding: 16px 18px 12px;
  }

  .masthead-title {
    font-size: 1.6rem;
  }

  .honeypot-badge {
    align-self: flex-start;
  }

  .book {
    padding: 18px;
  }

  .page {
    padding: 18px;
  }

  .chapter-title {
    font-size: 1.45rem;
  }

  .story-text {
    font-size: 0.98rem;
    text-indent: 1.3em;
  }

  .page-content {
    grid-template-columns: 1fr;
    gap: 18px;
  }

  /* GAME SECTION ‚Äì phone layout */
  .game-section {
    padding: 14px 12px 16px;
    border-radius: 12px;
    margin-top: 12px;
  }

  .game-section-header {
    align-items: flex-start;
  }

  .game-section-title span:last-child {
    font-size: 1.2rem;
  }

  .game-layout {
    grid-template-columns: 1fr;
    gap: 14px;
  }

  .game-container {
    padding: 12px 10px 12px;
    border-radius: 12px;
  }

  #gameCanvas {
    height: 260px;          /* shorter on phones */
    max-width: 100%;
  }

  .game-stats {
    flex-direction: column;
    gap: 8px;
    margin: 10px 0 6px;
  }

  .stat {
    min-width: 100%;
    padding: 8px 10px;
  }

  .stat-label-row {
    font-size: 0.74rem;
  }

  .stat-value {
    font-size: 1.2rem;
  }

  .game-controls {
    flex-direction: column;
    gap: 8px;
    margin-top: 8px;
  }

  .btn {
    width: 100%;
    justify-content: center;
    padding: 10px 16px;
    font-size: 0.95rem;
  }

  .mobile-controls {
    display: flex;
    justify-content: center;
    margin-top: 8px;
  }

  .mobile-thumbstick {
    max-width: 240px;
    padding: 8px 10px;
    gap: 6px;
  }

  .thumb-pad {
    min-height: 48px;
    font-size: 1.1rem;
  }

  /* OVERLAY tuned for small screens */
  .game-overlay {
    top: auto;
    bottom: 10px;
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    width: calc(100% - 28px);
    max-width: 380px;
    padding: 12px 12px 10px;
    border-radius: 14px;
    box-shadow:
      0 10px 24px rgba(0, 0, 0, 0.25),
      inset 0 0 0 1px rgba(255, 255, 255, 0.5);
  }

  .overlay-title {
    font-size: 1.25rem;
    margin-bottom: 4px;
  }

  .overlay-subtitle {
    font-size: 0.9rem;
    margin-bottom: 6px;
  }

  .overlay-text {
    font-size: 0.9rem;
    margin-bottom: 10px;
  }

  .overlay-steps {
    font-size: 0.88rem;
    gap: 6px;
    margin-bottom: 8px;
  }

  .overlay-steps li {
    padding: 7px 8px;
  }

  .overlay-controls {
    grid-template-columns: 1fr;
    gap: 6px;
    font-size: 0.88rem;
    margin-bottom: 6px;
  }

  .overlay-metrics {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
    margin: 6px 0 8px;
  }

  .metric-card {
    padding: 8px;
  }

  .metric-value {
    font-size: 1.2rem;
  }

  .overlay-footer {
    font-size: 0.82rem;
  }

  /* Book nav on phone */
  .book-nav {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }

  .page-indicator {
    order: -1;
    font-size: 0.88rem;
  }
}

@media (max-width: 600px) and (max-height: 480px) {
  body {
    padding: 10px 10px 8px;
  }

  .pooh-masthead {
    margin-bottom: 10px;
  }

  .masthead-inner {
    padding: 12px 14px 10px;
  }

  .book {
    padding: 14px;
  }

  .page {
    padding: 14px;
  }

  .game-section {
    padding: 12px 10px 12px;
    margin-top: 8px;
  }

  .game-container {
    padding: 10px 8px 10px;
  }

  #gameCanvas {
    height: 230px;
  }

  .game-stats {
    margin-top: 6px;
  }

  .difficulty-selector {
    margin: 10px 0 4px;
  }

  .game-controls {
    gap: 6px;
    margin-top: 6px;
  }

  .mobile-thumbstick {
    max-width: 220px;
    padding: 8px;
  }
}

@media (max-width: 480px) {
  .game-container {
    overflow: visible;
  }

  .game-controls {
    position: sticky;
    bottom: 8px;
    background: linear-gradient(180deg, rgba(249, 244, 232, 0.95), rgba(232, 220, 197, 0.95));
    padding: 8px 10px;
    border-radius: 14px;
    box-shadow: 0 8px 18px rgba(43, 24, 16, 0.18);
    z-index: 2;
  }

  .game-controls .btn,
  .game-controls .start-with-tip {
    width: 100%;
  }

  .start-with-tip {
    justify-content: center;
  }

  .mobile-controls {
    margin-top: 6px;
  }

  .mobile-thumbstick {
    width: auto;
    max-width: none;
    gap: 4px;
    padding: 8px 9px;
    align-items: center;
    justify-content: center;
    border-radius: 16px;
  }

  .thumb-pad {
    flex: 0 0 64px;
    min-height: 46px;
    font-size: 1.05rem;
  }

  .thumb-divider {
    width: 1px;
    margin: 0 2px;
    height: 80%;
    background: rgba(255, 255, 255, 0.78);
  }
}
      
  </style>
</head>
<body>
  <!-- Ambient scene background -->
  <div class="ambient-scene">
    <div class="butterfly">ü¶ã</div>
    <div class="butterfly">ü¶ã</div>
    <div class="butterfly">ü¶ã</div>
    <div class="floating-leaf">üçÇ</div>
    <div class="floating-leaf">üçÇ</div>
    <div class="floating-leaf">üçÇ</div>
    <div class="bee-ambient">üêù</div>
    <div class="bee-ambient">üêù</div>
  </div>

  <!-- Parallax clouds -->
  <div class="cloud-layer">
    <div class="cloud">‚òÅÔ∏è</div>
    <div class="cloud">‚òÅÔ∏è</div>
    <div class="cloud">‚òÅÔ∏è</div>
  </div>

  <div class="pooh-masthead">
    <div class="masthead-inner">
      <div>
        <div class="honey-drip"></div>
        <div class="masthead-title">Winnie the Pooh & Friends</div>
        <div class="masthead-tagline">A honey-warmed welcome from the Hundred Acre Wood as we celebrate Baby Gunner's arrival.</div>
        <div class="forest-garland" aria-hidden="true">
          <span>üçØ</span><span>üêù</span><span>üå≥</span><span>üêæ</span><span>üåø</span>
        </div>
      </div>
      <div class="honeypot-badge">üçØ Honey Day</div>
    </div>

    <div class="character-banner" aria-label="Pooh and friends">
      <div class="character-card">
        <img src="Images/Characters/honey-bear.png" alt="Winnie the Pooh illustration">
        <div class="character-name">Winnie the Pooh</div>
        <div class="character-trait">Keeper of honey pots and cozy hugs</div>
      </div>
      <div class="character-card">
        <img src="Images/Characters/piglet.png" alt="Piglet illustration">
        <div class="character-name">Piglet</div>
        <div class="character-trait">Tiny hero with the biggest heart</div>
      </div>
      <div class="character-card">
        <img src="Images/Characters/tigger.png" alt="Tigger illustration">
        <div class="character-name">Tigger</div>
        <div class="character-trait">Bounce-bringing party starter</div>
      </div>
      <div class="character-card">
        <img src="Images/Characters/eeyore.png" alt="Eeyore illustration">
        <div class="character-name">Eeyore</div>
        <div class="character-trait">Soft-spoken friend who brings the cuddly calm</div>
      </div>
      <div class="character-card">
        <img src="Images/Characters/roo.png" alt="Roo illustration">
        <div class="character-name">Roo</div>
        <div class="character-trait">Little explorer ready to meet Baby Gunner</div>
      </div>
      <div class="character-card">
        <img src="Images/Characters/owl.png" alt="Owl illustration">
        <div class="character-name">Owl</div>
        <div class="character-trait">Storyteller guiding guests through the pages</div>
      </div>
    </div>
  </div>

  <div class="book-container">
    <div class="chapter-tracker" aria-label="Chapter navigation">
      <div class="tracker-row">
        <div class="tracker-label">Story path</div>
        <div class="book-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
      <div class="chapter-pill-row">
        <button class="chapter-pill sparkle active" data-chapter-target="1" aria-current="page" type="button">
          <div class="pill-number">1</div>
          <div class="pill-text">
            <div class="pill-title">Welcome</div>
            <div class="pill-detail">Invitation arrives</div>
          </div>
        </button>
        <button class="chapter-pill sparkle" data-chapter-target="2" type="button">
          <div class="pill-number">2</div>
          <div class="pill-text">
            <div class="pill-title">Honey Hunt</div>
            <div class="pill-detail">Play the honey game</div>
          </div>
        </button>
        <button class="chapter-pill sparkle" data-chapter-target="3" type="button">
          <div class="pill-number">3</div>
          <div class="pill-text">
            <div class="pill-title">Gifts</div>
            <div class="pill-detail">Pick thoughtful presents</div>
          </div>
        </button>
        <button class="chapter-pill sparkle" data-chapter-target="4" type="button">
          <div class="pill-number">4</div>
          <div class="pill-text">
            <div class="pill-title">Wishes</div>
            <div class="pill-detail">Share love for Gunner</div>
          </div>
        </button>
      </div>
    </div>

    <div class="book">
      <div class="pages-wrapper">
        <!-- Chapter 1: Welcome -->
        <div class="page active" data-chapter="1">
          <div class="chapter-header">
            <div class="chapter-number">Chapter One</div>
            <h1 class="chapter-title">A Special Day in the Hundred Acre Wood</h1>
            <div class="chapter-subtitle">An Invitation to Celebrate</div>
          </div>

          <div class="page-content">
            <div class="page-column">
              <p class="story-text">
                One fine spring day, in a corner of the Hundred Acre Wood where the sun shines warmly through the trees and the flowers bloom in cheerful colors, something wonderful was happening. All the forest friends were gathering, for there was to be a celebration unlike any other.
              </p>

              <p class="story-text">
                "What sort of celebration?" you might ask. Well, it was the very best sort‚Äîthe kind that welcomes a new little friend to the world. A baby boy named Gunner James was soon to arrive, and everyone in the Hundred Acre Wood wanted to share in the joy.
              </p>

              <div class="illustration-box sparkle">
                <div class="bear-illustration">üß∏üçØ</div>
                <p style="font-style: italic; color: var(--honey-dark);">
                  "A baby!" said Pooh. "How perfectly wonderful. We shall need honey for such an occasion."
                </p>
              </div>
            </div>

            <div class="page-column">
              <div class="party-details">
                <h3>You're Invited to Baby Gunner's Baby Shower! üéâ</h3>
                <div class="detail-item">
                  <div class="detail-icon">üë∂</div>
                  <div>
                    <strong>Celebrating:</strong> Gunner James<br>
                    <em style="color: var(--baby-blue);">It's a boy!</em>
                  </div>
                </div>
                <div class="detail-item">
                  <div class="detail-icon">üìÖ</div>
                  <div><strong>When:</strong> Saturday, June 15, 2024</div>
                </div>
                <div class="detail-item">
                  <div class="detail-icon">üïê</div>
                  <div><strong>Time:</strong> 2:00 PM - 4:00 PM</div>
                </div>
                <div class="detail-item">
                  <div class="detail-icon">üìç</div>
                  <div><strong>Where:</strong> 123 Honey Tree Lane</div>
                </div>
              </div>

              <div class="info-card sparkle">
                <h4>Make yourself cozy</h4>
                <p class="story-text" style="margin: 0; text-indent: 0; line-height: 1.6;">
                  Find a comfy spot under the trees, sip something warm, and enjoy the stories sprinkled throughout the pages as you explore the adventure.
                </p>
              </div>
            </div>
          </div>

          <p class="story-text">
            Winnie the Pooh, being a Bear of Very Little Brain but a Very Big Heart, knew that the most important thing for any celebration was honey. And not just a little honey, but lots and lots of it. After all, welcoming Baby Gunner was a Very Important Matter.
          </p>

          <p class="story-text">
            "But first," thought Pooh, looking up at his honey pots on the high shelf, "we'll need to gather more honey. Won't you help?"
          </p>

          <div class="divider">üå≥ ‚úø üêù ‚úø üå≥</div>
        </div>

        <!-- Chapter 2: The Game -->
        <div class="page" data-chapter="2">
          <div class="chapter-header">
            <div class="chapter-number">Chapter Two</div>
            <h1 class="chapter-title">Pooh's Honey Gathering Adventure</h1>
            <div class="chapter-subtitle">A Game of Skill and Sweetness</div>
          </div>

          <section class="game-section sparkle">
            <div class="game-section-header">
            <div class="game-section-title">
              <span>Mini game</span>
              <span>Pooh‚Äôs Honey Run</span>
            </div>
            <div class="game-tag">
              <span>üçØ</span> <span>Catch &amp; Dodge</span>
            </div>
          </div>

          <div class="game-layout">
            <div class="game-top">
              <div class="game-container">
                <!-- honey drips at the top of the frame -->
                <div class="honey-drip"></div>
                <div class="honey-drip"></div>
                <div class="honey-drip"></div>

                <div class="game-inner">
                  <div style="position: relative;">
                    <canvas id="gameCanvas"></canvas>
                    <div class="canvas-hint" id="canvasHint" aria-live="polite">
                      <div class="hint-badge">‚Üî</div>
                      <div class="hint-text">
                        <strong>Move Pooh</strong>
                        <span>Arrow keys / A-D or swipe &amp; drag the honey pot.</span>
                      </div>
                    </div>
                    <div class="game-overlay" id="gameOverlay">
                      <div class="overlay-pill">Storybook briefing</div>
                      <div class="overlay-title">üçØ Quick How-To</div>
                      <div class="overlay-subtitle">Catch honey, dodge bees, fill the barrel before time blinks away.</div>
                      <ul class="overlay-steps">
                        <li>‚≠ê Catch drops to score and fill the barrel. Bees cost a heart.</li>
                        <li>‚è±Ô∏è 60 second rounds; tutorial is 35 seconds with calmer drops.</li>
                        <li>üå≥ Pick a drizzle strength below. Harder = faster drops &amp; bees.</li>
                      </ul>
                      <div class="overlay-controls">
                        <div>
                          <div class="control-label">üñ•Ô∏è Desktop</div>
                          <p>Press ‚Üê ‚Üí or A / D to roll Pooh. Quick taps dodge bees best.</p>
                        </div>
                        <div>
                          <div class="control-label">üì± Mobile</div>
                          <p>Swipe or drag the honey pot. On-screen arrows also work for taps.</p>
                        </div>
                      </div>
                      <div class="overlay-actions">
                        <button class="btn sparkle" onclick="startGame('quick')">‚ö° Quick Start (Tutorial)</button>
                        <button class="btn btn-secondary" onclick="startGame()">‚ñ∂ Full Run</button>
                      </div>
                      <p class="overlay-footer">Tip: Start with the tutorial, then jump into a faster drizzle.</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="control-panel sparkle">
                <div class="control-title">üçØ Ready, Set, Honey Run</div>

                <div class="game-stats">
                  <div class="stat" id="scoreStat">
                    <div class="stat-label-row">
                      <span>Score</span>
                      <span class="stat-emoji">‚≠ê</span>
                    </div>
                    <div class="stat-value" id="score">0</div>
                  </div>
                  <div class="stat best-stat" id="bestStat" aria-live="polite">
                    <div class="stat-label-row">
                      <span>Best Score</span>
                      <span class="stat-emoji">üèÜ</span>
                    </div>
                    <div class="stat-value" id="bestScore">0</div>
                  </div>
                  <div class="stat" id="honeyStat">
                    <div class="stat-label-row">
                      <span>Honey</span>
                      <span class="stat-emoji">üçØ</span>
                    </div>
                    <div class="stat-value" id="honeyCount">0</div>
                  </div>
                  <div class="stat" id="livesStat">
                    <div class="stat-label-row">
                      <span>Lives</span>
                      <span class="stat-emoji">‚ù§Ô∏è</span>
                    </div>
                    <div class="stat-value" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
                  </div>
                  <div class="stat" id="timerStat">
                    <div class="stat-label-row">
                      <span>Time</span>
                      <span class="stat-emoji">‚è±Ô∏è</span>
                    </div>
                    <div class="stat-value" id="timer">60</div>
                  </div>
                </div>

                <div class="control-actions">
                  <div class="start-with-tip">
                    <button class="btn sparkle" id="startBtn" onclick="startGame()">‚ñ∂ Start</button>
                    <div class="inline-tip" tabindex="0" aria-label="How to play: tap Start, catch honey, dodge bees, and fill the barrel before time runs out.">
                      ?
                      <div class="tooltip" role="tooltip">
                        Tap Start to drop into the clearing. Catch honey üß∫, dodge bees üêù, and fill the barrel before the timer blinks away. Arrow keys or A/D move Pooh; on mobile, use the gold arrows.
                      </div>
                    </div>
                  </div>
                  <button class="btn btn-secondary" id="pauseBtn" onclick="pauseGame()" disabled>‚è∏ Pause</button>
                  <button class="btn btn-secondary" onclick="resetGame()">üîÑ Reset</button>
                </div>

                <div class="difficulty-selector">
                  <button class="difficulty-btn" id="tutorialBtn" onclick="setDifficulty('tutorial', this)">Tutorial Lap</button>
                  <button class="difficulty-btn active" onclick="setDifficulty('easy', this)">Gentle Drizzle</button>
                  <button class="difficulty-btn" onclick="setDifficulty('normal', this)">Honey Shower</button>
                  <button class="difficulty-btn" onclick="setDifficulty('hard', this)">Bee Storm</button>
                </div>

                <p class="control-note">Start, pause, and tweak difficulty from one place so you can get back to dodging bees faster. Your best score is saved between visits.</p>
              </div>
            </div>

            <div class="mobile-controls" aria-label="Touch controls">
              <div class="mobile-thumbstick" role="group" aria-label="Thumbstick">
                <button class="thumb-pad" id="leftBtn" aria-label="Move left">‚¨ÖÔ∏è</button>
                <div class="thumb-divider" aria-hidden="true"></div>
                <button class="thumb-pad" id="rightBtn" aria-label="Move right">‚û°Ô∏è</button>
              </div>
            </div>

            <details class="lore-panel sparkle">
              <summary>Story, lore, and quick tips</summary>
              <div class="lore-content">
                <div class="lore-stories">
                  <p class="story-text">
                    Pooh stood beneath the tall honey tree, his favorite barrel in his arms. Above him, golden drops of honey began to fall, glistening in the sunlight like liquid sunshine. But there was a problem‚Äîthe bees were buzzing about too!
                  </p>

                  <p class="story-text">
                    "Oh bother," said Pooh. "I must catch the honey but avoid the bees. This requires concentration. And perhaps some help from a friend like you."
                  </p>

                  <p class="story-text" style="text-indent: 0; text-align: center; font-style: italic; margin-top: 8px;">
                    "That was splendid!" said Pooh when the barrel was full. "Now we have plenty of honey for Baby Gunner's celebration!"
                  </p>
                </div>

                <div class="info-card sparkle">
                  <h4>Quick game tips</h4>
                  <ul style="margin-left: 16px; line-height: 1.6;">
                    <li>Pick a difficulty that matches your mood, then press <strong>Start</strong>.</li>
                    <li>Short taps on mobile buttons give gentle nudges; hold them to glide faster.</li>
                    <li>Watch the timer and keep an eye on your hearts‚Äîthree stings ends the round.</li>
                  </ul>
                  <p style="margin: 0; line-height: 1.6;">Fill the honey pot and return with a sweet score to share with the rest of the party.</p>
                </div>
              </div>
            </details>
          </div>
        </section>
      </div>

      <!-- Chapter 3: Registry & Details -->
        <div class="page" data-chapter="3">
          <div class="chapter-header">
            <div class="chapter-number">Chapter Three</div>
            <h1 class="chapter-title">Gifts from the Heart</h1>
            <div class="chapter-subtitle">Preparing for Baby Gunner</div>
          </div>

          <p class="story-text">
            With the honey safely gathered, Pooh and his friends began to think about what else a baby bear‚Äîor rather, a baby boy‚Äîmight need. Piglet suggested soft blankets. Eeyore thought practical things might be useful. Tigger bounced excitedly about toys.
          </p>

          <p class="story-text">
            "The most important thing," said Pooh wisely, "is that Baby Gunner knows he is loved. But if you'd like to bring a gift, his parents have made a list of things that might be helpful."
          </p>

          <div class="illustration-box sparkle">
            <div style="font-size: 3rem; margin: 20px 0;">üéÅ</div>
            <h3 style="color: var(--baby-blue); margin-bottom: 15px;">Baby Gunner's Registry</h3>
            <p style="margin-bottom: 20px;">Your presence is the greatest present, but if you'd like to help welcome our little one:</p>

            <div class="registry-links">
              <a href="https://www.target.com/gift-registry/" target="_blank" class="registry-link sparkle">
                <span style="font-size: 1.5rem;">üéØ</span>
                <span>Target Registry</span>
              </a>
              <a href="https://www.amazon.com/baby-reg/" target="_blank" class="registry-link sparkle">
                <span style="font-size: 1.5rem;">üì¶</span>
                <span>Amazon Registry</span>
              </a>
            </div>
          </div>

          <div class="party-details">
            <h3>Nursery Theme & Details üß∏</h3>
            <div class="detail-item">
              <div class="detail-icon">üé®</div>
              <div><strong>Theme:</strong> Hundred Acre Wood / Woodland Bears</div>
            </div>
            <div class="detail-item">
              <div class="detail-icon">üíô</div>
              <div><strong>Nursery Colors:</strong> Adventure Blue, Honey Gold, Forest Green</div>
            </div>
            <div class="detail-item">
              <div class="detail-icon">üß∏</div>
              <div><strong>First Toy:</strong> Classic Winnie the Pooh Bear</div>
            </div>
            <div class="detail-item">
              <div class="detail-icon">üìö</div>
              <div><strong>Favorite Book:</strong> "The House at Pooh Corner"</div>
            </div>
          </div>

          <p class="story-text">
            And so the preparations continued, with each friend contributing something special to welcome the newest member of their woodland family.
          </p>

          <div class="divider">üå≥ ‚úø üêù ‚úø üå≥</div>
        </div>

        <!-- Chapter 4: Wishes -->
        <div class="page" data-chapter="4">
          <div class="chapter-header">
            <div class="chapter-number">Chapter Four</div>
            <h1 class="chapter-title">Wishes for Baby Gunner</h1>
            <div class="chapter-subtitle">Words of Love and Wisdom</div>
          </div>

          <p class="story-text">
            As the sun began to set over the Hundred Acre Wood, casting long golden shadows through the trees, Pooh and his friends gathered to share their wishes for Baby Gunner. Each friend had something special to say.
          </p>

          <div class="illustration-box sparkle">
            <p style="font-style: italic; line-height: 1.8; text-align: left;">
              <strong>Pooh said:</strong> "May you always have honey when you need it, and friends when you want them."
              <br><br>
              <strong>Piglet squeaked:</strong> "May you be brave, even when you feel small."
              <br><br>
              <strong>Eeyore added:</strong> "May you find sunshine, even on cloudy days."
              <br><br>
              <strong>Tigger bounced:</strong> "May you have the most wonderful things happen to you, and the most wonderful adventures!"
            </p>
          </div>

          <p class="story-text">
            Now it's your turn! Leave your wishes, advice, or memories for Baby Gunner and his family.
          </p>

          <div class="wishes-form sparkle">
            <h3 style="text-align: center; color: var(--honey-dark); margin-bottom: 20px;">
              Share Your Wishes <span style="animation: bounce 2s ease-in-out infinite; display: inline-block;">üçØ</span>
            </h3>
            <form id="wishesForm">
              <div class="form-group">
                <label for="guestName">Your Name:</label>
                <input type="text" id="guestName" placeholder="Enter your name" required>
              </div>
              <div class="form-group">
                <label for="wishMessage">Your Wish or Advice for Baby Gunner:</label>
                <textarea id="wishMessage" placeholder="Share your wisdom, hopes, or a favorite memory..." required></textarea>
              </div>
              <div class="form-feedback" id="wishFeedback" role="status" aria-live="polite"></div>
              <button type="submit" class="btn sparkle" style="width: 100%;">üìù Add to Guestbook</button>
            </form>
          </div>

          <div id="wishesDisplay" class="wishes-list" style="margin-top: 30px;">
            <!-- Wishes appear here -->
          </div>

          <p class="story-text" style="text-align: center; font-style: italic; margin-top: 40px;">
            And so, with honey gathered, gifts prepared, and wishes shared, everyone in the Hundred Acre Wood looked forward to the day they would meet Baby Gunner. For as Pooh always said, "How lucky I am to have something that makes saying goodbye so hard." But in this case, they were all ready to say hello.
          </p>

          <div style="text-align: center; margin-top: 30px; padding: 20px; background: white; border-radius: 8px; animation: fadeIn 3s ease;">
            <div style="font-size: 3rem; margin-bottom: 10px; animation: pulse 2s ease-in-out infinite;">üíô</div>
            <div style="font-size: 1.3rem; color: var(--pooh-red); font-weight: bold;">
              Welcome to the world, Baby Gunner!
            </div>
            <div style="margin-top: 10px; font-style: italic;">
              With love from all your family and friends
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <div class="book-nav">
        <button class="nav-btn prev sparkle" id="prevBtn" onclick="previousPage()">
          ‚Üê Previous Chapter
        </button>
        <div class="page-indicator" id="pageIndicator">Chapter 1 of 4</div>
        <button class="nav-btn next sparkle" id="nextBtn" onclick="nextPage()">
          Next Chapter ‚Üí
        </button>
      </div>
    </div>
  </div>

  <script>
    // ===== STORYBOOK NAVIGATION =====
    let currentChapter = 1;
    const totalChapters = 4;
    const pageIndicator = document.getElementById('pageIndicator');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const progressFill = document.getElementById('progressFill');
    const chapterPills = Array.from(document.querySelectorAll('.chapter-pill'));

    function showChapter(ch) {
      const currentPage = document.querySelector('[data-chapter="' + currentChapter + '"]');
      const nextPageEl = document.querySelector('[data-chapter="' + ch + '"]');
      if (!nextPageEl || currentChapter === ch) return;

      currentPage.classList.add('exiting');
      setTimeout(() => {
        currentPage.classList.remove('active', 'exiting');
        nextPageEl.classList.add('active');
        currentChapter = ch;
        updateNavigation();
      }, 600);
    }

    function nextPage() {
      if (currentChapter < totalChapters) {
        showChapter(currentChapter + 1);
      }
    }

    function previousPage() {
      if (currentChapter > 1) {
        showChapter(currentChapter - 1);
      }
    }

    function updateNavigation() {
      if (prevBtn && nextBtn) {
        prevBtn.disabled = currentChapter === 1;
        nextBtn.disabled = currentChapter === totalChapters;
      }

      if (pageIndicator) {
        const completed = Math.max(0, currentChapter - 1);
        pageIndicator.textContent = `Chapter ${currentChapter} of ${totalChapters} ‚Äî ${completed} completed`;
      }

      const progress = totalChapters > 1
        ? ((currentChapter - 1) / (totalChapters - 1)) * 100
        : 100;
      if (progressFill) {
        progressFill.style.width = progress + '%';
        progressFill.setAttribute('aria-valuenow', progress.toFixed(0));
      }

      chapterPills.forEach((pill) => {
        const target = Number(pill.dataset.chapterTarget);
        const isActive = target === currentChapter;
        pill.classList.toggle('active', isActive);
        pill.classList.toggle('visited', target < currentChapter);
        pill.setAttribute('aria-current', isActive ? 'page' : 'false');
      });
    }

    chapterPills.forEach((pill) => {
      pill.addEventListener('click', () => {
        const targetChapter = Number(pill.dataset.chapterTarget);
        showChapter(targetChapter);
      });
    });

    // ===== GAME LOGIC =====
    let canvas, ctx;
    let gameState = 'idle';
    let score = 0;
    let honeyCollected = 0;
    let bestScore = 0;
    let bestHoney = 0;
    let lives = 3;
    let timeLeft = 60;
    let difficulty = 'easy';
    let gameInterval, timerInterval;
    let hitFlash = 0;
    let hintTimeout;
    const isTouchDevice = 'ontouchstart' in window;

    let player = { x: 0, y: 0, width: 60, height: 90, speed: isTouchDevice ? 6 : 5 };
    let drops = [];
    let bees = [];
    let sparkles = [];

    const livesStat = document.getElementById('livesStat');
    const timerStat = document.getElementById('timerStat');

    const difficulties = {
      tutorial: { dropSpeed: 1.6, beeSpeed: 1.1, dropFreq: 1800, beeFreq: 3200 },
      easy:   { dropSpeed: 2, beeSpeed: 1.5, dropFreq: 1500, beeFreq: 3000 },
      normal: { dropSpeed: 3, beeSpeed: 2.4, dropFreq: 1000, beeFreq: 2000 },
      hard:   { dropSpeed: 4, beeSpeed: 3.3, dropFreq: 700,  beeFreq: 1200 }
    };

    let keys = { left: false, right: false };

    function initGame() {
      canvas = document.getElementById('gameCanvas');
      if (!canvas) return;
      ctx = canvas.getContext('2d');

      const sizeCanvas = () => {
        const container = canvas.parentElement;
        const maxWidth = Math.min(520, container.offsetWidth - 28);
        canvas.width = Math.max(220, maxWidth);
        canvas.height = Math.max(240, Math.min(420, Math.round(canvas.width * (window.innerWidth < 640 ? 0.75 : 0.85))));
      };

      sizeCanvas();

      player.x = canvas.width / 2 - player.width / 2;
      player.y = canvas.height - player.height - 18;

      document.addEventListener('keydown', handleKeyDown);
      document.addEventListener('keyup', handleKeyUp);

      let isDragging = false;

      canvas.addEventListener('touchstart', (e) => {
        isDragging = true;
        handleTouch(e);
      }, { passive: false });

      canvas.addEventListener('touchmove', (e) => {
        if (isDragging) handleTouch(e);
      }, { passive: false });

      canvas.addEventListener('touchend', () => { isDragging = false; });

      canvas.addEventListener('mousedown', () => { isDragging = true; });
      canvas.addEventListener('mousemove', (e) => {
        if (isDragging && gameState === 'playing') {
          const rect = canvas.getBoundingClientRect();
          player.x = e.clientX - rect.left - player.width / 2;
          player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
        }
      });
      canvas.addEventListener('mouseup', () => { isDragging = false; });
      canvas.addEventListener('mouseleave', () => { isDragging = false; });

      const leftBtn = document.getElementById('leftBtn');
      const rightBtn = document.getElementById('rightBtn');

      leftBtn.addEventListener('touchstart', () => { keys.left = true; }, { passive: true });
      leftBtn.addEventListener('touchend', () => { keys.left = false; }, { passive: true });

      rightBtn.addEventListener('touchstart', () => { keys.right = true; }, { passive: true });
      rightBtn.addEventListener('touchend', () => { keys.right = false; }, { passive: true });

      drawGame();

      window.addEventListener('resize', () => {
        const oldWidth = canvas.width;
        sizeCanvas();
        player.x = (player.x / oldWidth) * canvas.width;
        drawGame();
      });
    }

    function handleTouch(e) {
      if (gameState !== 'playing') return;
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches[0];
      player.x = touch.clientX - rect.left - player.width / 2;
      player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
    }

    function handleKeyDown(e) {
      if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') keys.left = true;
      if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') keys.right = true;
    }

    function handleKeyUp(e) {
      if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') keys.left = false;
      if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') keys.right = false;
    }

    function setDifficulty(level, btn) {
      difficulty = level;
      document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
      if (btn) btn.classList.add('active');
    }

    function renderBriefing() {
      const overlay = document.getElementById('gameOverlay');
      if (!overlay) return;
      overlay.innerHTML = `
        <div class="overlay-pill">Storybook briefing</div>
        <div class="overlay-title">üçØ Quick How-To</div>
        <div class="overlay-subtitle">Catch honey, dodge bees, fill the barrel before time blinks away.</div>
        <ul class="overlay-steps">
          <li>‚≠ê Catch drops to score and fill the barrel. Bees cost a heart.</li>
          <li>‚è±Ô∏è 60 second rounds; tutorial is 35 seconds with calmer drops.</li>
          <li>üå≥ Pick a drizzle strength below. Harder = faster drops & bees.</li>
        </ul>
        <div class="overlay-controls">
          <div>
            <div class="control-label">üñ•Ô∏è Desktop</div>
            <p>Press ‚Üê ‚Üí or A / D to roll Pooh. Quick taps dodge bees best.</p>
          </div>
          <div>
            <div class="control-label">üì± Mobile</div>
            <p>Swipe or drag the honey pot. On-screen arrows also work for taps.</p>
          </div>
        </div>
        <div class="overlay-actions">
          <button class="btn sparkle" onclick="startGame('quick')">‚ö° Quick Start (Tutorial)</button>
          <button class="btn btn-secondary" onclick="startGame()">‚ñ∂ Full Run</button>
        </div>
        <p class="overlay-footer">Tip: Start with the tutorial, then jump into a faster drizzle.</p>
      `;
      overlay.classList.remove('hidden');
    }

    function showCanvasHint() {
      const hint = document.getElementById('canvasHint');
      if (!hint) return;
      hint.classList.add('visible');
      clearTimeout(hintTimeout);
      hintTimeout = setTimeout(() => hint.classList.remove('visible'), 4500);
    }

    function startGame(mode = 'full') {
      if (gameState === 'playing') return;

      const overlay = document.getElementById('gameOverlay');
      overlay.classList.add('hidden');

      gameState = 'playing';
      score = 0;
      honeyCollected = 0;
      lives = 3;
      hitFlash = 0;
      timeLeft = mode === 'quick' ? 35 : 60;
      drops = [];
      bees = [];
      sparkles = [];

      if (mode === 'quick') {
        setDifficulty('tutorial', document.getElementById('tutorialBtn'));
      }

      updateDisplay();
      resetStatAlerts();
      updateTimerWarning();
      showCanvasHint();

      document.getElementById('startBtn').disabled = true;
      const pauseBtn = document.getElementById('pauseBtn');
      pauseBtn.disabled = false;
      pauseBtn.textContent = '‚è∏ Pause';

      gameInterval = setInterval(gameLoop, 1000 / 60);

      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = timeLeft;
        updateTimerWarning();
        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);

      spawnDrops();
      spawnBees();
    }

    function pauseGame() {
      const pauseBtn = document.getElementById('pauseBtn');
      if (gameState === 'playing') {
        gameState = 'paused';
        clearInterval(gameInterval);
        clearInterval(timerInterval);
        pauseBtn.textContent = '‚ñ∂ Resume';
      } else if (gameState === 'paused') {
        gameState = 'playing';
        gameInterval = setInterval(gameLoop, 1000 / 60);
        timerInterval = setInterval(() => {
          timeLeft--;
          document.getElementById('timer').textContent = timeLeft;
          updateTimerWarning();
          if (timeLeft <= 0) endGame();
        }, 1000);
        pauseBtn.textContent = '‚è∏ Pause';
      }
    }

    function resetGame() {
      gameState = 'idle';
      clearInterval(gameInterval);
      clearInterval(timerInterval);

      score = 0;
      honeyCollected = 0;
      lives = 3;
      timeLeft = 60;
      drops = [];
      bees = [];
      sparkles = [];

      updateDisplay();
      resetStatAlerts();
      updateTimerWarning();
      renderBriefing();

      document.getElementById('startBtn').disabled = false;
      const pauseBtn = document.getElementById('pauseBtn');
      pauseBtn.disabled = true;
      pauseBtn.textContent = '‚è∏ Pause';

      drawGame();
    }

    function endGame() {
      gameState = 'over';
      clearInterval(gameInterval);
      clearInterval(timerInterval);

      const newBestScore = score > bestScore;
      const newBestHoney = honeyCollected > bestHoney;
      if (newBestScore) bestScore = score;
      if (newBestHoney) bestHoney = honeyCollected;
      saveBestStats();
      updateBestDisplay();

      const overlay = document.getElementById('gameOverlay');
      overlay.classList.remove('hidden');
      overlay.innerHTML = `
        <div class="overlay-pill">Round summary</div>
        <div class="overlay-title">üçØ Sweet Work! üçØ</div>
        <div class="overlay-subtitle">Pooh has plenty for Baby Gunner's picnic thanks to you.</div>
        <div class="overlay-metrics">
          <div class="metric-card">
            <span class="metric-label">Final Score</span>
            <span class="metric-value">${score}</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Honey Collected</span>
            <span class="metric-value">${honeyCollected}</span>
          </div>
          <div class="metric-card best-stat">
            <span class="metric-label">${newBestScore ? 'New High Score' : 'Best Run'}</span>
            <span class="metric-value">${bestScore}</span>
          </div>
        </div>
        <button class="btn sparkle" onclick="resetGame(); startGame();">Play Again</button>
        <button class="btn btn-secondary" onclick="resetGame();" style="margin-top: 10px;">Back to Briefing</button>
        <p class="overlay-footer">${newBestScore ? 'New record! Keep the streak going.' : 'Try a braver drizzle or dodge those bees with quicker sidesteps.'}</p>
      `;

      document.getElementById('startBtn').disabled = false;
      const pauseBtn = document.getElementById('pauseBtn');
      pauseBtn.disabled = true;
      pauseBtn.textContent = '‚è∏ Pause';
    }

    function spawnDrops() {
      if (gameState !== 'playing') return;

      drops.push({
        x: Math.random() * (canvas.width - 20),
        y: -20,
        width: 20,
        height: 30,
        speed: difficulties[difficulty].dropSpeed
      });

      setTimeout(spawnDrops, difficulties[difficulty].dropFreq);
    }

    function spawnBees() {
      if (gameState !== 'playing') return;

      bees.push({
        x: Math.random() * (canvas.width - 30),
        y: -30,
        width: 30,
        height: 25,
        speed: difficulties[difficulty].beeSpeed
      });

      setTimeout(spawnBees, difficulties[difficulty].beeFreq);
    }

    function gameLoop() {
      if (gameState !== 'playing') return;

      if (keys.left) {
        player.x -= player.speed;
      }
      if (keys.right) {
        player.x += player.speed;
      }
      player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));

      drops.forEach((drop, index) => {
        drop.y += drop.speed;

        if (checkCollision(drop, player)) {
          score += 10;
          honeyCollected++;
          sparkles.push({
            x: drop.x + 10,
            y: drop.y + 10,
            life: 22
          });
          drops.splice(index, 1);
          updateDisplay();
        } else if (drop.y > canvas.height) {
          drops.splice(index, 1);
        }
      });

      bees.forEach((bee, index) => {
        bee.y += bee.speed;

        if (checkCollision(bee, player)) {
          lives--;
          bees.splice(index, 1);
          triggerStatAlert(livesStat);
          hitFlash = 16;
          updateDisplay();

          if (lives <= 0) {
            endGame();
          }
        } else if (bee.y > canvas.height) {
          bees.splice(index, 1);
        }
      });

      // Update sparkles
      sparkles.forEach((s, i) => {
        s.life--;
        s.y += 0.5;
        if (s.life <= 0) sparkles.splice(i, 1);
      });

      drawGame();
    }

    function checkCollision(obj1, obj2) {
      return obj1.x < obj2.x + obj2.width &&
             obj1.x + obj1.width > obj2.x &&
             obj1.y < obj2.y + obj2.height &&
             obj1.y + obj1.height > obj2.y;
    }

    function drawGame() {
      if (!ctx) return;

      // Clear
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Sky gradient
      const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      skyGradient.addColorStop(0, '#8cd3ff');
      skyGradient.addColorStop(0.45, '#87CEEB');
      skyGradient.addColorStop(0.9, '#d1f3ff');
      ctx.fillStyle = skyGradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Soft distant hills
      ctx.fillStyle = '#b7d7a8';
      ctx.beginPath();
      ctx.moveTo(0, canvas.height - 80);
      ctx.quadraticCurveTo(canvas.width * 0.25, canvas.height - 120, canvas.width * 0.5, canvas.height - 80);
      ctx.quadraticCurveTo(canvas.width * 0.75, canvas.height - 40, canvas.width, canvas.height - 70);
      ctx.lineTo(canvas.width, canvas.height);
      ctx.lineTo(0, canvas.height);
      ctx.closePath();
      ctx.fill();

      // Ground
      ctx.fillStyle = '#6fa45a';
      ctx.fillRect(0, canvas.height - 40, canvas.width, 40);

      // Simple trees
      ctx.fillStyle = 'rgba(74, 94, 62, 0.7)';
      for (let i = 0; i < 4; i++) {
        const baseX = (canvas.width / 4) * i + 20;
        ctx.fillRect(baseX, canvas.height - 70, 20, 30);
        ctx.beginPath();
        ctx.moveTo(baseX - 20, canvas.height - 70);
        ctx.lineTo(baseX + 10, canvas.height - 120);
        ctx.lineTo(baseX + 40, canvas.height - 70);
        ctx.closePath();
        ctx.fill();
      }

      // Pooh ears
      ctx.fillStyle = '#f4c16e';
      ctx.beginPath();
      ctx.arc(player.x + 18, player.y + 10, 8, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(player.x + 42, player.y + 10, 8, 0, Math.PI * 2);
      ctx.fill();

      // Pooh head
      ctx.beginPath();
      ctx.arc(player.x + 30, player.y + 26, 20, 0, Math.PI * 2);
      ctx.fill();

      // Face
      ctx.fillStyle = '#2b1810';
      ctx.beginPath();
      ctx.arc(player.x + 23, player.y + 22, 3, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(player.x + 37, player.y + 22, 3, 0, Math.PI * 2);
      ctx.fill();

      ctx.beginPath();
      ctx.arc(player.x + 30, player.y + 28, 3, 0, Math.PI * 2);
      ctx.fill();

      ctx.beginPath();
      ctx.arc(player.x + 30, player.y + 33, 7, 0, Math.PI);
      ctx.strokeStyle = '#2b1810';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Body + shirt
      ctx.fillStyle = '#f4c16e';
      ctx.fillRect(player.x + 14, player.y + 40, 32, 30);
      ctx.fillStyle = '#d32f2f';
      ctx.fillRect(player.x + 12, player.y + 40, 36, 18);

      // Arms
      ctx.fillStyle = '#f4c16e';
      ctx.fillRect(player.x + 6, player.y + 44, 10, 14);
      ctx.fillRect(player.x + 44, player.y + 44, 10, 14);

      // Barrel
      ctx.fillStyle = '#8b6f47';
      ctx.beginPath();
      ctx.moveTo(player.x, player.y + 60);
      ctx.lineTo(player.x + 60, player.y + 60);
      ctx.quadraticCurveTo(player.x + 56, player.y + 96, player.x + 30, player.y + 100);
      ctx.quadraticCurveTo(player.x + 4, player.y + 96, player.x, player.y + 60);
      ctx.closePath();
      ctx.fill();

      ctx.strokeStyle = '#5a4a3a';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Barrel bands
      ctx.beginPath();
      ctx.moveTo(player.x + 4, player.y + 72);
      ctx.lineTo(player.x + 56, player.y + 72);
      ctx.moveTo(player.x + 4, player.y + 88);
      ctx.lineTo(player.x + 56, player.y + 88);
      ctx.stroke();

      // Honey drops
      drops.forEach(drop => {
        ctx.fillStyle = '#f4a944';
        ctx.beginPath();
        ctx.ellipse(drop.x + 10, drop.y + 15, 10, 15, 0, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = '#fff5d6';
        ctx.beginPath();
        ctx.ellipse(drop.x + 8, drop.y + 10, 3, 5, 0, 0, Math.PI * 2);
        ctx.fill();
      });

      // Bees
      bees.forEach(bee => {
        ctx.fillStyle = '#f4a944';
        ctx.fillRect(bee.x + 5, bee.y + 5, 22, 16);

        ctx.fillStyle = '#2b1810';
        ctx.fillRect(bee.x + 8, bee.y + 5, 3, 16);
        ctx.fillRect(bee.x + 15, bee.y + 5, 3, 16);
        ctx.fillRect(bee.x + 20, bee.y + 5, 3, 16);

        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
        ctx.beginPath();
        ctx.ellipse(bee.x + 10, bee.y + 2, 7, 5, -0.3, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.ellipse(bee.x + 22, bee.y + 2, 7, 5, 0.3, 0, Math.PI * 2);
        ctx.fill();
      });

      // Sparkles on honey catch
      sparkles.forEach(s => {
        const alpha = Math.max(0, s.life / 22);
        const radius = 10 + (22 - s.life) * 0.7;
        const gradient = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, radius);
        gradient.addColorStop(0, `rgba(255, 245, 214, ${alpha})`);
        gradient.addColorStop(0.4, `rgba(244, 169, 68, ${alpha * 0.9})`);
        gradient.addColorStop(1, 'rgba(244, 169, 68, 0)');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(s.x, s.y, radius, 0, Math.PI * 2);
        ctx.fill();
      });

      if (hitFlash > 0) {
        ctx.fillStyle = `rgba(211, 47, 47, ${Math.min(0.45, hitFlash / 20)})`;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        hitFlash--;
      }
    }

    function triggerStatAlert(element) {
      if (!element) return;
      element.classList.remove('stat-alert');
      void element.offsetWidth; // restart animation
      element.classList.add('stat-alert');
      setTimeout(() => element.classList.remove('stat-alert'), 600);
    }

    function updateTimerWarning() {
      if (!timerStat) return;
      if (timeLeft <= 10) {
        if (!timerStat.classList.contains('timer-warning') && timeLeft === 10) {
          triggerStatAlert(timerStat);
        }
        timerStat.classList.add('timer-warning');
      } else {
        timerStat.classList.remove('timer-warning');
      }
    }

    function resetStatAlerts() {
      [livesStat, timerStat].forEach(el => {
        el?.classList.remove('stat-alert');
        el?.classList.remove('timer-warning');
      });
    }

    function saveBestStats() {
      try {
        localStorage.setItem('poohBest', JSON.stringify({ score: bestScore, honey: bestHoney }));
      } catch (e) {
        console.warn('Unable to save best stats', e);
      }
    }

    function loadBestStats() {
      try {
        const saved = localStorage.getItem('poohBest');
        if (saved) {
          const parsed = JSON.parse(saved);
          if (parsed.score) bestScore = parsed.score;
          if (parsed.honey) bestHoney = parsed.honey;
        }
        updateBestDisplay();
      } catch (e) {
        console.warn('No saved stats', e);
      }
    }

    function handleImageFallback(event) {
      const img = event.target;
      img.onerror = null;
      img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><rect width="120" height="120" rx="18" ry="18" fill="%23f9f4e8"/><text x="50%" y="56%" dominant-baseline="middle" text-anchor="middle" font-size="52">üçØ</text></svg>';
      img.classList.add('fallback-img');
    }

    function updateDisplay() {
      document.getElementById('score').textContent = score;
      document.getElementById('honeyCount').textContent = honeyCollected;
      document.getElementById('timer').textContent = timeLeft;
      updateBestDisplay();

      let heartsDisplay = '';
      for (let i = 0; i < lives; i++) {
        heartsDisplay += '‚ù§Ô∏è';
      }
      document.getElementById('lives').textContent = heartsDisplay || 'üíî';
    }

    function updateBestDisplay() {
      const bestEl = document.getElementById('bestScore');
      if (bestEl) bestEl.textContent = bestScore;
    }

    // ===== GUESTBOOK & PAGE INIT =====
    document.addEventListener('DOMContentLoaded', () => {
      const wishesForm = document.getElementById('wishesForm');
      const wishFeedback = document.getElementById('wishFeedback');
      const wishesDisplay = document.getElementById('wishesDisplay');
      const wishesKey = 'guestbookWishes';
      let wishes = [];

      const showWishFeedback = (msg, tone = 'info') => {
        if (!wishFeedback) return;
        wishFeedback.textContent = msg;
        wishFeedback.style.color = tone === 'error' ? '#d32f2f' : 'var(--pooh-red)';
      };

      const renderWishes = () => {
        if (!wishesDisplay) return;
        wishesDisplay.innerHTML = '';
        if (!wishes.length) {
          wishesDisplay.innerHTML = '<div class="wish-empty">No wishes yet. Be the first to add one! ‚ú®</div>';
          return;
        }

        [...wishes].reverse().forEach((wish) => {
          const card = document.createElement('div');
          card.className = 'wish-card';
          const date = new Date(wish.timestamp).toLocaleString([], { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
          card.innerHTML = `
            <div class="wish-meta">üíå <span>${wish.name}</span> <span class="wish-time">${date}</span></div>
            <div class="wish-message">"${wish.message}"</div>
          `;
          wishesDisplay.appendChild(card);
        });
      };

      const saveWishes = () => {
        try {
          localStorage.setItem(wishesKey, JSON.stringify(wishes));
        } catch (e) {
          console.warn('Unable to save wishes', e);
        }
      };

      const loadWishes = () => {
        try {
          const saved = localStorage.getItem(wishesKey);
          if (saved) {
            wishes = JSON.parse(saved);
          }
          renderWishes();
        } catch (e) {
          console.warn('Unable to load wishes', e);
        }
      };

      if (wishesForm) {
        wishesForm.addEventListener('submit', function(e) {
          e.preventDefault();

          const name = document.getElementById('guestName').value.trim();
          const message = document.getElementById('wishMessage').value.trim();

          if (!name || !message) {
            showWishFeedback('Please share both your name and wish.', 'error');
            return;
          }

          const entry = { name, message, timestamp: Date.now() };
          wishes.push(entry);
          saveWishes();
          renderWishes();
          showWishFeedback('Wish saved to the guestbook ‚ú®');

          document.getElementById('guestName').value = '';
          document.getElementById('wishMessage').value = '';
        });
      }

      loadWishes();
      updateNavigation();
      initGame();
      loadBestStats();

      document.querySelectorAll('.character-card img').forEach((img) => {
        img.loading = 'lazy';
        img.addEventListener('error', handleImageFallback);
      });
    });

    // resize handled inside initGame to keep canvas readable on small screens
  </script>
</body>
</html>
