<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Baby Gunner's Hundred Acre Wood Adventure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="description" content="A storybook-style Hundred Acre Wood adventure with a honey-catching game to celebrate Baby Gunner." />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Patrick+Hand:wght@400;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    *:focus {
      outline: 2px solid var(--honey);
      outline-offset: 2px;
    }

    :root {
      --parchment: #f9f4e8;
      --parchment-dark: #e8dcc5;
      --ink: #2b1810;
      --honey: #f4a944;
      --honey-dark: #d48a1f;
      --pooh-red: #d32f2f;
      --forest-green: #5a7c3e;
      --baby-blue: #6ba3d4;
      --shadow: rgba(43, 24, 16, 0.15);
    }

    body {
      font-family: 'Patrick Hand', 'Georgia', 'Garamond', serif;
      background:
        radial-gradient(circle at 20% 20%, rgba(255, 247, 224, 0.18), transparent 35%),
        radial-gradient(circle at 80% 10%, rgba(212, 233, 202, 0.14), transparent 30%),
        linear-gradient(135deg, #d7b98d 0%, #a37c4e 40%, #5a4a3a 100%);
      color: var(--ink);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
      overflow-x: hidden;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><text y="20" font-size="20">üçØ</text></svg>'), auto;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(244, 169, 68, 0.08) 0, rgba(244, 169, 68, 0.08) 8px, transparent 12px),
        radial-gradient(circle at 60% 10%, rgba(90, 124, 62, 0.06) 0, rgba(90, 124, 62, 0.06) 10px, transparent 16px),
        radial-gradient(circle at 80% 70%, rgba(211, 47, 47, 0.05) 0, rgba(211, 47, 47, 0.05) 12px, transparent 18px);
      background-size: 140px 140px, 200px 200px, 220px 220px;
      opacity: 0.55;
      pointer-events: none;
      z-index: 0;
    }

    /* Ambient scene background */
    .ambient-scene {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .butterfly {
      position: absolute;
      font-size: 24px;
      animation: flutter 8s ease-in-out infinite;
      opacity: 0.7;
    }

    .butterfly:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
    .butterfly:nth-child(2) { top: 60%; right: 15%; animation-delay: 2s; }
    .butterfly:nth-child(3) { top: 40%; left: 70%; animation-delay: 4s; }

    @keyframes flutter {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(30px, -20px) rotate(5deg); }
      50% { transform: translate(60px, 10px) rotate(-5deg); }
      75% { transform: translate(30px, 30px) rotate(3deg); }
    }

    .floating-leaf {
      position: absolute;
      font-size: 20px;
      animation: fall 15s linear infinite;
      opacity: 0.6;
    }

    .floating-leaf:nth-child(4) { left: 20%; animation-delay: 0s; }
    .floating-leaf:nth-child(5) { left: 50%; animation-delay: 5s; }
    .floating-leaf:nth-child(6) { left: 80%; animation-delay: 10s; }

    @keyframes fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
      10% { opacity: 0.6; }
      90% { opacity: 0.6; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }

    .bee-ambient {
      position: absolute;
      font-size: 18px;
      animation: buzz 12s linear infinite;
    }

    .bee-ambient:nth-child(7) { top: 30%; animation-delay: 1s; }
    .bee-ambient:nth-child(8) { top: 70%; animation-delay: 6s; }

    @keyframes buzz {
      0% { left: -50px; transform: translateY(0); }
      50% { transform: translateY(-30px); }
      100% { left: calc(100% + 50px); transform: translateY(0); }
    }

    /* Parallax clouds */
    .cloud-layer {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .cloud {
      position: absolute;
      font-size: 48px;
      opacity: 0.3;
      animation: drift 60s linear infinite;
    }

    /* Pooh masthead and characters */
    .pooh-masthead {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto 18px;
      position: relative;
      z-index: 1;
    }

    .masthead-inner {
      background: linear-gradient(180deg, rgba(249, 244, 232, 0.94), rgba(232, 220, 197, 0.94));
      border: 3px solid rgba(244, 169, 68, 0.55);
      border-radius: 16px;
      box-shadow: 0 18px 32px rgba(43, 24, 16, 0.28);
      padding: 22px 26px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      position: relative;
      overflow: hidden;
    }

    .honey-drip {
      position: absolute;
      inset: -18px -12px auto -12px;
      height: 36px;
      background: radial-gradient(circle at 10% 60%, rgba(244, 169, 68, 0.8) 0, rgba(244, 169, 68, 0.8) 14px, transparent 18px),
                  radial-gradient(circle at 35% 60%, rgba(212, 138, 31, 0.8) 0, rgba(212, 138, 31, 0.8) 13px, transparent 18px),
                  radial-gradient(circle at 65% 60%, rgba(244, 169, 68, 0.8) 0, rgba(244, 169, 68, 0.8) 15px, transparent 18px),
                  radial-gradient(circle at 90% 60%, rgba(212, 138, 31, 0.8) 0, rgba(212, 138, 31, 0.8) 12px, transparent 18px);
      background-size: 90px 36px;
      mix-blend-mode: multiply;
      opacity: 0.8;
    }

/* HERO WRAPPER */
.masthead-hero {
  position: relative;
  padding: clamp(20px, 4vw, 32px) clamp(16px, 6vw, 64px);
  background:
    radial-gradient(circle at 10% 0%, rgba(255, 255, 255, 0.9), transparent 55%),
    radial-gradient(circle at 90% 100%, rgba(107, 163, 212, 0.55), transparent 60%),
    linear-gradient(135deg, #b0d0e3, #fef9e7);
  border-bottom: 1px solid rgba(15, 23, 42, 0.05);
  box-shadow: 0 20px 60px rgba(15, 23, 42, 0.22);
  overflow: hidden;
}

/* subtle decorative glow */
.masthead-hero::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.6), transparent 55%),
    radial-gradient(circle at 80% 60%, rgba(255, 196, 43, 0.35), transparent 60%);
  opacity: 0.65;
  pointer-events: none;
}

/* layout container */
.masthead-hero-inner {
  position: relative;
  max-width: 1120px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: minmax(0, 3fr) minmax(0, 2.4fr);
  align-items: center;
  gap: clamp(20px, 4vw, 40px);
  z-index: 1;
}

/* text block */
.masthead-hero-copy {
  color: #2f1a0e;
}

.masthead-eyebrow {
  font-size: 0.85rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  margin-bottom: 0.4rem;
  opacity: 0.8;
}

.masthead-title {
  font-size: clamp(1.9rem, 3vw, 2.6rem);
  line-height: 1.1;
  margin-bottom: 0.6rem;
}

.masthead-tagline {
  font-size: clamp(0.95rem, 1.1vw, 1.05rem);
  max-width: 32rem;
  opacity: 0.9;
}

/* PORTRAIT ‚Äì PROMINENT VERSION */
.masthead-portrait {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: clamp(12px, 2.4vw, 20px);
  background:
    radial-gradient(circle at 20% 10%, rgba(255, 255, 255, 0.9), transparent 55%),
    radial-gradient(circle at 80% 90%, rgba(107, 163, 212, 0.4), transparent 60%),
    linear-gradient(145deg, rgba(247, 250, 255, 0.98), rgba(221, 235, 250, 0.98));
  border-radius: 22px;
  border: 1px solid rgba(107, 163, 212, 0.55);
  box-shadow:
    0 18px 40px rgba(15, 23, 42, 0.24),
    0 0 0 1px rgba(255, 255, 255, 0.8);
  overflow: hidden;
}

/* inner dashed frame */
.masthead-portrait::before {
  content: "";
  position: absolute;
  inset: 8px;
  border-radius: inherit;
  border: 1px dashed rgba(107, 163, 212, 0.45);
  pointer-events: none;
}

/* image itself */
.masthead-portrait img {
  position: relative;
  width: clamp(160px, 28vw, 260px);
  height: auto;
  display: block;
  filter: drop-shadow(0 14px 26px rgba(0, 0, 0, 0.26));
  transform: translateY(2px);
  transition:
    transform 220ms ease-out,
    filter 220ms ease-out;
}

/* hover lift on desktop */
@media (hover: hover) and (pointer: fine) {
  .masthead-portrait:hover img,
  .masthead-portrait:focus-within img {
    transform: translateY(-4px) scale(1.03);
    filter: drop-shadow(0 22px 40px rgba(0, 0, 0, 0.32));
  }
}

/* MOBILE: stack vertically */
@media (max-width: 768px) {
  .masthead-hero-inner {
    grid-template-columns: minmax(0, 1fr);
    text-align: center;
  }

  .masthead-hero-copy {
    order: 2;
  }

  .masthead-portrait {
    order: 1;
    margin-inline: auto;
  }

  .masthead-tagline {
    margin-inline: auto;
  }
}

    .forest-garland {
      display: flex;
      gap: 10px;
      font-size: 1.3rem;
      color: var(--forest-green);
      margin-top: 8px;
    }

    .honeypot-badge {
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.4), rgba(244, 169, 68, 0.9));
      border: 3px solid rgba(212, 138, 31, 0.7);
      color: #3c1f0a;
      padding: 14px 16px;
      border-radius: 14px;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.4), 0 10px 20px rgba(0,0,0,0.15);
      text-transform: uppercase;
      letter-spacing: 1px;
      white-space: nowrap;
    }

    
  

    .name-art {
      max-width: 1200px;
      margin: 12px auto 0;
      position: relative;
      z-index: 1;
    }

    .name-art figure {
      border: 3px solid rgba(212, 138, 31, 0.35);
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(249, 244, 232, 0.96), rgba(232, 220, 197, 0.92));
      box-shadow: 0 16px 30px rgba(43, 24, 16, 0.24);
      overflow: hidden;
    }

    .name-art img {
      width: 100%;
      display: block;
    }

    .name-art figcaption {
      padding: 10px 16px 14px;
      color: #3c2a1a;
      font-size: 1rem;
      letter-spacing: 0.4px;
      text-align: center;
    }

    .chapter-illustrations {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 14px;
      margin: 16px 0 28px;
    }

    .storybook-figure {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: radial-gradient(circle at 18% 20%, rgba(244, 169, 68, 0.14), transparent 38%),
                  radial-gradient(circle at 82% 28%, rgba(107, 163, 212, 0.12), transparent 40%),
                  rgba(255,255,255,0.94);
      border: 2px solid rgba(244, 169, 68, 0.4);
      border-radius: 18px;
      box-shadow: 0 12px 26px rgba(0,0,0,0.12);
      position: relative;
      overflow: hidden;
    }

    .storybook-figure::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 12% 16%, rgba(255,255,255,0.6), transparent 34%),
                  radial-gradient(circle at 88% 80%, rgba(244, 169, 68, 0.08), transparent 36%);
      pointer-events: none;
      opacity: 0.7;
    }

    .storybook-figure img {
      width: 96px;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,0.18));
      position: relative;
      z-index: 1;
    }

    .figure-copy {
      display: grid;
      gap: 6px;
      position: relative;
      z-index: 1;
    }

    .figure-name {
      font-weight: 700;
      color: var(--pooh-red);
      letter-spacing: 0.4px;
    }

    .figure-note {
      font-size: 0.98rem;
      color: #3c2a1a;
      line-height: 1.5;
    }

    .figure-theme-honey {
      border-color: rgba(244, 169, 68, 0.65);
      box-shadow: 0 12px 30px rgba(244, 169, 68, 0.28);
    }

    .figure-theme-forest {
      border-color: rgba(90, 124, 62, 0.55);
      box-shadow: 0 12px 30px rgba(90, 124, 62, 0.22);
    }

    .figure-theme-sky {
      border-color: rgba(107, 163, 212, 0.55);
      box-shadow: 0 12px 30px rgba(107, 163, 212, 0.22);
    }

    .cloud:nth-child(1) { top: 10%; animation-duration: 80s; }
    .cloud:nth-child(2) { top: 30%; animation-duration: 100s; animation-delay: -20s; }
    .cloud:nth-child(3) { top: 50%; animation-duration: 90s; animation-delay: -40s; }

    @keyframes drift {
      from { transform: translateX(-100px); }
      to { transform: translateX(100vw); }
    }

    /* Book container */
    .book-container {
      max-width: 1200px;
      width: 100%;
      perspective: 2500px;
      position: relative;
      z-index: 1;
      margin-top: 10px;
    }

    .book-container::before {
      content: '';
      position: absolute;
      inset: -10px -14px -30px -14px;
      background: radial-gradient(circle at 20% 20%, rgba(0,0,0,0.18), transparent 35%),
                  radial-gradient(circle at 80% 20%, rgba(0,0,0,0.14), transparent 32%);
      filter: blur(28px);
      opacity: 0.55;
      z-index: 0;
      pointer-events: none;
    }

    .book {
      background: linear-gradient(135deg, #3c2c1d 0%, #2c1f13 46%, #24160d 100%);
      padding: 46px 52px;
      border-radius: 14px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,255,0.05);
      position: relative;
      transform-style: preserve-3d;
      overflow: hidden;
      isolation: isolate;
    }

    .book::after {
      content: '';
      position: absolute;
      inset: 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.06);
      pointer-events: none;
      box-shadow: inset 0 0 40px rgba(0,0,0,0.35);
    }

    .chapter-tracker {
      background: linear-gradient(120deg, rgba(249, 244, 232, 0.9), rgba(232, 220, 197, 0.95));
      border: 2px solid rgba(244, 169, 68, 0.35);
      padding: 16px 18px 12px;
      border-radius: 16px;
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.18);
      margin-bottom: 18px;
      position: relative;
      overflow: hidden;
    }

    .chapter-tracker::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 18% 30%, rgba(255,255,255,0.45), transparent 38%),
                  radial-gradient(circle at 80% 20%, rgba(244, 169, 68, 0.25), transparent 40%);
      pointer-events: none;
    }

    .tracker-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .tracker-label {
      font-size: 1.05rem;
      color: var(--pooh-red);
      font-weight: 700;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .tracker-label::before {
      content: 'üìñ';
      font-size: 1.2rem;
    }

    .book-progress {
      position: relative;
      flex: 1;
      height: 10px;
      border-radius: 999px;
      background: rgba(212, 138, 31, 0.16);
      overflow: hidden;
      border: 1px solid rgba(212, 138, 31, 0.2);
    }

    .progress-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      background: linear-gradient(90deg, var(--honey), var(--honey-dark));
      border-radius: 999px;
      box-shadow: 0 0 12px rgba(244, 169, 68, 0.55);
      transition: width 0.4s ease;
    }

    .chapter-pill-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 10px;
    }

    .chapter-pill {
      border: 2px dashed rgba(212, 138, 31, 0.6);
      background: rgba(255,255,255,0.92);
      padding: 10px 12px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      min-height: 44px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      text-align: left;
      position: relative;
      overflow: hidden;
    }

    .chapter-pill::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(244, 169, 68, 0.12), transparent 50%);
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .chapter-pill:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 22px rgba(0,0,0,0.12);
      border-color: var(--honey);
    }

    .chapter-pill:hover::after { opacity: 1; }

    .chapter-pill.active {
      border-style: solid;
      border-color: var(--honey);
      box-shadow: 0 12px 22px rgba(0,0,0,0.16), inset 0 0 0 2px rgba(255,255,255,0.7);
    }

    .chapter-pill.visited {
      border-color: rgba(90, 124, 62, 0.7);
      opacity: 0.9;
    }

    .chapter-pill.visited .pill-number {
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.7), rgba(90, 124, 62, 0.75));
      color: white;
    }

    .chapter-pill.visited::after {
      opacity: 0.4;
    }

    .pill-number {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.45), rgba(244, 169, 68, 0.95));
      display: grid;
      place-items: center;
      color: #3c1f0a;
      font-weight: 800;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.4);
      flex-shrink: 0;
    }

    .pill-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .pill-title {
      font-weight: 700;
      color: var(--ink);
      font-size: 1rem;
    }

    .pill-detail {
      font-size: 0.9rem;
      color: #4a3928;
    }

    /* Book spine decoration */
    .book::before {
      content: '';
      position: absolute;
      left: -10px;
      top: 10%;
      bottom: 10%;
      width: 10px;
      background: linear-gradient(180deg, #2a1a0a, #4a3a2a);
      border-radius: 3px 0 0 3px;
      box-shadow: inset -2px 0 4px rgba(0,0,0,0.5);
    }

    .pages-wrapper {
      display: flex;
      gap: 32px;
      min-height: 600px;
      position: relative;
      padding: 12px 10px;
      background: linear-gradient(120deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border-radius: 10px;
    }

    .page {
      flex: 1;
      background: radial-gradient(circle at 20% 20%, rgba(244, 169, 68, 0.04), transparent 35%),
                  radial-gradient(circle at 80% 10%, rgba(106, 159, 96, 0.05), transparent 32%),
                  var(--parchment);
      padding: 42px;
      border-radius: 12px;
      border: 1px solid var(--parchment-dark);
      box-shadow:
        inset 0 0 30px rgba(139, 111, 71, 0.12),
        0 18px 32px rgba(0, 0, 0, 0.24);
      position: relative;
      max-height: none;
      overflow-y: visible;
      display: none;
      transform-style: preserve-3d;
      background-image:
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 31px,
          rgba(139, 111, 71, 0.03) 31px,
          rgba(139, 111, 71, 0.03) 32px
        );
    }

    .page-content {
      display: grid;
      grid-template-columns: 1.6fr 1fr;
      gap: 24px;
      align-items: start;
      margin-bottom: 24px;
    }

    .page-column {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .page.active {
      display: block;
      animation: pageEnter 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .page.exiting {
      animation: pageExit 0.6s cubic-bezier(0.55, 0.085, 0.68, 0.53);
    }

    @keyframes pageEnter {
      0% {
        transform: rotateY(-90deg);
        opacity: 0;
        transform-origin: left center;
      }
      100% {
        transform: rotateY(0deg);
        opacity: 1;
        transform-origin: left center;
      }
    }

    @keyframes pageExit {
      0% {
        transform: rotateY(0deg);
        opacity: 1;
        transform-origin: left center;
      }
      100% {
        transform: rotateY(90deg);
        opacity: 0;
        transform-origin: left center;
      }
    }

    .page::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 40%, rgba(244, 169, 68, 0.03), transparent 60%);
      pointer-events: none;
    }

    .page::after {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 24px;
      width: 12px;
      background: linear-gradient(90deg, rgba(0,0,0,0.08), rgba(0,0,0,0));
      opacity: 0.2;
      pointer-events: none;
    }

    /* Chapter headers */
    .chapter-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--honey);
      position: relative;
    }

    .chapter-header::before,
    .chapter-header::after {
      content: 'üåø';
      position: absolute;
      bottom: -15px;
      font-size: 24px;
      animation: sway 3s ease-in-out infinite;
    }

    .chapter-header::before {
      left: 20px;
    }

    .chapter-header::after {
      right: 20px;
      animation-delay: 1.5s;
    }

    @keyframes sway {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    .chapter-number {
      font-size: 0.9rem;
      letter-spacing: 3px;
      color: var(--honey-dark);
      text-transform: uppercase;
      margin-bottom: 10px;
      animation: fadeInDown 0.8s ease;
    }

    .chapter-title {
      font-size: 2rem;
      color: var(--pooh-red);
      font-weight: normal;
      margin-bottom: 10px;
      font-style: italic;
      animation: fadeInUp 1s ease;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .chapter-subtitle {
      font-size: 1rem;
      color: var(--ink);
      opacity: 0.7;
      animation: fadeIn 1.2s ease;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .story-text {
      font-size: 1.1rem;
      line-height: 1.8;
      margin-bottom: 20px;
      text-indent: 2em;
      text-align: justify;
      animation: fadeIn 1.5s ease;
    }

    .story-text:first-of-type::first-letter {
      font-size: 3.5rem;
      float: left;
      line-height: 0.9;
      margin: 5px 8px 0 0;
      color: var(--pooh-red);
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .illustration-box {
      border: 3px solid var(--honey);
      padding: 20px;
      margin: 30px 0;
      background: white;
      text-align: center;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
      animation: slideIn 1s ease;
    }

    @keyframes slideIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .illustration-box::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
      animation: shine 3s ease-in-out infinite;
    }

    @keyframes shine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .bear-illustration {
      font-size: 80px;
      margin: 20px 0;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .party-details {
      background: white;
      padding: 25px;
      border-radius: 8px;
      border: 2px solid var(--baby-blue);
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      animation: fadeIn 1.8s ease;
    }

    .party-details h3 {
      color: var(--baby-blue);
      margin-bottom: 15px;
      text-align: center;
    }

    .info-card {
      background: white;
      border: 2px solid var(--parchment-dark);
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .info-card h4 {
      color: var(--honey-dark);
      font-size: 1rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .lore-panel {
      background: rgba(255, 255, 255, 0.94);
      border: 2px dashed rgba(244, 169, 68, 0.8);
      border-radius: 14px;
      padding: 14px 16px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
    }

    .lore-panel summary {
      list-style: none;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      font-weight: 800;
      color: var(--pooh-red);
      font-size: 1.05rem;
    }

    .lore-panel summary::-webkit-details-marker {
      display: none;
    }

    .lore-panel[open] {
      border-style: solid;
    }

    .lore-content {
      margin-top: 12px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 16px;
      align-items: start;
    }

    .lore-stories {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .detail-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px 0;
      border-bottom: 1px solid var(--parchment-dark);
      transition: transform 0.3s ease;
    }

    .detail-item:hover {
      transform: translateX(5px);
    }

    .detail-item:last-child {
      border-bottom: none;
    }

    .detail-icon {
      font-size: 1.5rem;
      width: 40px;
      text-align: center;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    #gameCanvas {
      display: block;
      width: 100%;
      max-width: 560px;
      height: 380px;
      margin: 0 auto;
      border: 2px solid var(--parchment-dark);
      border-radius: 10px;
      background: #87CEEB;
      transition: box-shadow 0.3s ease, transform 0.15s ease;
    }

    #gameCanvas:hover {
      box-shadow: 0 0 24px rgba(244, 169, 68, 0.55);
      transform: translateY(-1px);
    }

    .btn {
      padding: 11px 22px;
      border: 2px solid var(--ink);
      background: var(--honey);
      color: var(--ink);
      font-family: inherit;
      font-size: 0.98rem;
      cursor: pointer;
      border-radius: 999px;
      transition: all 0.25s;
      font-weight: bold;
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      min-height: 44px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn:hover::before {
      width: 260px;
      height: 260px;
    }

    .btn:hover {
      background: var(--honey-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 10px var(--shadow);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--parchment-dark);
    }

    .btn-secondary:hover {
      background: #d4c8ad;
    }

    .sparkle {
      position: relative;
    }

    .sparkle::after {
      content: '‚ú®';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 1rem;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .sparkle:hover::after {
      opacity: 0.55;
      animation: twinkle 0.5s ease;
    }

    @keyframes twinkle {
      0%, 100% { transform: scale(0); }
      50% { transform: scale(1.2); }
    }

    /* RESPONSIVE TUNING
       ================= */

    @media (max-width: 900px) {
      body {
        align-items: flex-start;
        padding: 18px 14px;
      }

      .masthead-inner {
        flex-direction: column;
        align-items: flex-start;
      }

      .honeypot-badge {
        align-self: flex-end;
      }

      .book {
        padding: 24px;
      }

      .chapter-tracker {
        padding: 14px 14px 10px;
      }

      .tracker-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .chapter-pill-row {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .page {
        padding: 22px;
      }

      .chapter-title {
        font-size: 1.55rem;
      }

      .chapter-illustrations {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .storybook-figure img {
        width: 84px;
      }

      .page-content {
        grid-template-columns: 1fr;
        gap: 18px;
      }

      .lore-content {
        grid-template-columns: 1fr;
      }

      #gameCanvas {
        height: 320px;
      }
    }

    @media (max-width: 600px) {
      body {
        align-items: flex-start;
        padding: 14px 10px;
      }

      .book {
        padding: 18px 14px;
      }

      .chapter-tracker {
        padding: 12px;
      }

      .chapter-pill-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }

      .page {
        padding: 18px 14px;
      }

      .chapter-title {
        font-size: 1.45rem;
      }

      .story-text {
        font-size: 0.98rem;
        text-indent: 1.2em;
      }

      .chapter-illustrations {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .storybook-figure {
        flex-direction: row;
      }

      .storybook-figure img {
        width: 76px;
      }

      .lore-content {
        grid-template-columns: 1fr;
      }

      #gameCanvas {
        height: 260px;
      }

      .game-controls {
        flex-direction: column;
        gap: 8px;
        margin-top: 8px;
      }

      .btn {
        width: 100%;
        padding: 10px 16px;
        font-size: 0.95rem;
      }
      .book-nav {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }

      .page-indicator {
        order: -1;
        font-size: 0.88rem;
      }
    }

    /* Navigation with page curl effect */
    .book-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid var(--honey);
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-btn {
      padding: 10px 20px;
      background: var(--pooh-red);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      white-space: nowrap;
    }

    .nav-btn::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 0;
      height: 0;
      border-style: solid;
      transition: all 0.3s;
    }

    .nav-btn.next:hover::after {
      width: 20px;
      height: 20px;
      border-width: 0 20px 20px 0;
      border-color: transparent rgba(255,255,255,0.3) transparent transparent;
    }

    .nav-btn:hover {
      background: #b02626;
      transform: scale(1.05);
    }

    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      transform: none;
    }

    .page-indicator {
      text-align: center;
      color: var(--honey-dark);
      font-size: 0.9rem;
      margin-top: 10px;
      animation: fadeIn 2s ease;
      flex: 1;
    }

    .form-feedback {
      margin-top: -6px;
      margin-bottom: 12px;
      font-weight: 600;
      color: var(--pooh-red);
      min-height: 20px;
    }

    .wishes-list {
      display: grid;
      gap: 14px;
    }

    .wish-card {
      background: linear-gradient(120deg, rgba(249, 244, 232, 0.95), rgba(232, 220, 197, 0.95));
      border-radius: 12px;
      padding: 14px 16px;
      border: 1px solid rgba(244, 169, 68, 0.35);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
      display: grid;
      gap: 6px;
    }

    .wish-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: var(--honey-dark);
    }

    .wish-time {
      font-size: 0.9rem;
      color: #4a3928;
      opacity: 0.8;
    }

    .wish-message {
      line-height: 1.6;
      font-style: italic;
    }

    .wish-empty {
      text-align: center;
      color: #5a3a1f;
      padding: 12px;
      border: 1px dashed rgba(90, 124, 62, 0.3);
      border-radius: 12px;
    }

    .divider {
      text-align: center;
      margin: 30px 0;
      color: var(--honey);
      font-size: 1.5rem;
      animation: fadeIn 2.5s ease;
    }

    /* Sparkle effect on hover */
    .sparkle {
      position: relative;
    }

    .sparkle::after {
      content: '‚ú®';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 1rem;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .sparkle:hover::after {
      opacity: 0.55;
      animation: twinkle 0.5s ease;
    }

    @keyframes twinkle {
      0%, 100% { transform: scale(0); }
      50% { transform: scale(1.2); }
    }

    /* Responsive tweaks */
    @media (max-width: 900px) {
      body {
        align-items: flex-start;
        cursor: auto;
      }

      .chapter-tracker {
        padding: 14px 14px 10px;
      }

      .tracker-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .chapter-pill-row {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .book {
        padding: 24px;
      }

      .page {
        padding: 24px;
      }

      .chapter-title {
        font-size: 1.6rem;
      }

      .story-text {
        font-size: 1rem;
        text-indent: 1.5em;
      }

      .page-content {
        grid-template-columns: 1fr;
      }

      #gameCanvas {
        height: 320px;
      }

      .game-controls {
        flex-direction: column;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }

      .book-nav {
        flex-direction: column;
        align-items: stretch;
      }

      .page-indicator {
        order: -1;
      }
    }

@media (max-width: 600px) {
  body {
    align-items: flex-start;
    padding: 14px;
  }

  .ambient-scene,
  .cloud-layer {
    display: none;
  }

  .chapter-tracker {
    padding: 12px;
  }

  .chapter-pill-row {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .masthead-inner {
    padding: 16px 18px 12px;
  }

  .masthead-title {
    font-size: 1.6rem;
  }

  .honeypot-badge {
    align-self: flex-start;
  }

  .book {
    padding: 18px;
  }

  .page {
    padding: 18px;
  }

  .chapter-title {
    font-size: 1.45rem;
  }

  .story-text {
    font-size: 0.98rem;
    text-indent: 1.3em;
  }

  .page-content {
    grid-template-columns: 1fr;
    gap: 18px;
  }

  /* GAME SECTION ‚Äì phone layout */
  #gameCanvas {
    height: 260px;          /* shorter on phones */
    max-width: 100%;
  }

  .btn {
    width: 100%;
    justify-content: center;
    padding: 10px 16px;
    font-size: 0.95rem;
  }

  /* Book nav on phone */
  .book-nav {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }

  .page-indicator {
    order: -1;
    font-size: 0.88rem;
  }
}

@media (max-width: 600px) and (max-height: 480px) {
  body {
    padding: 10px 10px 8px;
  }

  .pooh-masthead {
    margin-bottom: 10px;
  }

  .masthead-inner {
    padding: 12px 14px 10px;
  }

  .book {
    padding: 14px;
  }

  .page {
    padding: 14px;
  }

  #gameCanvas {
    height: 230px;
  }
}

@media (max-width: 480px) {
  .game-controls {
    position: sticky;
    bottom: 8px;
    background: linear-gradient(180deg, rgba(249, 244, 232, 0.95), rgba(232, 220, 197, 0.95));
    padding: 8px 10px;
    border-radius: 14px;
    box-shadow: 0 8px 18px rgba(43, 24, 16, 0.18);
    z-index: 2;
  }
  }

    /* ===============================
       GAME CARD (HUD-FOCUSED DESIGN)
       =============================== */

    .game-card {
      background: linear-gradient(180deg, #fffdf6, #f4ead7);
      border: 3px solid #f4a944;
      border-radius: 20px;
      padding: 14px;
      max-width: 520px;
      margin: 0 auto;
      box-shadow: 0 22px 50px rgba(0, 0, 0, 0.28);
      display: grid;
      gap: 12px;
    }

    .game-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .game-kicker {
      font-size: 0.65rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #6b4b2b;
    }

    .game-title h3 {
      font-size: 1.1rem;
      color: #d32f2f;
      margin: 2px 0 0;
    }

    .best-score-strip {
      background: #e9f3e6;
      border: 1px dashed #76a66b;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.85rem;
      font-weight: 700;
      color: #355c2c;
    }

    .hud {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      background: #fff7ec;
      border-radius: 14px;
      padding: 8px;
      gap: 6px;
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
    }

    .hud-secondary {
      grid-template-columns: repeat(2, 1fr);
      background: #fff3e0;
    }

    .hud-item {
      background: white;
      border-radius: 10px;
      padding: 8px 0;
      text-align: center;
      font-size: 1rem;
      font-weight: 700;
      color: #2b1810;
    }

    .hud-item span {
      margin-left: 6px;
    }

    .hearts {
      letter-spacing: 3px;
    }

    .clock {
      color: #8c1717;
    }

    .hud-item.pulse {
      animation: hudPulse 1.4s ease-in-out infinite;
    }

    @keyframes hudPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .canvas-shell {
      background: #87ceeb;
      border-radius: 14px;
      padding: 8px;
      border: 2px solid #d48a1f;
      position: relative;
      overflow: hidden;
    }

    .canvas-shell #gameCanvas {
      width: 100%;
      height: 280px;
      border-radius: 10px;
      background: linear-gradient(#87ceeb, #bfe8ff);
    }

    .game-controls {
      display: grid;
      gap: 10px;
    }

    .difficulty-row {
      display: flex;
      justify-content: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .difficulty-btn {
      padding: 0.75rem 1.5rem;
      background: white;
      border: 2px solid #dfe6e9;
      border-radius: 25px;
      color: #636e72;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      flex: 1 1 0;
      min-width: 120px;
      text-align: center;
    }

    .difficulty-btn.active {
      background: linear-gradient(135deg, #a8e6cf, #7fdbbc);
      border: 2px solid #56c596;
      color: #2d3436;
      box-shadow: 0 4px 12px rgba(86, 197, 150, 0.3);
    }

    .action-row {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .game-card .btn {
      border-radius: 12px;
      padding: 1rem 2.5rem;
      font-weight: 700;
      cursor: pointer;
      border: none;
      color: white;
      font-size: 1rem;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .game-card .btn.primary {
      background: linear-gradient(135deg, #00b894, #00cec9);
      box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
    }

    .game-card .btn.secondary {
      background: linear-gradient(135deg, #636e72, #2d3436);
      box-shadow: 0 6px 20px rgba(45, 52, 54, 0.3);
    }

    .game-card .btn.warning {
      background: linear-gradient(135deg, #ffb300, #f57c00);
      box-shadow: 0 6px 20px rgba(245, 124, 0, 0.3);
    }

    .game-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.6);
      z-index: 2;
      transition: opacity 0.3s ease;
    }

    .game-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .overlay-card {
      background: #fffaf0;
      border: 2px solid #f4a944;
      border-radius: 18px;
      padding: 16px 18px;
      text-align: center;
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.25);
      max-width: 320px;
    }

    .overlay-icon {
      font-size: 2.6rem;
      margin-bottom: 8px;
    }

    .overlay-card h3 {
      margin: 0 0 6px;
      color: #d32f2f;
    }

    .overlay-card p {
      color: #5a4a3a;
      margin: 0 0 12px;
      line-height: 1.5;
    }

    .overlay-action {
      width: 100%;
      font-size: 1rem;
    }

    .touch-controls {
      position: absolute;
      inset: auto 10px 10px 10px;
      display: none;
      justify-content: space-between;
      z-index: 3;
      gap: 8px;
    }

    .touch-btn {
      flex: 1;
      padding: 12px 0;
      border-radius: 12px;
      border: 2px solid #f4a944;
      background: rgba(255, 255, 255, 0.9);
      font-size: 1.4rem;
      font-weight: 700;
      color: #2b1810;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    .touch-btn:active {
      transform: scale(0.97);
    }

    .achievement-toast {
      position: fixed;
      top: 16px;
      right: 16px;
      background: linear-gradient(135deg, #ffd54f, #ffb300);
      color: #2b1810;
      padding: 12px 14px;
      border-radius: 14px;
      display: none;
      align-items: center;
      gap: 10px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
      z-index: 5;
      min-width: 220px;
    }

    .toast-title {
      font-weight: 800;
      margin-bottom: 2px;
    }

    .toast-text {
      font-size: 0.95rem;
    }

    .toast-icon {
      font-size: 1.8rem;
    }

    @media (max-width: 500px) {
      .game-card {
        padding: 10px;
      }

      .canvas-shell #gameCanvas {
        height: 240px;
      }

      .touch-controls {
        display: flex;
      }
    }

  </style>
</head>
<body>
  <!-- Ambient scene background -->
  <div class="ambient-scene">
    <div class="butterfly">ü¶ã</div>
    <div class="butterfly">ü¶ã</div>
    <div class="butterfly">ü¶ã</div>
    <div class="floating-leaf">üçÇ</div>
    <div class="floating-leaf">üçÇ</div>
    <div class="floating-leaf">üçÇ</div>
    <div class="bee-ambient">üêù</div>
    <div class="bee-ambient">üêù</div>
  </div>

  <!-- Parallax clouds -->
  <div class="cloud-layer">
    <div class="cloud">‚òÅÔ∏è</div>
    <div class="cloud">‚òÅÔ∏è</div>
    <div class="cloud">‚òÅÔ∏è</div>
  </div>

  <div class="pooh-masthead">
    <div class="masthead-inner">
      <div>
        <div class="honey-drip"></div>
        <div class="masthead-title">Winnie the Pooh & Friends</div>
        <div class="masthead-tagline">A honey-warmed welcome from the Hundred Acre Wood as we celebrate Baby Gunner's arrival.</div>
        <div class="forest-garland" aria-hidden="true">
          <span>üçØ</span><span>üêù</span><span>üå≥</span><span>üêæ</span><span>üåø</span>
        </div>
      </div>
      <div class="masthead-right">
        <figure class="masthead-portrait">
          <img src="Images/Characters/Gunnar.png" alt="Illustration of Baby Gunner snuggled in a soft blanket">
        </figure>
        <div class="honeypot-badge">üçØ Honey Day</div>
      </div>
    </div>
  </div>
  <header class="masthead-hero">
    <div class="masthead-hero-inner">
      <div class="masthead-hero-copy">
        <p class="masthead-eyebrow">Baby Gunner‚Äôs Hundred Acre Wood</p>
        <h1 class="masthead-title">Pooh‚Äôs Honey Catch Game</h1>
        <p class="masthead-tagline">
          Catch honey drops, dodge the bees, and help Pooh fill his honey barrel.
        </p>
      </div>

      <div class="masthead-portrait">
        <img src="images/pooh-portrait.png" alt="Winnie the Pooh with a honey barrel">
      </div>
    </div>
  </header>

  <div class="book-container">
    <div class="chapter-tracker" aria-label="Chapter navigation">
      <div class="tracker-row">
        <div class="tracker-label">Story path</div>
        <div class="book-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
      <div class="chapter-pill-row">
        <button class="chapter-pill sparkle active" data-chapter-target="1" aria-current="page" type="button" aria-label="Chapter 1: Welcome ‚Äì Invitation arrives">
          <div class="pill-number">1</div>
          <div class="pill-text">
            <div class="pill-title">Welcome</div>
            <div class="pill-detail">Invitation arrives</div>
          </div>
        </button>
        <button class="chapter-pill sparkle" data-chapter-target="2" type="button" aria-label="Chapter 2: Honey Hunt ‚Äì Play the honey game">
          <div class="pill-number">2</div>
          <div class="pill-text">
            <div class="pill-title">Honey Hunt</div>
            <div class="pill-detail">Play the honey game</div>
          </div>
        </button>
        <button class="chapter-pill sparkle" data-chapter-target="3" type="button" aria-label="Chapter 3: Gifts ‚Äì Pick thoughtful presents">
          <div class="pill-number">3</div>
          <div class="pill-text">
            <div class="pill-title">Gifts</div>
            <div class="pill-detail">Pick thoughtful presents</div>
          </div>
        </button>
        <button class="chapter-pill sparkle" data-chapter-target="4" type="button" aria-label="Chapter 4: Wishes ‚Äì Share love for Gunner">
          <div class="pill-number">4</div>
          <div class="pill-text">
            <div class="pill-title">Wishes</div>
            <div class="pill-detail">Share love for Gunner</div>
          </div>
        </button>
      </div>
    </div>

    <div class="book">
      <div class="pages-wrapper">
        <!-- Chapter 1: Welcome -->
        <div class="page active" data-chapter="1">
          <div class="chapter-header">
            <div class="chapter-number">Chapter One</div>
            <h1 class="chapter-title">A Special Day in the Hundred Acre Wood</h1>
            <div class="chapter-subtitle">An Invitation to Celebrate</div>
          </div>

          <div class="page-content">
            <div class="page-column">
              <p class="story-text">
                One fine spring day, in a corner of the Hundred Acre Wood where the sun shines warmly through the trees and the flowers bloom in cheerful colors, something wonderful was happening. All the forest friends were gathering, for there was to be a celebration unlike any other.
              </p>

              <p class="story-text">
                "What sort of celebration?" you might ask. Well, it was the very best sort‚Äîthe kind that welcomes a new little friend to the world. A baby boy named Gunner James was soon to arrive, and everyone in the Hundred Acre Wood wanted to share in the joy.
              </p>

            </div>

            <div class="page-column">
              <div class="party-details">
                <h3>You're Invited to Baby Gunner's Baby Shower! üéâ</h3>
                <div class="detail-item">
                  <div class="detail-icon">üë∂</div>
                  <div>
                    <strong>Celebrating:</strong> Gunner James<br>
                    <em style="color: var(--baby-blue);">It's a boy!</em>
                  </div>
                </div>
                <div class="detail-item">
                  <div class="detail-icon">üìÖ</div>
                  <div><strong>When:</strong> Saturday, June 15, 2024</div>
                </div>
                <div class="detail-item">
                  <div class="detail-icon">üïê</div>
                  <div><strong>Time:</strong> 2:00 PM - 4:00 PM</div>
                </div>
                <div class="detail-item">
                  <div class="detail-icon">üìç</div>
                  <div><strong>Where:</strong> 123 Honey Tree Lane</div>
                </div>
              </div>

              <div class="info-card sparkle">
                <h4>Make yourself cozy</h4>
                <p class="story-text" style="margin: 0; text-indent: 0; line-height: 1.6;">
                  Find a comfy spot under the trees, sip something warm, and enjoy the stories sprinkled throughout the pages as you explore the adventure.
                </p>
              </div>
            </div>
          </div>

          <div class="chapter-illustrations">
            <figure class="storybook-figure figure-theme-honey">
              <img src="Images/Characters/honey-bear.png" alt="Winnie the Pooh holding a honey pot and smiling">
              <div class="figure-copy">
                <div class="figure-name">Pooh brings the first pot</div>
                <div class="figure-note">‚ÄúA baby celebration needs extra honey,‚Äù he whispered as he dusted off the lid.</div>
              </div>
            </figure>
            <figure class="storybook-figure figure-theme-sky">
              <img src="Images/Characters/piglet.png" alt="Piglet carrying a tiny welcome banner">
              <div class="figure-copy">
                <div class="figure-name">Piglet pins up the banner</div>
                <div class="figure-note">He fluttered through the clearing making sure every friend felt warmly invited.</div>
              </div>
            </figure>
          </div>

          <p class="story-text">
            Winnie the Pooh, being a Bear of Very Little Brain but a Very Big Heart, knew that the most important thing for any celebration was honey. And not just a little honey, but lots and lots of it. After all, welcoming Baby Gunner was a Very Important Matter.
          </p>

          <p class="story-text">
            "But first," thought Pooh, looking up at his honey pots on the high shelf, "we'll need to gather more honey. Won't you help?"
          </p>

          <div class="divider">üå≥ ‚úø üêù ‚úø üå≥</div>
        </div>

        <!-- Chapter 2: The Game -->
        <div class="page" data-chapter="2">
          <div class="chapter-header">
            <div class="chapter-number">Chapter Two</div>
            <h1 class="chapter-title">Pooh's Honey Gathering Adventure</h1>
            <div class="chapter-subtitle">A Game of Skill and Sweetness</div>
          </div>

          <div class="chapter-illustrations">
            <figure class="storybook-figure figure-theme-forest">
              <img src="Images/Characters/tigger.png" alt="Tigger bouncing with excitement">
              <div class="figure-copy">
                <div class="figure-name">Tigger stakes out the course</div>
                <div class="figure-note">He marked the path with springy footprints so every honey pot felt like an adventure to catch.</div>
              </div>
            </figure>
            <figure class="storybook-figure figure-theme-honey">
              <img src="Images/Characters/roo.png" alt="Roo cheering with a scarf in his paws">
              <div class="figure-copy">
                <div class="figure-name">Roo cheers from the sidelines</div>
                <div class="figure-note">‚ÄúMind the bees!‚Äù he giggled, handing out cozy scarves for anyone joining the run.</div>
              </div>
            </figure>
          </div>

       <section class="game-card">
  <header class="game-card-header">
    <div class="game-title">
      <span class="game-kicker">Mini Game</span>
      <h3>Ready, Set, Honey Run</h3>
    </div>
    <div class="best-score-strip">
      üèÜ Best <strong id="gameHighScore">0</strong>
    </div>
  </header>

  <!-- LIVE HUD -->
  <div class="hud">
    <div class="hud-item pulse" id="hudScore">‚≠ê <span id="score">0</span></div>
    <div class="hud-item">üçØ <span id="honey">0</span></div>
    <div class="hud-item hearts" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    <div class="hud-item clock">‚è± <span id="time">60</span></div>
  </div>

  <div class="hud hud-secondary">
    <div class="hud-item">üèÖ Honey Best <span id="bestHoney">0</span></div>
    <div class="hud-item">üî• Combo Best <span id="bestCombo">0</span></div>
    <div class="hud-item" id="comboBadge">Combo x<span id="combo">0</span></div>
    <div class="hud-item" id="statusBadge" role="status">Ready to play!</div>
  </div>

  <!-- GAME CANVAS AREA (UNCHANGED) -->
  <div class="canvas-shell">
    <canvas id="gameCanvas"></canvas>

    <div class="game-overlay" id="gameOverlay" aria-live="polite" role="status">
      <div class="overlay-card">
        <div class="overlay-icon" id="overlayIcon">üçØ</div>
        <h3 id="overlayTitle">Ready to Play</h3>
        <p id="overlayMessage">Help Pooh catch honey and dodge the bees!</p>
        <button class="btn primary overlay-action" id="overlayButton">Start Adventure</button>
      </div>
    </div>

    <div class="touch-controls" aria-label="Touch controls">
      <button class="touch-btn" id="leftBtn" aria-label="Move left">‚Üê</button>
      <button class="touch-btn" id="rightBtn" aria-label="Move right">‚Üí</button>
    </div>
  </div>

  <!-- CONTROLS -->
  <div class="game-controls">
    <div class="difficulty-row">
      <button class="difficulty-btn active" data-diff="easy">Easy</button>
      <button class="difficulty-btn" data-diff="normal">Normal</button>
      <button class="difficulty-btn" data-diff="cozy">Cozy</button>
    </div>

    <div class="action-row">
      <button class="btn primary" onclick="Game.start()">‚ñ∂ Start</button>
      <button class="btn warning" onclick="Game.togglePause()">‚è∏ Pause</button>
      <button class="btn secondary" onclick="Game.reset()">‚Üª Reset</button>
    </div>
  </div>
</section>

<div class="achievement-toast" id="achievementToast" role="status" aria-live="polite">
  <div class="toast-icon">üèÜ</div>
  <div>
    <div class="toast-title">Achievement Unlocked!</div>
    <div class="toast-text" id="achievementText">Sweet streak!</div>
  </div>
</div>
      </div>

      <!-- Chapter 3: Registry & Details -->
        <div class="page" data-chapter="3">
          <header style="text-align: center; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 3px double #dfe6e9;">
            <div style="font-size: 0.9rem; color: #d63031; text-transform: uppercase; letter-spacing: 2px; font-weight: bold; margin-bottom: 0.5rem;">Chapter Three</div>
            <h2 style="font-size: clamp(2rem, 4vw, 3rem); color: #2d3436; font-family: 'Georgia', serif; margin: 0.5rem 0; line-height: 1.3;">Gifts from the Heart</h2>
            <div style="font-style: italic; color: #636e72; font-size: 1.1rem; margin-top: 0.75rem;">Preparing for Baby Gunner</div>
          </header>

          <p style="font-family: 'Georgia', serif; font-size: 1.1rem; line-height: 1.8; color: #2d3436; text-indent: 2em; margin-bottom: 1.5rem;">
            With the honey safely gathered, Pooh and his friends began to think about what else a baby bear‚Äîor rather, a baby boy‚Äîmight need. Piglet suggested soft blankets. Eeyore thought practical things might be useful. Tigger bounced excitedly about toys.
          </p>

          <p style="font-family: 'Georgia', serif; font-size: 1.1rem; line-height: 1.8; color: #2d3436; text-indent: 2em; margin-bottom: 2rem;">
            "The most important thing," said Pooh wisely, "is that Baby Gunner knows he is loved. But if you'd like to bring a gift, his parents have made a list of things that might be helpful."
          </p>

          <div class="chapter-illustrations">
            <figure class="storybook-figure figure-theme-forest">
              <img src="Images/Characters/eeyore.png" alt="Eeyore carrying a soft blanket over his back">
              <div class="figure-copy">
                <div class="figure-name">Eeyore packs the cozy things</div>
                <div class="figure-note">He chose the softest blanket he could find so Baby Gunner would always feel snug.</div>
              </div>
            </figure>
            <figure class="storybook-figure figure-theme-sky">
              <img src="Images/Characters/owl.png" alt="Owl holding a rolled-up list of gifts">
              <div class="figure-copy">
                <div class="figure-name">Owl keeps the registry tidy</div>
                <div class="figure-note">With a wise nod, he made sure every thoughtful idea fluttered into the right chapter.</div>
              </div>
            </figure>
          </div>

          <aside style="background: linear-gradient(135deg, #fff5e6, #fffaf0); border: 3px solid #ffd700; padding: 2.5rem; border-radius: 20px; margin: 2rem 0; box-shadow: 0 8px 30px rgba(255,215,0,0.3); text-align: center;">
            <div style="font-size: 4rem; margin-bottom: 1rem; animation: bounce 2s ease-in-out infinite;">üéÅ</div>
            <h3 style="color: #1976d2; margin-bottom: 1.5rem; font-size: 2rem; font-family: 'Georgia', serif;">Baby Gunner's Registry</h3>
            <p style="margin-bottom: 2rem; font-size: 1.1rem; color: #2d3436; line-height: 1.6;">Your presence is the greatest present, but if you'd like to help welcome our little one:</p>

            <nav style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; max-width: 600px; margin: 0 auto;">
              <a href="https://www.target.com/gift-registry/" target="_blank" rel="noopener noreferrer" style="display: flex; align-items: center; justify-content: center; gap: 1rem; padding: 1.5rem; background: white; border: 2px solid #cc0000; border-radius: 16px; text-decoration: none; color: #cc0000; font-weight: bold; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 6px 20px rgba(204,0,0,0.2);">
                <span style="font-size: 2rem;">üéØ</span>
                <span>Target Registry</span>
              </a>
              <a href="https://www.amazon.com/baby-reg/" target="_blank" rel="noopener noreferrer" style="display: flex; align-items: center; justify-content: center; gap: 1rem; padding: 1.5rem; background: white; border: 2px solid #ff9900; border-radius: 16px; text-decoration: none; color: #ff9900; font-weight: bold; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 6px 20px rgba(255,153,0,0.2);">
                <span style="font-size: 2rem;">üì¶</span>
                <span>Amazon Registry</span>
              </a>
            </nav>
          </aside>

          <div style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 2rem; border-radius: 16px; box-shadow: 0 6px 20px rgba(33,150,243,0.2); margin: 2rem 0;">
            <h3 style="color: #1976d2; font-size: 1.8rem; margin: 0 0 1.5rem 0; text-align: center; font-family: 'Georgia', serif;">Nursery Theme & Details üß∏</h3>
            <dl style="margin: 0;">
              <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px;">
                <dt style="font-size: 2rem; flex-shrink: 0;">üé®</dt>
                <dd style="margin: 0; line-height: 1.6;"><strong style="color: #1976d2;">Theme:</strong> Hundred Acre Wood / Woodland Bears</dd>
              </div>
              <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px;">
                <dt style="font-size: 2rem; flex-shrink: 0;">üíô</dt>
                <dd style="margin: 0; line-height: 1.6;"><strong style="color: #1976d2;">Nursery Colors:</strong> Adventure Blue, Honey Gold, Forest Green</dd>
              </div>
              <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px;">
                <dt style="font-size: 2rem; flex-shrink: 0;">üß∏</dt>
                <dd style="margin: 0; line-height: 1.6;"><strong style="color: #1976d2;">First Toy:</strong> Classic Winnie the Pooh Bear</dd>
              </div>
              <div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px;">
                <dt style="font-size: 2rem; flex-shrink: 0;">üìö</dt>
                <dd style="margin: 0; line-height: 1.6;"><strong style="color: #1976d2;">Favorite Book:</strong> "The House at Pooh Corner"</dd>
              </div>
            </dl>
          </div>

          <p style="font-family: 'Georgia', serif; font-size: 1.1rem; line-height: 1.8; color: #2d3436; text-indent: 2em; margin-bottom: 1.5rem;">
            And so the preparations continued, with each friend contributing something special to welcome the newest member of their woodland family.
          </p>

          <div style="text-align: center; margin: 3rem 0; padding: 2rem 0; border-top: 2px dashed #dfe6e9; border-bottom: 2px dashed #dfe6e9;">
            <span style="font-size: 1.5rem; color: #d4a017;">üå≥ ‚úø üêù ‚úø üå≥</span>
          </div>
        </div>

        <!-- Chapter 4: Wishes -->
        <div class="page" data-chapter="4">
          <header style="text-align: center; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 3px double #dfe6e9;">
            <div style="font-size: 0.9rem; color: #d63031; text-transform: uppercase; letter-spacing: 2px; font-weight: bold; margin-bottom: 0.5rem;">Chapter Four</div>
            <h2 style="font-size: clamp(2rem, 4vw, 3rem); color: #2d3436; font-family: 'Georgia', serif; margin: 0.5rem 0; line-height: 1.3;">Wishes for Baby Gunner</h2>
            <div style="font-style: italic; color: #636e72; font-size: 1.1rem; margin-top: 0.75rem;">Words of Love and Wisdom</div>
          </header>

          <p style="font-family: 'Georgia', serif; font-size: 1.1rem; line-height: 1.8; color: #2d3436; text-indent: 2em; margin-bottom: 2rem;">
            As the sun began to set over the Hundred Acre Wood, casting long golden shadows through the trees, Pooh and his friends gathered to share their wishes for Baby Gunner. Each friend had something special to say.
          </p>

          <div class="chapter-illustrations">
            <figure class="storybook-figure figure-theme-honey">
              <img src="Images/Characters/honey-bear.png" alt="Pooh offering a honey pot with a gentle smile">
              <div class="figure-copy">
                <div class="figure-name">Pooh whispers a blessing</div>
                <div class="figure-note">He set aside one golden pot marked ‚ÄúFor Gunner‚Äù to open on a future, happy day.</div>
              </div>
            </figure>
            <figure class="storybook-figure figure-theme-sky">
              <img src="Images/Characters/Gunnar.png" alt="Illustration of Baby Gunner bundled in a soft blanket">
              <div class="figure-copy">
                <div class="figure-name">A peek at Baby Gunner</div>
                <div class="figure-note">Wrapped in cuddles and woodland stories, he‚Äôs already part of every page.</div>
              </div>
            </figure>
          </div>

          <aside style="background: linear-gradient(135deg, #fff5e6, #fffaf0); border-left: 6px solid #ffd700; padding: 2rem; border-radius: 12px; margin: 2rem 0; box-shadow: 0 6px 20px rgba(255,215,0,0.2);">
            <blockquote style="margin: 0; font-style: italic; line-height: 2; font-size: 1.05rem; color: #2d3436;">
              <p style="margin-bottom: 1.5rem;"><strong style="color: #d63031;">Pooh said:</strong> "May you always have honey when you need it, and friends when you want them."</p>
              <p style="margin-bottom: 1.5rem;"><strong style="color: #d63031;">Piglet squeaked:</strong> "May you be brave, even when you feel small."</p>
              <p style="margin-bottom: 1.5rem;"><strong style="color: #d63031;">Eeyore added:</strong> "May you find sunshine, even on cloudy days."</p>
              <p style="margin: 0;"><strong style="color: #d63031;">Tigger bounced:</strong> "May you have the most wonderful things happen to you, and the most wonderful adventures!"</p>
            </blockquote>
          </aside>

          <p style="font-family: 'Georgia', serif; font-size: 1.1rem; line-height: 1.8; color: #2d3436; text-indent: 2em; margin-bottom: 2rem;">
            Now it's your turn! Leave your wishes, advice, or memories for Baby Gunner and his family.
          </p>

          <div style="background: white; border: 3px solid #ffd700; padding: 2.5rem; border-radius: 20px; box-shadow: 0 8px 30px rgba(255,215,0,0.3); margin: 2rem 0;">
            <h3 style="text-align: center; color: #d4a017; margin-bottom: 2rem; font-size: 1.8rem; font-family: 'Georgia', serif;">
              Share Your Wishes <span style="animation: bounce 2s ease-in-out infinite; display: inline-block;">üçØ</span>
            </h3>
            <form id="wishesForm">
              <div style="margin-bottom: 1.5rem;">
                <label for="guestName" style="display: block; font-weight: bold; color: #2d3436; margin-bottom: 0.5rem; font-size: 1.05rem;">Your Name:</label>
                <input type="text" id="guestName" placeholder="Enter your name" required style="width: 100%; padding: 1rem; border: 2px solid #dfe6e9; border-radius: 12px; font-size: 1rem; transition: border-color 0.3s ease; box-sizing: border-box;">
              </div>
              <div style="margin-bottom: 1.5rem;">
                <label for="wishMessage" style="display: block; font-weight: bold; color: #2d3436; margin-bottom: 0.5rem; font-size: 1.05rem;">Your Wish or Advice for Baby Gunner:</label>
                <textarea id="wishMessage" placeholder="Share your wisdom, hopes, or a favorite memory..." required style="width: 100%; padding: 1rem; border: 2px solid #dfe6e9; border-radius: 12px; font-size: 1rem; min-height: 120px; resize: vertical; font-family: inherit; transition: border-color 0.3s ease; box-sizing: border-box;"></textarea>
              </div>
              <div id="wishFeedback" role="status" aria-live="polite" style="margin-bottom: 1rem; padding: 1rem; border-radius: 8px; display: none;"></div>
              <button type="submit" style="width: 100%; padding: 1.25rem; background: linear-gradient(135deg, #00b894, #00cec9); border: none; border-radius: 12px; color: white; font-size: 1.2rem; font-weight: bold; cursor: pointer; box-shadow: 0 6px 20px rgba(0,184,148,0.4); transition: all 0.3s ease;">üìù Add to Guestbook</button>
            </form>
          </div>

          <div id="wishesDisplay" style="margin-top: 3rem;">
            <!-- Wishes appear here -->
          </div>

          <p style="font-family: 'Georgia', serif; font-size: 1.1rem; line-height: 1.8; color: #2d3436; text-align: center; font-style: italic; margin-top: 3rem;">
            And so, with honey gathered, gifts prepared, and wishes shared, everyone in the Hundred Acre Wood looked forward to the day they would meet Baby Gunner. For as Pooh always said, "How lucky I am to have something that makes saying goodbye so hard." But in this case, they were all ready to say hello.
          </p>

          <div style="text-align: center; margin-top: 3rem; padding: 2.5rem; background: white; border-radius: 16px; box-shadow: 0 6px 25px rgba(0,0,0,0.1); animation: fadeIn 3s ease;">
            <div style="font-size: 4rem; margin-bottom: 1rem; animation: pulse 2s ease-in-out infinite;">üíô</div>
            <div style="font-size: 1.8rem; color: #d63031; font-weight: bold; font-family: 'Georgia', serif; margin-bottom: 0.75rem;">
              Welcome to the world, Baby Gunner!
            </div>
            <div style="font-size: 1.1rem; font-style: italic; color: #636e72;">
              With love from all your family and friends
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <nav style="display: flex; justify-content: space-between; align-items: center; padding: 2rem; background: linear-gradient(to top, #fef9f3, transparent); border-top: 2px solid #f0f0f0; gap: 1rem; flex-wrap: wrap;">
        <button style="padding: 1rem 2rem; background: linear-gradient(135deg, #636e72, #2d3436); border: none; border-radius: 12px; color: white; font-weight: bold; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(45,52,54,0.3); transition: all 0.3s ease; min-width: 180px;" id="prevBtn" onclick="previousPage()">
          ‚Üê Previous Chapter
        </button>
        <div id="pageIndicator" style="font-weight: bold; color: #d63031; font-size: 1.1rem; padding: 0.75rem 1.5rem; background: white; border-radius: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); white-space: nowrap;">
          Chapter 1 of 4
        </div>
        <button style="padding: 1rem 2rem; background: linear-gradient(135deg, #00b894, #00cec9); border: none; border-radius: 12px; color: white; font-weight: bold; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(0,184,148,0.4); transition: all 0.3s ease; min-width: 180px;" id="nextBtn" onclick="nextPage()">
          Next Chapter ‚Üí
        </button>
      </nav>
    </div>
  </div>

  <footer style="background: linear-gradient(135deg, #2d3436, #636e72); color: white; padding: 2rem 1rem; text-align: center; margin-top: 3rem;">
    <p style="margin: 0; font-size: 0.95rem; opacity: 0.9;">
      Made with üíô and üçØ for Baby Gunner's special day
    </p>
  </footer>

  <script>
    // ===== STORYBOOK NAVIGATION =====
    let currentChapter = 1;
    const totalChapters = 4;
    const pageIndicator = document.getElementById('pageIndicator');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const progressFill = document.getElementById('progressFill');
    const chapterPills = Array.from(document.querySelectorAll('.chapter-pill'));

    function showChapter(ch) {
      const currentPage = document.querySelector('[data-chapter="' + currentChapter + '"]');
      const nextPageEl = document.querySelector('[data-chapter="' + ch + '"]');
      if (!nextPageEl || currentChapter === ch) return;

      currentPage.classList.add('exiting');
      setTimeout(() => {
        currentPage.classList.remove('active', 'exiting');
        nextPageEl.classList.add('active');
        currentChapter = ch;
        updateNavigation();
      }, 600);
    }

    function nextPage() {
      if (currentChapter < totalChapters) {
        showChapter(currentChapter + 1);
      }
    }

    function previousPage() {
      if (currentChapter > 1) {
        showChapter(currentChapter - 1);
      }
    }

    function updateNavigation() {
      if (prevBtn && nextBtn) {
        prevBtn.disabled = currentChapter === 1;
        nextBtn.disabled = currentChapter === totalChapters;
      }

      if (pageIndicator) {
        const completed = Math.max(0, currentChapter - 1);
        pageIndicator.textContent = `Chapter ${currentChapter} of ${totalChapters}`;
      }

      const progress = totalChapters > 1
        ? ((currentChapter - 1) / (totalChapters - 1)) * 100
        : 100;
      if (progressFill) {
        progressFill.style.width = progress + '%';
        progressFill.setAttribute('aria-valuenow', progress.toFixed(0));
      }

      chapterPills.forEach((pill) => {
        const target = Number(pill.dataset.chapterTarget);
        const isActive = target === currentChapter;
        pill.classList.toggle('active', isActive);
        pill.classList.toggle('visited', target < currentChapter);
        pill.setAttribute('aria-current', isActive ? 'page' : 'false');
      });
    }

    chapterPills.forEach((pill) => {
      pill.addEventListener('click', () => {
        const targetChapter = Number(pill.dataset.chapterTarget);
        showChapter(targetChapter);
      });
    });

    // ===== GAME LOGIC =====
    let canvas, ctx;
    let gameState = 'idle';
    let score = 0;
    let honeyCollected = 0;
    let bestScore = 0;
    let bestHoney = 0;
    let bestCombo = 0;
    let combo = 0;
    let lives = 3;
    let timeLeft = 60;
    let difficulty = 'easy';
    let gameInterval, timerInterval, dropInterval, beeInterval, powerInterval;
    let hitFlash = 0;
    const isTouchDevice = 'ontouchstart' in window;

    let player = { x: 0, y: 0, width: 60, height: 90, speed: isTouchDevice ? 6 : 5 };
    let drops = [];
    let bees = [];
    let sparkles = [];
    let powerups = [];
    const activeEffects = {
      shield: false,
      magnetUntil: 0,
      doubleUntil: 0
    };

    const difficulties = {
      easy: { dropSpeed: 2, beeSpeed: 1.5, dropFreq: 1500, beeFreq: 3000, dropValue: 10 },
      normal: { dropSpeed: 3, beeSpeed: 2.4, dropFreq: 1000, beeFreq: 2000, dropValue: 14 },
      cozy: { dropSpeed: 1.6, beeSpeed: 1.1, dropFreq: 1800, beeFreq: 3200, dropValue: 8 }
    };

    let keys = { left: false, right: false };

    // ===== GAME FUNCTIONS =====
    const Game = {
      init: function() {
        canvas = document.getElementById('gameCanvas');
        if (!canvas) {
          console.error('Game canvas not found!');
          return;
        }
        ctx = canvas.getContext('2d');

        this.overlay = document.getElementById('gameOverlay');
        this.overlayButton = document.getElementById('overlayButton');
        this.overlayTitle = document.getElementById('overlayTitle');
        this.overlayMessage = document.getElementById('overlayMessage');
        this.overlayIcon = document.getElementById('overlayIcon');

        if (this.overlayButton) {
          this.overlayButton.addEventListener('click', () => {
            if (gameState === 'paused') {
              this.resume();
            } else {
              this.start();
            }
          });
        }

        const sizeCanvas = () => {
          const container = canvas.parentElement;
          const maxWidth = Math.min(520, container.offsetWidth - 28);
          canvas.width = Math.max(220, maxWidth);
          canvas.height = Math.max(240, Math.min(420, Math.round(canvas.width * (window.innerWidth < 640 ? 0.75 : 0.85))));
        };

        sizeCanvas();

        player.x = canvas.width / 2 - player.width / 2;
        player.y = canvas.height - player.height - 18;

        // Keyboard controls
        document.addEventListener('keydown', this.handleKeyDown);
        document.addEventListener('keyup', this.handleKeyUp);

        // Touch controls
        let isDragging = false;

        canvas.addEventListener('touchstart', (e) => {
          isDragging = true;
          this.handleTouch(e);
        }, { passive: false });

        canvas.addEventListener('touchmove', (e) => {
          if (isDragging) this.handleTouch(e);
        }, { passive: false });

        canvas.addEventListener('touchend', () => { isDragging = false; });

        // Mouse controls
        canvas.addEventListener('mousedown', () => { isDragging = true; });
        canvas.addEventListener('mousemove', (e) => {
          if (isDragging && gameState === 'playing') {
            const rect = canvas.getBoundingClientRect();
            player.x = e.clientX - rect.left - player.width / 2;
            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
          }
        });
        canvas.addEventListener('mouseup', () => { isDragging = false; });
        canvas.addEventListener('mouseleave', () => { isDragging = false; });

        // Mobile buttons
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        if (leftBtn) {
          leftBtn.addEventListener('touchstart', () => { keys.left = true; }, { passive: true });
          leftBtn.addEventListener('touchend', () => { keys.left = false; }, { passive: true });
        }

        if (rightBtn) {
          rightBtn.addEventListener('touchstart', () => { keys.right = true; }, { passive: true });
          rightBtn.addEventListener('touchend', () => { keys.right = false; }, { passive: true });
        }

        // Difficulty buttons
        document.querySelectorAll('.difficulty-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const level = btn.dataset.diff;
            Game.setDifficulty(level);
          });
        });

        this.draw();

        this.showOverlay('Ready to Play', 'Catch honey, avoid bees, and chase your best streak!', 'üçØ', 'Start Adventure');
        this.updateStatus('Ready to play!');

        window.addEventListener('resize', () => {
          const oldWidth = canvas.width;
          sizeCanvas();
          player.x = (player.x / oldWidth) * canvas.width;
          this.draw();
        });

        console.log('Game initialized successfully');
      },

      handleKeyDown: function(e) {
        if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') keys.left = true;
        if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') keys.right = true;
        if (e.key === ' ') {
          e.preventDefault();
          Game.togglePause();
        }
        if (e.key === 'r' || e.key === 'R') {
          Game.reset();
        }
      },

      handleKeyUp: function(e) {
        if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') keys.left = false;
        if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') keys.right = false;
      },

      handleTouch: function(e) {
        if (gameState !== 'playing') return;
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches[0];
        player.x = touch.clientX - rect.left - player.width / 2;
        player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
      },

      setDifficulty: function(level) {
        difficulty = level;
        document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
        const btn = document.querySelector(`[data-diff="${level}"]`);
        if (btn) btn.classList.add('active');
        console.log('Difficulty set to:', level);
      },

      start: function() {
        if (gameState === 'playing') return;

        gameState = 'playing';
        score = 0;
        honeyCollected = 0;
        combo = 0;
        lives = 3;
        hitFlash = 0;
        timeLeft = 60;
        drops = [];
        bees = [];
        sparkles = [];
        powerups = [];
        activeEffects.shield = false;
        activeEffects.magnetUntil = 0;
        activeEffects.doubleUntil = 0;

        this.hideOverlay();
        this.updateDisplay();
        this.startLoops();
        this.updateStatus('Go! Catch the honey!');

        console.log('Game started');
      },

      startLoops: function() {
        this.clearIntervals();
        gameInterval = setInterval(() => this.loop(), 1000 / 60);

        timerInterval = setInterval(() => {
          if (gameState !== 'playing') return;
          timeLeft--;
          document.getElementById('time').textContent = timeLeft;
          if (timeLeft <= 0) {
            this.end();
          }
        }, 1000);

        this.startSpawners();
      },

      startSpawners: function() {
        const diff = difficulties[difficulty];
        this.clearSpawnerIntervals();

        dropInterval = setInterval(() => {
          if (gameState !== 'playing') return;
          drops.push({
            x: Math.random() * (canvas.width - 20),
            y: -20,
            width: 20,
            height: 30,
            speed: diff.dropSpeed,
            value: diff.dropValue,
            type: 'honey'
          });
        }, diff.dropFreq);

        beeInterval = setInterval(() => {
          if (gameState !== 'playing') return;
          bees.push({
            x: Math.random() * (canvas.width - 30),
            y: -30,
            width: 30,
            height: 25,
            speed: diff.beeSpeed,
            type: 'bee'
          });
        }, diff.beeFreq);

        powerInterval = setInterval(() => {
          if (gameState !== 'playing') return;
          if (Math.random() < 0.2) this.spawnPowerup();
        }, 4000);
      },

      clearSpawnerIntervals: function() {
        if (dropInterval) clearInterval(dropInterval);
        if (beeInterval) clearInterval(beeInterval);
        if (powerInterval) clearInterval(powerInterval);
      },

      clearIntervals: function() {
        if (gameInterval) clearInterval(gameInterval);
        if (timerInterval) clearInterval(timerInterval);
        this.clearSpawnerIntervals();
      },

      togglePause: function() {
        if (gameState === 'playing') {
          this.pause();
        } else if (gameState === 'paused') {
          this.resume();
        }
      },

      pause: function() {
        if (gameState !== 'playing') return;
        gameState = 'paused';
        this.clearIntervals();
        this.showOverlay('Game Paused', 'Take a breather then keep catching honey!', '‚è∏', 'Continue');
        this.updateStatus('Paused');
      },

      resume: function() {
        if (gameState !== 'paused') return;
        gameState = 'playing';
        this.hideOverlay();
        this.startLoops();
        this.updateStatus('Back to the adventure!');
      },

      reset: function() {
        gameState = 'idle';
        this.clearIntervals();

        score = 0;
        honeyCollected = 0;
        combo = 0;
        lives = 3;
        timeLeft = 60;
        drops = [];
        bees = [];
        sparkles = [];
        powerups = [];
        activeEffects.shield = false;
        activeEffects.magnetUntil = 0;
        activeEffects.doubleUntil = 0;

        player.x = canvas.width / 2 - player.width / 2;
        player.y = canvas.height - player.height - 18;

        this.updateDisplay();
        this.draw();
        this.showOverlay('Reset & Ready', 'Press start to begin a new honey run!', 'üîÑ', 'Start Adventure');
        this.updateStatus('Ready to play!');

        console.log('Game reset');
      },

      end: function() {
        gameState = 'over';
        this.clearIntervals();

        // Update best scores
        if (score > bestScore) {
          bestScore = score;
          document.getElementById('gameHighScore').textContent = bestScore;
          this.showAchievement('New High Score!');
        }
        if (honeyCollected > bestHoney) {
          bestHoney = honeyCollected;
          this.showAchievement('Most Honey Yet!');
        }

        if (combo > bestCombo) {
          bestCombo = combo;
          this.showAchievement('Sweetest Combo!');
        }

        this.saveBestStats();
        this.updateDisplay();
        this.showOverlay('Game Over', `Score: ${score}<br>Honey: ${honeyCollected}<br>Best Combo: x${bestCombo}`, 'üêù', 'Play Again');
        this.updateStatus('Game over ‚Äî try again!');

        console.log('Game ended');
      },

      spawnPowerup: function() {
        const options = [
          { type: 'shield', color: '#64b5f6', symbol: 'üõ°Ô∏è', note: 'Blocks one bee hit' },
          { type: 'magnet', color: '#e57373', symbol: 'üß≤', note: 'Pulls honey toward you' },
          { type: 'double', color: '#81c784', symbol: '2Ô∏è‚É£', note: 'Double honey points' }
        ];
        const pick = options[Math.floor(Math.random() * options.length)];

        powerups.push({
          x: Math.random() * (canvas.width - 26),
          y: -30,
          width: 26,
          height: 26,
          speed: 2.2,
          ...pick
        });
      },

      loop: function() {
        if (gameState !== 'playing') return;

        // Update player position based on keys
        if (keys.left) {
          player.x -= player.speed;
        }
        if (keys.right) {
          player.x += player.speed;
        }
        player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));

        const now = Date.now();
        const magnetActive = activeEffects.magnetUntil > now;
        const doubleActive = activeEffects.doubleUntil > now;
        const playerCenter = player.x + player.width / 2;

        // Update drops
        for (let i = drops.length - 1; i >= 0; i--) {
          const drop = drops[i];
          drop.y += drop.speed;
          if (magnetActive) {
            const dropCenter = drop.x + drop.width / 2;
            drop.x += (playerCenter - dropCenter) * 0.03;
          }

          if (this.checkCollision(drop, player)) {
            const points = (drop.value || 10) * (doubleActive ? 2 : 1);
            score += points;
            honeyCollected++;
            combo++;
            bestCombo = Math.max(bestCombo, combo);
            sparkles.push({
              x: drop.x + 10,
              y: drop.y + 10,
              life: 22
            });
            drops.splice(i, 1);
            if (combo > 0 && combo % 5 === 0) {
              this.showAchievement(`${combo}x Combo!`);
            }
            this.updateDisplay();
          } else if (drop.y > canvas.height) {
            drops.splice(i, 1);
            combo = 0;
          }
        }

        // Update powerups
        for (let i = powerups.length - 1; i >= 0; i--) {
          const power = powerups[i];
          power.y += power.speed;

          if (this.checkCollision(power, player)) {
            this.activatePowerup(power);
            powerups.splice(i, 1);
            this.updateDisplay();
          } else if (power.y > canvas.height) {
            powerups.splice(i, 1);
          }
        }

        // Update bees
        for (let i = bees.length - 1; i >= 0; i--) {
          const bee = bees[i];
          bee.y += bee.speed;

          if (this.checkCollision(bee, player)) {
            if (activeEffects.shield) {
              activeEffects.shield = false;
              this.updateStatus('Shield blocked a bee!');
            } else {
              lives--;
              combo = 0;
            }
            bees.splice(i, 1);
            hitFlash = 16;
            this.updateDisplay();

            if (lives <= 0) {
              this.end();
            }
          } else if (bee.y > canvas.height) {
            bees.splice(i, 1);
          }
        }

        // Update sparkles
        sparkles.forEach((s, i) => {
          s.life--;
          s.y += 0.5;
          if (s.life <= 0) sparkles.splice(i, 1);
        });

        this.draw();
      },

      checkCollision: function(obj1, obj2) {
        return obj1.x < obj2.x + obj2.width &&
               obj1.x + obj1.width > obj2.x &&
               obj1.y < obj2.y + obj2.height &&
               obj1.y + obj1.height > obj2.y;
      },

      draw: function() {
        if (!ctx) return;

        // Clear
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Sky gradient
        const skyGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
        skyGradient.addColorStop(0, '#8cd3ff');
        skyGradient.addColorStop(0.45, '#87CEEB');
        skyGradient.addColorStop(0.9, '#d1f3ff');
        ctx.fillStyle = skyGradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Soft distant hills
        ctx.fillStyle = '#b7d7a8';
        ctx.beginPath();
        ctx.moveTo(0, canvas.height - 80);
        ctx.quadraticCurveTo(canvas.width * 0.25, canvas.height - 120, canvas.width * 0.5, canvas.height - 80);
        ctx.quadraticCurveTo(canvas.width * 0.75, canvas.height - 40, canvas.width, canvas.height - 70);
        ctx.lineTo(canvas.width, canvas.height);
        ctx.lineTo(0, canvas.height);
        ctx.closePath();
        ctx.fill();

        // Ground
        ctx.fillStyle = '#6fa45a';
        ctx.fillRect(0, canvas.height - 40, canvas.width, 40);

        // Simple trees
        ctx.fillStyle = 'rgba(74, 94, 62, 0.7)';
        for (let i = 0; i < 4; i++) {
          const baseX = (canvas.width / 4) * i + 20;
          ctx.fillRect(baseX, canvas.height - 70, 20, 30);
          ctx.beginPath();
          ctx.moveTo(baseX - 20, canvas.height - 70);
          ctx.lineTo(baseX + 10, canvas.height - 120);
          ctx.lineTo(baseX + 40, canvas.height - 70);
          ctx.closePath();
          ctx.fill();
        }

        // Pooh ears
        ctx.fillStyle = '#f4c16e';
        ctx.beginPath();
        ctx.arc(player.x + 18, player.y + 10, 8, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(player.x + 42, player.y + 10, 8, 0, Math.PI * 2);
        ctx.fill();

        // Pooh head
        ctx.beginPath();
        ctx.arc(player.x + 30, player.y + 26, 20, 0, Math.PI * 2);
        ctx.fill();

        // Face
        ctx.fillStyle = '#2b1810';
        ctx.beginPath();
        ctx.arc(player.x + 23, player.y + 22, 3, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(player.x + 37, player.y + 22, 3, 0, Math.PI * 2);
        ctx.fill();

        ctx.beginPath();
        ctx.arc(player.x + 30, player.y + 28, 3, 0, Math.PI * 2);
        ctx.fill();

        ctx.beginPath();
        ctx.arc(player.x + 30, player.y + 33, 7, 0, Math.PI);
        ctx.strokeStyle = '#2b1810';
        ctx.lineWidth = 1.5;
        ctx.stroke();

        // Body + shirt
        ctx.fillStyle = '#f4c16e';
        ctx.fillRect(player.x + 14, player.y + 40, 32, 30);
        ctx.fillStyle = '#d32f2f';
        ctx.fillRect(player.x + 12, player.y + 40, 36, 18);

        // Arms
        ctx.fillStyle = '#f4c16e';
        ctx.fillRect(player.x + 6, player.y + 44, 10, 14);
        ctx.fillRect(player.x + 44, player.y + 44, 10, 14);

        // Barrel
        ctx.fillStyle = '#8b6f47';
        ctx.beginPath();
        ctx.moveTo(player.x, player.y + 60);
        ctx.lineTo(player.x + 60, player.y + 60);
        ctx.quadraticCurveTo(player.x + 56, player.y + 96, player.x + 30, player.y + 100);
        ctx.quadraticCurveTo(player.x + 4, player.y + 96, player.x, player.y + 60);
        ctx.closePath();
        ctx.fill();

        ctx.strokeStyle = '#5a4a3a';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Barrel bands
        ctx.beginPath();
        ctx.moveTo(player.x + 4, player.y + 72);
        ctx.lineTo(player.x + 56, player.y + 72);
        ctx.moveTo(player.x + 4, player.y + 88);
        ctx.lineTo(player.x + 56, player.y + 88);
        ctx.stroke();

        // Honey drops
        drops.forEach(drop => {
          ctx.fillStyle = '#f4a944';
          ctx.beginPath();
          ctx.ellipse(drop.x + 10, drop.y + 15, 10, 15, 0, 0, Math.PI * 2);
          ctx.fill();

          ctx.fillStyle = '#fff5d6';
          ctx.beginPath();
          ctx.ellipse(drop.x + 8, drop.y + 10, 3, 5, 0, 0, Math.PI * 2);
          ctx.fill();
        });

        // Bees
        bees.forEach(bee => {
          ctx.fillStyle = '#f4a944';
          ctx.fillRect(bee.x + 5, bee.y + 5, 22, 16);

          ctx.fillStyle = '#2b1810';
          ctx.fillRect(bee.x + 8, bee.y + 5, 3, 16);
          ctx.fillRect(bee.x + 15, bee.y + 5, 3, 16);
          ctx.fillRect(bee.x + 20, bee.y + 5, 3, 16);

          ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
          ctx.beginPath();
          ctx.ellipse(bee.x + 10, bee.y + 2, 7, 5, -0.3, 0, Math.PI * 2);
          ctx.fill();
          ctx.beginPath();
          ctx.ellipse(bee.x + 22, bee.y + 2, 7, 5, 0.3, 0, Math.PI * 2);
          ctx.fill();
        });

        // Power-ups
        powerups.forEach(power => {
          ctx.fillStyle = power.color;
          ctx.fillRect(power.x, power.y, power.width, power.height);
          ctx.fillStyle = 'white';
          ctx.font = '16px "Patrick Hand", sans-serif';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(power.symbol, power.x + power.width / 2, power.y + power.height / 2 + 1);
        });

        // Sparkles on honey catch
        sparkles.forEach(s => {
          const alpha = Math.max(0, s.life / 22);
          const radius = 10 + (22 - s.life) * 0.7;
          const gradient = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, radius);
          gradient.addColorStop(0, `rgba(255, 245, 214, ${alpha})`);
          gradient.addColorStop(0.4, `rgba(244, 169, 68, ${alpha * 0.9})`);
          gradient.addColorStop(1, 'rgba(244, 169, 68, 0)');
          ctx.fillStyle = gradient;
          ctx.beginPath();
          ctx.arc(s.x, s.y, radius, 0, Math.PI * 2);
          ctx.fill();
        });

        if (hitFlash > 0) {
          ctx.fillStyle = `rgba(211, 47, 47, ${Math.min(0.45, hitFlash / 20)})`;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          hitFlash--;
        }

        if (combo > 1) {
          ctx.fillStyle = 'rgba(0,0,0,0.4)';
          ctx.fillRect(canvas.width / 2 - 70, 10, 140, 32);
          ctx.fillStyle = '#fffbe6';
          ctx.font = '18px "Patrick Hand", sans-serif';
          ctx.textAlign = 'center';
          ctx.fillText(`Combo x${combo}`, canvas.width / 2, 32);
        }
      },

      updateDisplay: function() {
        bestHoney = Math.max(bestHoney, honeyCollected);
        bestCombo = Math.max(bestCombo, combo);
        document.getElementById('score').textContent = score;
        document.getElementById('honey').textContent = honeyCollected;
        document.getElementById('time').textContent = timeLeft;
        document.getElementById('combo').textContent = combo;
        document.getElementById('bestHoney').textContent = bestHoney;
        document.getElementById('bestCombo').textContent = bestCombo;
        document.getElementById('gameHighScore').textContent = bestScore;

        let heartsDisplay = '';
        for (let i = 0; i < lives; i++) {
          heartsDisplay += '‚ù§Ô∏è';
        }
        document.getElementById('lives').textContent = heartsDisplay || 'üíî';
      },

      updateStatus: function(message) {
        const badge = document.getElementById('statusBadge');
        if (badge) {
          badge.textContent = message;
        }
      },

      showOverlay: function(title, message, icon = 'üçØ', buttonText = 'Start') {
        if (!this.overlay) return;
        this.overlayTitle.textContent = title;
        this.overlayMessage.innerHTML = message;
        this.overlayIcon.textContent = icon;
        if (this.overlayButton) {
          this.overlayButton.textContent = buttonText;
        }
        this.overlay.classList.remove('hidden');
      },

      hideOverlay: function() {
        if (this.overlay) {
          this.overlay.classList.add('hidden');
        }
      },

      showAchievement: function(text) {
        const toast = document.getElementById('achievementToast');
        const detail = document.getElementById('achievementText');
        if (!toast || !detail) return;
        detail.textContent = text;
        toast.style.display = 'flex';
        setTimeout(() => {
          toast.style.display = 'none';
        }, 2400);
      },

      activatePowerup: function(power) {
        switch (power.type) {
          case 'shield':
            activeEffects.shield = true;
            this.updateStatus('Shield ready for one bee!');
            break;
          case 'magnet':
            activeEffects.magnetUntil = Date.now() + 6000;
            this.updateStatus('Honey magnet active!');
            break;
          case 'double':
            activeEffects.doubleUntil = Date.now() + 6000;
            this.updateStatus('Double honey for 6s!');
            break;
        }
        this.showAchievement(power.note);
      },

      saveBestStats: function() {
        try {
          localStorage.setItem('poohBest', JSON.stringify({
            score: bestScore,
            honey: bestHoney,
            combo: bestCombo
          }));
        } catch (e) {
          console.warn('Unable to save best stats', e);
        }
      },

      loadBestStats: function() {
        try {
          const saved = localStorage.getItem('poohBest');
          if (saved) {
            const parsed = JSON.parse(saved);
            if (parsed.score) bestScore = parsed.score;
            if (parsed.honey) bestHoney = parsed.honey;
            if (parsed.combo) bestCombo = parsed.combo;
          }
          document.getElementById('gameHighScore').textContent = bestScore;
          document.getElementById('bestHoney').textContent = bestHoney;
          document.getElementById('bestCombo').textContent = bestCombo;
        } catch (e) {
          console.warn('No saved stats', e);
        }
      }
    };

    // ===== GUESTBOOK & PAGE INIT =====
    document.addEventListener('DOMContentLoaded', () => {
      const wishesForm = document.getElementById('wishesForm');
      const wishFeedback = document.getElementById('wishFeedback');
      const wishesDisplay = document.getElementById('wishesDisplay');
      const wishesKey = 'guestbookWishes';
      let wishes = [];

      const showWishFeedback = (msg, tone = 'info') => {
        if (!wishFeedback) return;
        wishFeedback.textContent = msg;
        wishFeedback.style.color = tone === 'error' ? '#d32f2f' : 'var(--pooh-red)';
      };

      const renderWishes = () => {
        if (!wishesDisplay) return;
        wishesDisplay.innerHTML = '';
        if (!wishes.length) {
          wishesDisplay.innerHTML = '<div class="wish-empty">No wishes yet. Be the first to add one! ‚ú®</div>';
          return;
        }

        [...wishes].reverse().forEach((wish) => {
          const card = document.createElement('div');
          card.className = 'wish-card';
          const date = new Date(wish.timestamp).toLocaleString([], { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
          card.innerHTML = `
            <div class="wish-meta">üíå <span>${wish.name}</span> <span class="wish-time">${date}</span></div>
            <div class="wish-message">"${wish.message}"</div>
          `;
          wishesDisplay.appendChild(card);
        });
      };

      const saveWishes = () => {
        try {
          localStorage.setItem(wishesKey, JSON.stringify(wishes));
        } catch (e) {
          console.warn('Unable to save wishes', e);
        }
      };

      const loadWishes = () => {
        try {
          const saved = localStorage.getItem(wishesKey);
          if (saved) {
            wishes = JSON.parse(saved);
          }
          renderWishes();
        } catch (e) {
          console.warn('Unable to load wishes', e);
        }
      };

      if (wishesForm) {
        wishesForm.addEventListener('submit', function(e) {
          e.preventDefault();

          const name = document.getElementById('guestName').value.trim();
          const message = document.getElementById('wishMessage').value.trim();

          if (!name || !message) {
            showWishFeedback('Please share both your name and wish.', 'error');
            return;
          }

          const entry = { name, message, timestamp: Date.now() };
          wishes.push(entry);
          saveWishes();
          renderWishes();
          showWishFeedback('Wish saved to the guestbook ‚ú®');

          document.getElementById('guestName').value = '';
          document.getElementById('wishMessage').value = '';
        });
      }

      // Initialize everything
      loadWishes();
      updateNavigation();
      Game.init();
      Game.loadBestStats();

    });
  </script>
</body>
</html>
