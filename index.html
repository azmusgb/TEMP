<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Join Winnie-the-Pooh in a storybook adventure through the Hundred Acre Wood">
    <title>Pooh's Honey Hunt - A Hundred Acre Wood Celebration</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&family=Playfair+Display:wght@400;700;900&family=Schoolbell&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçØ</text></svg>">
    
    <style>
        /* =========================
           RESET & BASE
           ========================= */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: "Nunito", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background:
                radial-gradient(circle at top left, rgba(255, 210, 112, 0.18), transparent 60%),
                radial-gradient(circle at bottom right, rgba(176, 208, 227, 0.22), transparent 65%),
                linear-gradient(180deg, #fff8ec 0%, #ffe5b9 35%, #f5d7b8 100%);
            color: #43302a;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            touch-action: manipulation;
        }

        /* Combined Variables */
        :root {
            /* Storybook variables */
            --pooh-yellow: #ffc42b;
            --pooh-red: #d62e2e;
            --honey-gold: #e6b86a;
            --soft-blue: #b0d0e3;
            --sage-green: #9cad90;
            --cream: #fff7ec;
            --page-yellow: #fef9e7;
            --text-dark: #43302a;
            --ink: #2f1a0e;

            /* Game variables */
            --color-honey: #FFC42B;
            --color-honey-light: #FFE082;
            --color-honey-dark: #FF9800;
            --color-leaf: #7CB342;
            --color-earth: #8D6E63;
            --color-sky: #E3F2FD;
            --color-gold: #FFD700;
            --color-danger: #FF5252;
            --color-success: #4CAF50;
            --color-bg: #FFF8E1;
            --color-card: #FFFFFF;
            --color-text: #5D4037;
            --color-text-light: #8D6E63;

            /* Combined shadows */
            --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.18);
            --shadow-subtle: 0 10px 26px rgba(15, 23, 42, 0.12);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);

            /* Combined radii */
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            --radius-pill: 999px;

            /* Combined transitions */
            --transition-fast: all 0.22s ease;
            --transition-slow: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        img {
            max-width: 100%;
            display: block;
        }

        a {
            color: var(--pooh-red);
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }

        main {
            min-height: 100vh;
            flex: 1;
        }

        /* =========================
           SKIP LINKS
           ========================= */
        .skip-link {
            position: absolute;
            left: -999px;
            top: 0;
            background: #111827;
            color: #f9fafb;
            padding: 8px 14px;
            border-radius: var(--radius-pill);
            z-index: 50;
            font-size: 0.9rem;
        }
        .skip-link:focus {
            left: 12px;
            top: 12px;
            outline: none;
        }

        /* =========================
           ENHANCED LOADER
           ========================= */
        .loader {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: linear-gradient(135deg, #fff7e1 0%, #ffd98a 45%, #f2c892 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        .loader--hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader__content {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .loader__pooh {
            position: absolute;
            width: 100%;
            height: 100%;
            animation: float 3s ease-in-out infinite;
        }

        .loader__head {
            position: absolute;
            top: 20px;
            left: 50%;
            width: 80px;
            height: 70px;
            transform: translateX(-50%);
            background: #f3c562;
            border-radius: 40px;
            box-shadow: 0 8px 0 rgba(199, 141, 46, 0.4);
        }

        .loader__ears {
            position: absolute;
            width: 28px;
            height: 28px;
            background: #f3c562;
            border-radius: 50%;
            top: 5px;
        }
        .loader__ears--left {
            left: calc(50% - 45px);
        }
        .loader__ears--right {
            right: calc(50% - 45px);
        }

        .loader__eyes {
            position: absolute;
            top: 35px;
            left: 50%;
            width: 45px;
            display: flex;
            justify-content: space-between;
            transform: translateX(-50%);
        }
        .loader__eye {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #3f2a16;
            animation: blink 3.5s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        @keyframes blink {
            0%, 92%, 100% { transform: scaleY(1); }
            94%, 98% { transform: scaleY(0.1); }
        }

        .loader__nose {
            position: absolute;
            top: 48px;
            left: 50%;
            width: 14px;
            height: 12px;
            transform: translateX(-50%);
            background: #3f2a16;
            border-radius: 50%;
        }

        .loader__smile {
            position: absolute;
            top: 55px;
            left: 50%;
            width: 36px;
            height: 20px;
            transform: translateX(-50%);
            border-bottom: 4px solid #3f2a16;
            border-radius: 0 0 20px 20px;
        }

        .loader__body {
            position: absolute;
            bottom: 20px;
            left: 50%;
            width: 110px;
            height: 85px;
            transform: translateX(-50%);
            background: #f3c562;
            border-radius: 55px;
        }
        .loader__shirt {
            position: absolute;
            inset: 0;
            height: 55px;
            background: var(--pooh-red);
            border-radius: 55px;
        }

        .loader__honey-drip {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(30px);
            width: 25px;
            height: 40px;
            background: linear-gradient(to bottom, transparent 0%, #FFC857 10%, #FF9800 100%);
            border-radius: 0 0 12px 12px;
            animation: drip 2s ease-in-out infinite;
        }

        @keyframes drip {
            0%, 100% { height: 40px; opacity: 0.7; }
            50% { height: 60px; opacity: 1; }
        }

        .loader__progress {
            width: 250px;
            height: 8px;
            border-radius: var(--radius-pill);
            background: rgba(255, 255, 255, 0.8);
            overflow: hidden;
            margin-top: 30px;
        }
        .loader__bar {
            width: 0;
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(90deg, #ffe594, #ffc42b, #e6a623);
            animation: loadBar 1.8s ease-in-out infinite;
        }
        @keyframes loadBar {
            0% { width: 0; transform: translateX(-10%); }
            50% { width: 85%; transform: translateX(5%); }
            100% { width: 0; transform: translateX(100%); }
        }

        .loader__text {
            text-align: center;
            color: #3f2a16;
            margin-top: 20px;
        }
        .storybook-loader__text {
            font-family: "Schoolbell", system-ui, sans-serif;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        /* =========================
           ENHANCED HEADER
           ========================= */
        .storybook-header {
            position: sticky;
            top: 0;
            z-index: 20;
            backdrop-filter: blur(14px);
            background: linear-gradient(
                180deg,
                rgba(255, 247, 236, 0.96),
                rgba(255, 247, 236, 0.88),
                transparent 100%
            );
            border-bottom: 1px solid rgba(139, 69, 19, 0.14);
            box-shadow: 0 4px 20px rgba(139, 69, 19, 0.1);
        }

        .storybook-header__top {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px 24px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        .storybook-logo {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: transform var(--transition);
        }

        .storybook-logo:hover {
            transform: scale(1.02);
        }

        .storybook-logo__pooh {
            position: relative;
            width: 60px;
            height: 65px;
        }

        .storybook-logo__ear {
            position: absolute;
            width: 18px;
            height: 18px;
            background: #f3c562;
            border-radius: 50%;
            top: 5px;
        }
        .storybook-logo__ear--left {
            left: 8px;
        }
        .storybook-logo__ear--right {
            right: 8px;
        }
        .storybook-logo__face {
            position: absolute;
            top: 15px;
            left: 50%;
            width: 40px;
            height: 38px;
            transform: translateX(-50%);
            background: #f3c562;
            border-radius: 50px;
            box-shadow: 0 4px 0 rgba(199, 141, 46, 0.6);
        }

        .storybook-logo__eyes::before,
        .storybook-logo__eyes::after {
            content: "";
            position: absolute;
            top: 25px;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: #3f2a16;
        }
        .storybook-logo__eyes::before {
            left: 28px;
        }
        .storybook-logo__eyes::after {
            right: 28px;
        }

        .storybook-logo__nose {
            position: absolute;
            top: 32px;
            left: 50%;
            width: 10px;
            height: 8px;
            transform: translateX(-50%);
            background: #3f2a16;
            border-radius: 50%;
        }

        .storybook-logo__smile {
            position: absolute;
            top: 38px;
            left: 50%;
            width: 22px;
            height: 12px;
            transform: translateX(-50%);
            border-bottom: 2px solid #3f2a16;
            border-radius: 0 0 15px 15px;
        }

        .storybook-logo__text {
            display: flex;
            flex-direction: column;
        }
        .storybook-logo__eyebrow {
            font-family: "Schoolbell", system-ui, sans-serif;
            font-size: 0.85rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: rgba(67, 48, 42, 0.8);
        }
        .storybook-logo__title {
            margin: 4px 0 0;
            font-family: "Playfair Display", serif;
            font-size: 1.8rem;
            color: var(--ink);
            line-height: 1.1;
        }
        .storybook-logo__subtitle {
            margin: 4px 0 0;
            font-size: 1rem;
            color: rgba(67, 48, 42, 0.9);
        }

        /* Header badges */
        .storybook-header__meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: flex-end;
        }

        .storybook-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            border-radius: var(--radius-pill);
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.15);
            font-size: 0.85rem;
            transition: transform var(--transition);
        }
        .storybook-badge:hover {
            transform: translateY(-2px);
        }
        .storybook-badge i {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(145deg, #ffe29c, #ffc42b);
            color: #5b3812;
            box-shadow: 0 4px 10px rgba(148, 116, 62, 0.35);
            font-size: 0.9rem;
        }
        .storybook-badge__label {
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-size: 0.75rem;
            color: rgba(67, 48, 42, 0.72);
        }
        .storybook-badge__value {
            display: block;
            font-weight: 700;
            color: var(--ink);
            font-size: 1rem;
        }

        /* =========================
           ENHANCED NAV
           ========================= */
        .storybook-nav {
            border-top: 1px solid rgba(139, 69, 19, 0.08);
            background: rgba(255, 247, 236, 0.95);
        }

        .storybook-nav__toggle {
            display: none;
            border: none;
            background: transparent;
            width: 100%;
            padding: 12px 20px;
            cursor: pointer;
        }

        .storybook-nav__list {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .storybook-nav__list::-webkit-scrollbar {
            display: none;
        }

        .storybook-nav__link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            border-radius: var(--radius-pill);
            background: rgba(255, 255, 255, 0.95);
            color: rgba(67, 48, 42, 0.85);
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.07em;
            text-transform: uppercase;
            white-space: nowrap;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
            transition: all var(--transition);
            border: 1px solid transparent;
        }
        .storybook-nav__link i {
            color: var(--pooh-yellow);
            transition: transform var(--transition);
        }
        .storybook-nav__link:hover {
            background: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 10px 24px rgba(15, 23, 42, 0.18);
            border-color: rgba(255, 196, 43, 0.3);
        }
        .storybook-nav__link:hover i {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .storybook-header__top {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px 16px;
            }

            .storybook-header__meta {
                justify-content: flex-start;
                width: 100%;
            }

            .storybook-nav__toggle {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 8px;
                cursor: pointer;
                background: rgba(255, 255, 255, 0.96);
                border-top: 1px solid rgba(139, 69, 19, 0.08);
                border-bottom: 1px solid rgba(139, 69, 19, 0.08);
            }

            .storybook-nav__toggle-line {
                width: 20px;
                height: 2px;
                background: #43302a;
                border-radius: 999px;
                display: block;
            }
            .storybook-nav__toggle-label {
                font-size: 0.85rem;
                text-transform: uppercase;
                letter-spacing: 0.12em;
                color: rgba(67, 48, 42, 0.78);
                font-weight: 700;
            }

            .storybook-nav__list {
                display: none;
                padding: 12px 16px;
                flex-direction: column;
                align-items: stretch;
            }
            .storybook-nav__list--open {
                display: flex;
            }
            
            .storybook-nav__link {
                justify-content: center;
                padding: 12px 20px;
            }
        }

        /* =========================
           MAIN LAYOUT / SECTIONS
           ========================= */
        .storybook-main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 24px 60px;
        }

        .storybook-section {
            margin-top: 30px;
        }
        .storybook-section__inner {
            background: rgba(255, 250, 239, 0.96);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            padding: 40px;
            border: 2px solid rgba(255, 196, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: transform var(--transition);
        }
        .storybook-section__inner:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-soft);
        }
        .storybook-section__inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--pooh-yellow), var(--color-gold));
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
        }

        /* Section header */
        .storybook-section__header {
            margin-bottom: 30px;
        }
        .storybook-chapter-label {
            margin: 0 0 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: "Schoolbell", system-ui, sans-serif;
            font-size: 1rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: rgba(67, 48, 42, 0.78);
        }
        .storybook-chapter-ornament {
            opacity: 0.8;
            transition: transform var(--transition);
        }
        .storybook-chapter-label:hover .storybook-chapter-ornament {
            transform: rotate(15deg);
        }
        .storybook-section__title {
            margin: 0;
            font-family: "Playfair Display", serif;
            font-size: 2.5rem;
            color: var(--ink);
            line-height: 1.1;
        }
        .storybook-section__subtitle {
            margin: 8px 0 0;
            font-size: 1.2rem;
            color: rgba(67, 48, 42, 0.88);
        }

        /* Grids / cards */
        .storybook-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
            gap: 30px;
        }
        .storybook-grid--columns-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        .storybook-grid--columns-2 {
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.1fr);
        }

        .storybook-card {
            background: #ffffff;
            border-radius: var(--radius-lg);
            padding: 30px;
            box-shadow: var(--shadow-subtle);
            transition: all var(--transition);
        }
        .storybook-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }
        .storybook-card--story {
            font-size: 1.1rem;
            line-height: 1.7;
        }
        .storybook-card--details {
            font-size: 1rem;
        }

        /* Dropcap paragraph */
        .storybook-dropcap::first-letter {
            float: left;
            font-family: "Playfair Display", serif;
            font-size: 4rem;
            line-height: 0.8;
            margin-right: 12px;
            margin-top: 6px;
            color: var(--pooh-yellow);
            text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.1);
        }
        .storybook-text-highlight {
            background: linear-gradient(120deg, #ffe7a8 0, #ffe1bf 100%);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            font-weight: 700;
        }

        /* Detail list (dl) */
        .storybook-detail-list {
            margin: 0;
            padding: 0;
        }
        .storybook-detail-item {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            padding: 12px 0;
            border-bottom: 1px dashed rgba(139, 69, 19, 0.15);
            font-size: 1rem;
            transition: padding var(--transition-fast);
        }
        .storybook-detail-item:hover {
            padding-left: 5px;
            padding-right: 5px;
        }
        .storybook-detail-item:last-child {
            border-bottom: none;
        }
        .storybook-detail-item dt {
            font-weight: 700;
            color: var(--ink);
        }
        .storybook-detail-item dd {
            margin: 0;
            text-align: right;
            color: rgba(67, 48, 42, 0.95);
            font-weight: 600;
        }
        .storybook-card__note {
            margin-top: 15px;
            font-size: 0.9rem;
            color: rgba(67, 48, 42, 0.85);
            padding: 10px 15px;
            background: rgba(255, 248, 225, 0.5);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--pooh-yellow);
        }

        /* Note banner */
        .storybook-note-banner {
            margin-top: 25px;
            padding: 15px 20px;
            border-radius: var(--radius-md);
            background: rgba(255, 255, 255, 0.88);
            border: 1px dashed rgba(139, 69, 19, 0.2);
            display: flex;
            gap: 12px;
            align-items: flex-start;
            font-size: 1rem;
            transition: all var(--transition);
        }
        .storybook-note-banner:hover {
            transform: translateX(5px);
            border-color: rgba(139, 69, 19, 0.4);
        }
        .storybook-note-banner i {
            margin-top: 2px;
            color: var(--soft-blue);
            font-size: 1.2rem;
        }

        /* =========================
           ENHANCED CHARACTERS GRID
           ========================= */
        .storybook-character-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        .storybook-character {
            display: flex;
            gap: 20px;
            padding: 25px;
            border-radius: var(--radius-lg);
            background: #ffffff;
            box-shadow: var(--shadow-subtle);
            transition: all var(--transition);
            border: 2px solid transparent;
        }
        .storybook-character:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-lg);
            border-color: rgba(255, 196, 43, 0.3);
        }
        .storybook-character__avatar {
            flex-shrink: 0;
            width: 100px;
            height: 100px;
            border-radius: var(--radius-lg);
            background: radial-gradient(circle at top, #fffdf4 0, #ffe2b5 55%, #f1c28a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: transform var(--transition);
        }
        .storybook-character:hover .storybook-character__avatar {
            transform: rotate(10deg);
        }
        .storybook-character__content h3 {
            margin: 0 0 6px;
            font-size: 1.4rem;
            font-family: "Playfair Display", serif;
            color: var(--ink);
        }
        .storybook-character__role {
            margin: 0 0 8px;
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--pooh-red);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .storybook-character__description {
            margin: 0;
            font-size: 1rem;
            line-height: 1.6;
            color: rgba(67, 48, 42, 0.85);
        }

        /* =========================
           ENHANCED BUTTONS
           ========================= */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 28px;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            font-family: inherit;
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            transition: all var(--transition);
            position: relative;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Button Variants */
        .btn--primary {
            background: linear-gradient(135deg, #fffbe7 0, #ffc42b 45%, #e6a623 100%);
            color: #5b3812;
            box-shadow:
                0 10px 24px rgba(148, 116, 62, 0.45),
                0 0 0 1px rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
        }
        .btn--primary:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow:
                0 14px 30px rgba(148, 116, 62, 0.55),
                0 0 0 1px rgba(255, 255, 255, 0.9);
        }
        .btn--primary:active {
            transform: translateY(1px) scale(0.98);
        }

        .btn--ghost {
            background: rgba(255, 255, 255, 0.96);
            color: var(--ink);
            box-shadow: 0 6px 16px rgba(148, 116, 62, 0.25);
            border: 2px solid rgba(148, 116, 62, 0.15);
        }
        .btn--ghost:hover {
            background: #ffffff;
            transform: translateY(-2px);
            border-color: rgba(148, 116, 62, 0.3);
        }
        .btn--ghost:active {
            transform: translateY(1px);
        }

        .btn--pill {
            border-radius: var(--radius-pill);
        }

        .btn--outline {
            background: transparent;
            border: 2px dashed rgba(139, 69, 19, 0.4);
            color: var(--ink);
            box-shadow: none;
        }
        .btn--outline:hover {
            background: rgba(255, 255, 255, 0.9);
            border-style: solid;
            border-color: rgba(139, 69, 19, 0.6);
        }

        /* =========================
           ENHANCED GAME LAYOUT
           ========================= */
        .game-layout {
            display: grid;
            grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr);
            gap: 30px;
            margin-top: 10px;
        }

        /* Game card */
        .game-card {
            background: #ffffff;
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(255, 196, 0, 0.1);
            transition: transform var(--transition);
        }
        .game-card:hover {
            transform: translateY(-5px);
        }
        .game-card__header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }
        .game-card__title-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .game-card__icon {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            background: linear-gradient(145deg, var(--pooh-yellow), #ffd86a);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow:
                0 8px 18px rgba(255, 196, 43, 0.45),
                0 0 0 4px rgba(255, 255, 255, 0.95);
            transition: transform var(--transition);
        }
        .game-card:hover .game-card__icon {
            transform: rotate(15deg);
        }
        .game-card__icon i {
            color: #5b3812;
            font-size: 1.8rem;
        }
        .game-card__title {
            margin: 0;
            font-size: 1.8rem;
            font-family: "Playfair Display", serif;
            color: var(--ink);
        }
        .game-card__subtitle {
            margin: 6px 0 0;
            font-size: 1.1rem;
            color: rgba(67, 48, 42, 0.85);
        }

        /* Stats */
        .game-card__stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: flex-end;
        }
        .game-stat {
            padding: 12px 20px;
            border-radius: var(--radius-pill);
            background: rgba(255, 250, 239, 0.96);
            border: 2px solid rgba(139, 69, 19, 0.1);
            min-width: 100px;
            text-align: center;
            transition: all var(--transition);
        }
        .game-stat:hover {
            transform: translateY(-3px);
            border-color: rgba(139, 69, 19, 0.3);
            box-shadow: var(--shadow-sm);
        }
        .game-stat__label {
            display: block;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: rgba(67, 48, 42, 0.72);
            margin-bottom: 4px;
        }
        .game-stat__value {
            display: block;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--ink);
            transition: transform var(--transition-fast);
        }
        .game-stat:hover .game-stat__value {
            transform: scale(1.1);
        }

        /* Enhanced Power-ups */
        .power-ups {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .power-up {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 18px;
            background: white;
            border-radius: var(--radius-pill);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all var(--transition);
            border: 2px solid transparent;
            user-select: none;
        }

        .power-up:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .power-up:active {
            transform: translateY(1px);
        }

        .power-up__icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
            transition: transform var(--transition);
        }

        .power-up:hover .power-up__icon {
            transform: scale(1.1);
        }

        .power-up--magnet .power-up__icon {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }

        .power-up--time .power-up__icon {
            background: linear-gradient(135deg, #2196F3, #03A9F4);
        }

        .power-up--shield .power-up__icon {
            background: linear-gradient(135deg, #FF9800, #FFB74D);
        }

        .power-up__count {
            font-weight: 700;
            color: var(--ink);
            font-size: 1.2rem;
            min-width: 20px;
            text-align: center;
        }

        /* Streak meter */
        .streak-meter {
            background: rgba(255, 248, 225, 0.8);
            border: 2px solid rgba(255, 196, 43, 0.2);
            border-radius: var(--radius-md);
            padding: 15px 18px;
            margin: 10px 0 20px;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition);
        }
        .streak-meter:hover {
            border-color: rgba(255, 196, 43, 0.4);
            box-shadow: var(--shadow-md);
        }
        .streak-meter__label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            color: var(--ink);
            margin-bottom: 8px;
            font-size: 1rem;
        }
        .streak-meter__label span {
            font-weight: 600;
            color: rgba(67, 48, 42, 0.7);
            font-size: 0.9rem;
        }
        .streak-meter__track {
            position: relative;
            height: 14px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: var(--radius-pill);
            overflow: hidden;
        }
        .streak-meter__fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 10%;
            background: linear-gradient(90deg, #ffcf4c 0%, #ff9f1c 100%);
            border-radius: inherit;
            transition: width 0.3s ease, filter 0.3s ease;
            box-shadow: 0 4px 14px rgba(255, 159, 28, 0.35);
        }
        .streak-meter__fill--hot {
            filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.65));
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        .streak-hot {
            color: #d62e2e;
            text-shadow: 0 0 12px rgba(255, 116, 66, 0.5);
            animation: glow 1.5s infinite;
        }
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 8px rgba(255, 116, 66, 0.5); }
            50% { text-shadow: 0 0 15px rgba(255, 116, 66, 0.8); }
        }

        /* Objective tracker */
        .objective-tracker {
            margin-top: 18px;
            padding: 16px 20px;
            border-radius: var(--radius-lg);
            background: linear-gradient(120deg, rgba(255, 196, 43, 0.14), rgba(255, 255, 255, 0.94));
            box-shadow: var(--shadow-subtle);
            border: 1px dashed rgba(255, 156, 27, 0.45);
            transition: all var(--transition);
        }
        .objective-tracker:hover {
            border-style: solid;
            transform: translateY(-3px);
        }
        .objective-tracker__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .objective-tracker__kicker {
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.08em;
            color: rgba(67, 48, 42, 0.7);
            font-weight: 800;
            margin: 0 0 6px;
        }
        .objective-tracker__title {
            margin: 0;
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--ink);
        }
        .objective-tracker__badge {
            font-size: 0.9rem;
            padding: 8px 12px;
            border-radius: var(--radius-pill);
            background: rgba(124, 179, 66, 0.18);
            color: #4f6d2c;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            transition: all var(--transition);
        }
        .objective-tracker__badge:hover {
            transform: scale(1.05);
        }
        .objective-tracker__badge i {
            color: #7cb342;
        }
        .objective-tracker__badge--alert {
            background: rgba(255, 82, 82, 0.12);
            color: #8a1c1c;
        }
        .objective-tracker__badge--alert i {
            color: #ff5252;
        }
        .objective-tracker__bar {
            position: relative;
            width: 100%;
            height: 14px;
            background: rgba(67, 48, 42, 0.07);
            border-radius: var(--radius-pill);
            overflow: hidden;
            margin-bottom: 10px;
        }
        .objective-tracker__fill {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0;
            border-radius: var(--radius-pill);
            background: linear-gradient(90deg, #ffc42b, #ff9800);
            transition: width 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 10px rgba(255, 196, 43, 0.3);
        }
        .objective-tracker__note {
            margin: 0;
            font-size: 0.95rem;
            color: rgba(67, 48, 42, 0.8);
        }

        /* HUD Elements */
        .honey-hud {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
            background: rgba(255, 248, 225, 0.5);
            padding: 30px;
            border-radius: var(--radius-lg);
            border: 2px solid rgba(255, 196, 0, 0.1);
        }

        .hud-pill {
            background: white;
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all var(--transition);
            border: 2px solid transparent;
        }
        .hud-pill:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-md);
            border-color: rgba(255, 196, 0, 0.2);
        }
        .hud-pill--highlight {
            background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%);
            border-color: var(--color-honey);
            animation: highlightPulse 2s infinite;
        }
        @keyframes highlightPulse {
            0%, 100% { 
                border-color: var(--color-honey);
                box-shadow: 0 0 20px rgba(255, 196, 43, 0.3);
            }
            50% { 
                border-color: var(--color-gold);
                box-shadow: 0 0 30px rgba(255, 196, 43, 0.5);
            }
        }
        .hud-pill__label {
            font-size: 1rem;
            color: var(--color-text-light);
            margin-bottom: 10px;
            font-weight: 600;
        }
        .hud-pill__value {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--color-text);
        }

        /* Canvas */
        .honey-canvas-shell {
            background: linear-gradient(135deg, #FFECB3 0%, #FFCCBC 100%);
            border-radius: var(--radius-lg);
            padding: 6px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
            border: 6px solid var(--color-card);
            position: relative;
            overflow: hidden;
        }
        .honey-canvas-shell--tall {
            height: 550px;
        }
        .honey-canvas-inner {
            width: 100%;
            height: 100%;
            border-radius: calc(var(--radius-lg) - 4px);
            overflow: hidden;
            position: relative;
        }

        .game-canvas {
            display: block;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #fdf7e3 0%, #f8e6b6 50%, #f0dab0 100%);
            cursor: crosshair;
        }

        .game-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 15px;
            background: radial-gradient(circle at center, rgba(255, 248, 225, 0.85), rgba(255, 255, 255, 0.7));
            color: var(--ink);
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .game-overlay--visible {
            opacity: 1;
            pointer-events: all;
        }
        .game-overlay__badge {
            background: linear-gradient(135deg, #ffffff, #f8f8f8);
            padding: 20px 30px;
            border-radius: var(--radius-xl);
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--ink);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.15),
                0 0 0 8px rgba(255, 196, 43, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.5);
            animation: badgePulse 1s ease-in-out infinite;
            border: 3px solid rgba(255, 196, 43, 0.3);
        }
        @keyframes badgePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 
                    0 15px 35px rgba(0, 0, 0, 0.15),
                    0 0 0 8px rgba(255, 196, 43, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.5);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 
                    0 20px 40px rgba(0, 0, 0, 0.2),
                    0 0 0 10px rgba(255, 196, 43, 0.3),
                    inset 0 0 25px rgba(255, 255, 255, 0.7);
            }
        }
        .game-overlay__hint {
            max-width: 450px;
            font-weight: 600;
            color: rgba(67, 48, 42, 0.85);
            font-size: 1.1rem;
            line-height: 1.5;
        }
        .game-overlay--alert .game-overlay__badge {
            background: linear-gradient(135deg, #ffe5e0, #ffd9d3);
            color: #b22222;
            border-color: rgba(255, 107, 107, 0.3);
        }

        /* Status Bar */
        .honey-status {
            background: rgba(255, 248, 225, 0.8);
            border-radius: var(--radius-md);
            padding: 20px 28px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            border-left: 5px solid var(--pooh-yellow);
            animation: statusPulse 2s ease-in-out infinite;
            transition: all var(--transition);
        }
        .honey-status:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }
        @keyframes statusPulse {
            0%, 100% { border-left-color: var(--pooh-yellow); }
            50% { border-left-color: var(--color-gold); }
        }
        .honey-status__icon {
            width: 50px;
            height: 50px;
            background: var(--pooh-yellow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 6px 15px rgba(255, 196, 43, 0.4);
        }
        #statusText {
            font-size: 1.2rem;
            color: var(--color-text);
            font-weight: 500;
            flex: 1;
            line-height: 1.5;
        }

        /* Controls */
        .honey-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 30px;
            padding: 28px;
            background: rgba(255, 248, 225, 0.5);
            border-radius: var(--radius-lg);
            border: 2px solid rgba(255, 196, 0, 0.1);
        }
        .honey-controls__left {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .honey-controls__right {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .difficulty-pill {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: white;
            border-radius: var(--radius-pill);
            box-shadow: var(--shadow-sm);
            font-weight: 600;
            border: 2px solid rgba(255, 196, 0, 0.2);
            transition: all var(--transition);
        }
        .difficulty-pill:hover {
            border-color: var(--color-honey);
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }
        .difficulty-pill select {
            border: none;
            background: transparent;
            font-family: 'Lato', sans-serif;
            font-weight: 600;
            color: var(--color-text);
            cursor: pointer;
            outline: none;
            font-size: 1rem;
        }

        /* Touch Controls */
        .touch-controls {
            background: rgba(255, 248, 225, 0.8);
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-bottom: 30px;
            display: none;
        }
        .touch-controls__label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--color-text-light);
            font-weight: 600;
            font-size: 1.1rem;
        }
        .touch-controls__buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }
        .touch-btn {
            height: 90px;
            border: none;
            border-radius: var(--radius-md);
            background: linear-gradient(135deg, var(--color-honey-dark) 0%, var(--color-honey) 100%);
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-md);
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        .touch-btn:active {
            transform: scale(0.95);
        }

        /* Game footer */
        .game-card__footer {
            margin-top: 20px;
        }
        .game-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .game-controls--secondary {
            margin-top: 15px;
            font-size: 1rem;
        }
        .game-instructions {
            margin: 0 0 15px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .game-note {
            margin: 0;
            color: rgba(67, 48, 42, 0.85);
            font-size: 1rem;
            padding: 12px 16px;
            background: rgba(255, 248, 225, 0.5);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--pooh-yellow);
        }

        /* Sidebar */
        .game-layout__sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        .game-prompt-card {
            background: #ffffff;
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow-subtle);
            font-size: 1rem;
            transition: all var(--transition);
        }
        .game-prompt-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }
        .game-prompt-card__title {
            margin: 0 0 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--ink);
        }
        .game-prompt-card__title i {
            color: var(--soft-blue);
            font-size: 1.3rem;
        }
        .game-prompt-card__subtitle {
            margin: 0 0 15px;
            font-size: 1rem;
            color: rgba(67, 48, 42, 0.85);
        }
        .game-prompt-card__prompt {
            margin-top: 12px;
            padding: 15px;
            border-radius: var(--radius-md);
            background: rgba(255, 248, 236, 0.98);
            border: 1px dashed rgba(139, 69, 19, 0.18);
            min-height: 100px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .game-chapter-note {
            font-size: 1rem;
            padding: 20px;
            border-radius: var(--radius-md);
            background: rgba(255, 255, 255, 0.96);
            box-shadow: var(--shadow-subtle);
            transition: all var(--transition);
        }
        .game-chapter-note:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* =========================
           ENHANCED RSVP
           ========================= */
        .storybook-form {
            display: grid;
            gap: 20px;
        }
        .storybook-form__group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .storybook-form label {
            font-size: 1rem;
            font-weight: 700;
            color: var(--ink);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .storybook-form input,
        .storybook-form select,
        .storybook-form textarea {
            border-radius: var(--radius-md);
            border: 2px solid rgba(67, 48, 42, 0.2);
            padding: 12px 16px;
            font-family: inherit;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.98);
            transition: all var(--transition);
        }
        .storybook-form input:focus,
        .storybook-form select:focus,
        .storybook-form textarea:focus {
            outline: none;
            border-color: var(--pooh-yellow);
            box-shadow: 0 0 0 3px rgba(255, 196, 43, 0.15);
            transform: translateY(-2px);
        }

        .storybook-form__actions {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .storybook-form__status {
            min-height: 20px;
            font-size: 1rem;
            padding: 12px;
            border-radius: var(--radius-sm);
            transition: all var(--transition);
        }

        /* RSVP sidebar note */
        .storybook-rsvp-note {
            background: #ffffff;
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow-subtle);
            font-size: 1rem;
            transition: all var(--transition);
        }
        .storybook-rsvp-note:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }
        .storybook-rsvp-note h3 {
            margin: 0 0 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: "Playfair Display", serif;
            font-size: 1.4rem;
            color: var(--ink);
        }
        .storybook-rsvp-note h3 i {
            color: var(--pooh-red);
            font-size: 1.3rem;
        }
        .storybook-list {
            margin: 15px 0 15px 25px;
            padding: 0;
        }
        .storybook-list li {
            margin-bottom: 10px;
            padding-left: 8px;
            line-height: 1.6;
        }
        .storybook-rsvp-note__footer {
            margin: 15px 0 0;
            font-size: 0.95rem;
            color: rgba(67, 48, 42, 0.85);
            padding-top: 15px;
            border-top: 1px dashed rgba(139, 69, 19, 0.2);
        }

        /* =========================
           ENHANCED FOOTER
           ========================= */
        .storybook-footer {
            padding: 40px 24px;
            text-align: center;
            background: rgba(255, 248, 236, 0.96);
            border-top: 1px solid rgba(139, 69, 19, 0.1);
            margin-top: auto;
        }
        .storybook-footer__inner {
            max-width: 1200px;
            margin: 0 auto;
        }
        .storybook-footer__text {
            margin: 0 0 12px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .storybook-footer__credits {
            margin: 0;
            font-size: 0.9rem;
            color: rgba(67, 48, 42, 0.8);
            line-height: 1.6;
        }

        /* Honey Footer */
        .honey-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 25px;
            padding: 25px 0;
            border-top: 2px solid rgba(255, 196, 0, 0.1);
            margin-top: 30px;
        }

        .toggle {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            user-select: none;
        }
        .toggle input {
            display: none;
        }
        .toggle span {
            position: relative;
            padding-left: 60px;
            color: var(--color-text);
            font-weight: 500;
            font-size: 1rem;
        }
        .toggle span::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 25px;
            background: #ccc;
            border-radius: 12.5px;
            transition: all var(--transition);
        }
        .toggle span::after {
            content: '';
            position: absolute;
            left: 3px;
            top: 50%;
            transform: translateY(-50%);
            width: 19px;
            height: 19px;
            background: white;
            border-radius: 50%;
            transition: all var(--transition);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .toggle input:checked + span::before {
            background: var(--color-success);
        }
        .toggle input:checked + span::after {
            left: 28px;
        }

        .honey-small {
            font-size: 1rem;
            color: var(--color-text-light);
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 248, 225, 0.5);
            border-radius: var(--radius-md);
            border: 1px solid rgba(255, 196, 0, 0.1);
        }

        kbd {
            background: white;
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            border: 1px solid #ddd;
            box-shadow: 0 3px 0 #ddd;
            font-family: monospace;
            font-size: 1rem;
        }

        /* =========================
           RESPONSIVE DESIGN
           ========================= */
        @media (max-width: 900px) {
            .storybook-grid,
            .storybook-grid--columns-2 {
                grid-template-columns: 1fr;
            }
            .game-layout {
                grid-template-columns: 1fr;
            }
            .honey-hud {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .storybook-main {
                padding: 20px 16px;
            }
            .storybook-section__inner {
                padding: 30px;
            }
            .storybook-header__top {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            .storybook-header__meta {
                justify-content: flex-start;
            }
            .touch-controls {
                display: block;
            }
            .honey-canvas-shell--tall {
                height: 400px;
            }
            .honey-controls {
                flex-direction: column;
                gap: 20px;
            }
            .honey-controls__left, .honey-controls__right {
                width: 100%;
                justify-content: center;
            }
            .honey-footer {
                flex-direction: column;
                text-align: center;
            }
            .storybook-section__title {
                font-size: 2rem;
            }
        }

        @media (max-width: 640px) {
            .storybook-main {
                padding: 16px 14px;
            }
            .storybook-section__inner {
                padding: 22px 18px;
            }
            .storybook-section__title {
                font-size: 1.9rem;
            }
            .storybook-section__subtitle {
                font-size: 1rem;
            }
            .storybook-grid,
            .storybook-grid--columns-2,
            .storybook-grid--columns-3 {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .storybook-card,
            .game-card,
            .hud-pill {
                padding: 22px;
            }
            .game-card__header {
                flex-direction: column;
                align-items: flex-start;
            }
            .game-card__stats {
                width: 100%;
                justify-content: flex-start;
            }
            .storybook-header__meta {
                width: 100%;
                justify-content: center;
            }
            .storybook-badge {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .storybook-character-grid {
                grid-template-columns: 1fr;
            }
            .game-card__header {
                flex-direction: column;
                align-items: stretch;
            }
            .game-card__stats {
                width: 100%;
                justify-content: center;
            }
            .honey-hud {
                grid-template-columns: 1fr;
            }
            .honey-canvas-shell--tall {
                height: 350px;
            }
            .storybook-section__title {
                font-size: 1.6rem;
            }
            .hud-pill {
                padding: 20px;
            }
            .hud-pill__value {
                font-size: 1.8rem;
            }
            .honey-controls__left {
                flex-direction: column;
                width: 100%;
            }
            .btn {
                width: 100%;
                justify-content: center;
            }
            .power-ups {
                justify-content: center;
            }
        }

        /* =========================
           MOBILE OPTIMIZATIONS
           ========================= */

        /* Prevent zoom on inputs on iOS */
        @supports (-webkit-touch-callout: none) {
            input,
            textarea,
            select {
                font-size: 16px !important; /* Prevents iOS zoom on focus */
            }
        }

        /* Larger touch targets for all interactive elements */
        @media (max-width: 768px) {
            /* Make all buttons larger */
            .btn {
                padding: 18px 30px;
                min-height: 60px;
                font-size: 1.2rem;
            }

            /* Increase touch area for game controls */
            .game-controls .btn {
                flex: 1;
                min-width: 45%;
                margin-bottom: 12px;
            }

            /* Larger form inputs */
            .storybook-form input,
            .storybook-form select,
            .storybook-form textarea {
                padding: 16px 20px;
                font-size: 1.2rem;
                min-height: 56px;
            }

            /* Better mobile navigation */
            .storybook-nav__toggle {
                padding: 18px 20px;
                min-height: 64px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: rgba(255, 255, 255, 0.98);
                border-bottom: 1px solid rgba(139, 69, 19, 0.1);
            }

            .storybook-nav__toggle-label {
                font-size: 1rem;
                font-weight: 700;
                color: var(--ink);
            }

            .storybook-nav__list {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
                padding: 0 20px;
            }

            .storybook-nav__list--open {
                max-height: 500px;
                padding: 20px;
            }

            .storybook-nav__link {
                padding: 18px 24px;
                margin-bottom: 10px;
                font-size: 1.1rem;
                justify-content: flex-start;
                min-height: 60px;
            }

            /* Improved game canvas for mobile */
            .honey-canvas-shell--tall {
                height: 65vh !important;
                min-height: 400px;
                max-height: 500px;
            }

            /* Touch controls always visible on mobile */
            .touch-controls {
                display: block !important;
                margin-top: 25px;
                background: rgba(255, 248, 225, 0.95);
                border: 2px solid rgba(255, 196, 0, 0.2);
            }

            .touch-btn {
                height: 100px;
                font-size: 2rem;
                border-radius: var(--radius-lg);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }

            .touch-btn:active {
                transform: scale(0.92);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            }

            /* Larger power-up buttons */
            .power-up {
                padding: 15px 22px;
                min-height: 70px;
                min-width: 120px;
            }

            .power-up__icon {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }

            .power-up__count {
                font-size: 1.4rem;
            }

            /* Better spacing for stats */
            .game-card__stats {
                gap: 10px;
                justify-content: center;
            }

            .game-stat {
                min-width: 80px;
                padding: 15px 10px;
            }

            .game-stat__value {
                font-size: 1.8rem;
            }

            /* Adjust character cards */
            .storybook-character {
                flex-direction: column;
                text-align: center;
                padding: 30px 20px;
            }

            .storybook-character__avatar {
                width: 120px;
                height: 120px;
                margin: 0 auto 20px;
            }

            /* Prevent text overflow */
            .storybook-card--story,
            .storybook-card--details,
            .storybook-character__description {
                font-size: 1.1rem;
                line-height: 1.7;
                word-break: break-word;
                hyphens: auto;
            }

            /* Improve header badges */
            .storybook-header__meta {
                flex-direction: column;
                width: 100%;
            }

            .storybook-badge {
                width: 100%;
                justify-content: flex-start;
                padding: 18px 20px;
            }

            /* Adjust loader for mobile */
            .loader__content {
                width: 150px;
                height: 150px;
            }

            .loader__progress {
                width: 200px;
            }
        }

        /* Small phones */
        @media (max-width: 480px) {
            /* Even larger touch targets */
            .btn {
                padding: 20px 25px;
                min-height: 65px;
                font-size: 1.3rem;
            }

            /* Stack game controls */
            .honey-controls__left {
                flex-direction: column;
                width: 100%;
            }

            .honey-controls__right {
                width: 100%;
                justify-content: center;
            }

            .difficulty-pill {
                width: 100%;
                justify-content: center;
                padding: 18px;
            }

            /* Adjust game stats grid */
            .game-card__stats {
                grid-template-columns: repeat(3, 1fr);
            }

            .game-stat {
                min-width: auto;
                padding: 12px 8px;
            }

            /* Single column for HUD */
            .honey-hud {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .hud-pill {
                padding: 25px 20px;
            }

            /* Adjust game canvas */
            .honey-canvas-shell--tall {
                height: 55vh !important;
                min-height: 350px;
            }

            /* Improved touch controls layout */
            .touch-controls__buttons {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }

            .touch-btn {
                height: 90px;
                font-size: 1.8rem;
            }

            /* Adjust section padding */
            .storybook-section__inner {
                padding: 25px 20px;
            }

            .storybook-section__title {
                font-size: 1.8rem;
                line-height: 1.2;
            }

            .storybook-section__subtitle {
                font-size: 1.1rem;
            }

            /* Optimize character grid */
            .storybook-character-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            /* Power-ups in single row */
            .power-ups {
                justify-content: center;
                gap: 10px;
            }

            .power-up {
                min-width: 100px;
                padding: 12px 15px;
            }

            /* Adjust font sizes */
            h1, h2, h3, h4 {
                line-height: 1.2;
            }

            .storybook-logo__title {
                font-size: 1.6rem;
            }

            .storybook-logo__subtitle {
                font-size: 0.9rem;
            }
        }

        /* Very small phones */
        @media (max-width: 360px) {
            .storybook-main {
                padding: 15px 12px;
            }

            .storybook-section__inner {
                padding: 20px 15px;
            }

            .honey-canvas-shell--tall {
                height: 50vh !important;
                min-height: 300px;
            }

            .touch-btn {
                height: 80px;
                font-size: 1.6rem;
            }

            .game-card__stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .btn {
                padding: 18px 20px;
                font-size: 1.1rem;
            }
        }

        /* Landscape mode optimizations */
        @media (max-height: 500px) and (orientation: landscape) {
            .honey-canvas-shell--tall {
                height: 70vh !important;
                max-height: 350px;
            }

            .storybook-header__top {
                padding: 10px 15px;
            }

            .storybook-logo__pooh {
                width: 50px;
                height: 55px;
            }

            .storybook-logo__title {
                font-size: 1.4rem;
            }
        }

        /* High-DPI screen optimizations */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .btn,
            .storybook-nav__link,
            .power-up,
            .touch-btn {
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            }
        }

        /* Reduce animations on mobile for performance */
        @media (max-width: 768px) {
            .storybook-section__inner:hover,
            .storybook-character:hover,
            .game-card:hover,
            .hud-pill:hover,
            .storybook-badge:hover {
                transform: none !important;
            }

            /* Keep only essential animations */
            .btn:active,
            .power-up:active,
            .touch-btn:active {
                transform: scale(0.95) !important;
                transition: transform 0.1s ease !important;
            }

            /* Disable heavy animations */
            .floating,
            .bouncing,
            .honey-glow {
                animation: none;
            }

            /* Simplify loader for mobile */
            .loader__honey-drip,
            .loader__bar {
                animation-duration: 1s;
            }
        }

        /* Prevent horizontal scroll */
        body {
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }

        /* iOS specific fixes */
        @supports (-webkit-touch-callout: none) {
            .storybook-main {
                padding-bottom: env(safe-area-inset-bottom, 60px);
            }

            .touch-controls {
                padding-bottom: max(env(safe-area-inset-bottom, 20px), 20px);
            }

            .btn,
            .touch-btn {
                cursor: default; /* Remove pointer cursor on iOS */
            }
        }

        /* Safe area support for notched phones */
        @supports (padding: max(0px)) {
            .storybook-main,
            .storybook-footer,
            .touch-controls {
                padding-left: max(15px, env(safe-area-inset-left));
                padding-right: max(15px, env(safe-area-inset-right));
            }

            .storybook-footer {
                padding-bottom: max(40px, env(safe-area-inset-bottom, 40px));
            }
        }

        /* Game overlay fixes for mobile */
        .game-overlay {
            padding: 20px;
            text-align: center;
        }

        .game-overlay__badge {
            font-size: 1.5rem;
            padding: 15px 25px;
            margin-bottom: 15px;
        }

        .game-overlay__hint {
            font-size: 1rem;
            line-height: 1.4;
        }

        /* Status bar adjustments for mobile */
        .honey-status {
            margin: 15px 0;
            padding: 15px 20px;
            border-radius: var(--radius-md);
        }

        #statusText {
            font-size: 1.1rem;
            line-height: 1.4;
        }

        /* =========================
           ANIMATIONS
           ========================= */
        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes scorePop {
            0% { transform: scale(1); }
            50% { transform: scale(1.4); }
            100% { transform: scale(1); }
        }

        .score-updated {
            animation: scorePop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes arcadeGlow {
            0%, 100% { 
                box-shadow: 0 0 25px var(--color-honey);
                border-color: rgba(255, 196, 43, 0.3);
            }
            50% { 
                box-shadow: 0 0 50px var(--color-gold);
                border-color: rgba(255, 215, 0, 0.5);
            }
        }

        .arcade-mode {
            animation: arcadeGlow 2s infinite;
        }

        .honey-card--fullscreen {
            animation: cardAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Game specific animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        @keyframes honeyGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 8px rgba(255, 196, 43, 0.5));
            }
            50% { 
                filter: drop-shadow(0 0 20px rgba(255, 196, 43, 0.8));
            }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        .bouncing {
            animation: bounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .honey-glow {
            animation: honeyGlow 2s infinite;
        }

        /* Particle effects */
        .particle {
            position: absolute;
            pointer-events: none;
            z-index: 100;
        }

        /* Game cursor */
        .game-canvas {
            cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='14' fill='%23FFC42B' stroke='%235b3812' stroke-width='2'/%3E%3Ccircle cx='16' cy='16' r='8' fill='%23FFD700'/%3E%3C/svg%3E") 16 16, pointer;
        }

        /* Loading bars */
        .loading-bar {
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: var(--radius-pill);
            overflow: hidden;
            margin: 10px 0;
        }

        .loading-bar__fill {
            height: 100%;
            background: linear-gradient(90deg, var(--pooh-yellow), var(--color-gold));
            border-radius: inherit;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Skip to Main Content -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Loading Screen -->
    <div class="loader" id="loader">
        <div class="loader__content">
            <div class="loader__pooh">
                <!-- Pooh Head -->
                <div class="loader__head"></div>
                
                <!-- Ears -->
                <div class="loader__ears loader__ears--left"></div>
                <div class="loader__ears loader__ears--right"></div>
                
                <!-- Face -->
                <div class="loader__eyes">
                    <div class="loader__eye"></div>
                    <div class="loader__eye"></div>
                </div>
                <div class="loader__nose"></div>
                <div class="loader__smile"></div>
                
                <!-- Body -->
                <div class="loader__body"></div>
                <div class="loader__shirt"></div>
                
                <!-- Honey Drip -->
                <div class="loader__honey-drip"></div>
            </div>
        </div>
        
        <div class="loader__text">
            <p class="storybook-loader__text">Entering the Hundred Acre Wood...</p>
            <div class="loader__progress">
                <div class="loader__bar"></div>
            </div>
        </div>
    </div>
    
    <!-- Header -->
    <header class="storybook-header">
        <div class="storybook-header__top">
            <!-- Logo -->
            <div class="storybook-logo">
                <div class="storybook-logo__pooh">
                    <!-- Ears -->
                    <div class="storybook-logo__ear storybook-logo__ear--left"></div>
                    <div class="storybook-logo__ear storybook-logo__ear--right"></div>
                    
                    <!-- Face -->
                    <div class="storybook-logo__face"></div>
                    
                    <!-- Face Features -->
                    <div class="storybook-logo__eyes"></div>
                    <div class="storybook-logo__nose"></div>
                    <div class="storybook-logo__smile"></div>
                </div>
                
                <div class="storybook-logo__text">
                    <p class="storybook-logo__eyebrow">A Hundred Acre Wood Celebration</p>
                    <h1 class="storybook-logo__title">Pooh's Honey Hunt</h1>
                    <p class="storybook-logo__subtitle">Join us for a storybook adventure & sweet surprises!</p>
                </div>
            </div>
            
            <!-- Meta Badges -->
            <div class="storybook-header__meta">
                <div class="storybook-badge">
                    <i class="fas fa-calendar-star"></i>
                    <div>
                        <span class="storybook-badge__label">Date</span>
                        <span class="storybook-badge__value">April 24th</span>
                    </div>
                </div>
                <div class="storybook-badge">
                    <i class="fas fa-clock"></i>
                    <div>
                        <span class="storybook-badge__label">Time</span>
                        <span class="storybook-badge__value">2:00 PM</span>
                    </div>
                </div>
                <div class="storybook-badge">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                        <span class="storybook-badge__label">Location</span>
                        <span class="storybook-badge__value">Hundred Acre Wood</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="storybook-nav">
            <button class="storybook-nav__toggle" aria-expanded="false" aria-controls="nav-list">
                <span class="storybook-nav__toggle-line"></span>
                <span class="storybook-nav__toggle-line"></span>
                <span class="storybook-nav__toggle-line"></span>
                <span class="storybook-nav__toggle-label">Story Chapters</span>
            </button>
            <ul class="storybook-nav__list" id="nav-list">
                <li><a href="#chapter-1" class="storybook-nav__link"><i class="fas fa-book-open"></i> The Invitation</a></li>
                <li><a href="#chapter-2" class="storybook-nav__link"><i class="fas fa-users"></i> Meet the Characters</a></li>
                <li><a href="#chapter-3" class="storybook-nav__link"><i class="fas fa-gamepad"></i> Honey Hunt Game</a></li>
                <li><a href="#chapter-4" class="storybook-nav__link"><i class="fas fa-calendar-check"></i> RSVP & Details</a></li>
                <li><a href="#chapter-5" class="storybook-nav__link"><i class="fas fa-gift"></i> Special Surprises</a></li>
            </ul>
        </nav>
    </header>
    
    <!-- Main Content -->
    <main class="storybook-main" id="main-content">
        <!-- Chapter 1: The Invitation -->
        <section id="chapter-1" class="storybook-section storybook-section--divider">
            <div class="storybook-section__inner honey-card honey-card--fullscreen">
                <header class="storybook-section__header">
                    <h2 class="storybook-chapter-label">
                        <i class="fas fa-scroll storybook-chapter-ornament"></i>
                        Chapter 1: The Invitation
                    </h2>
                    <h3 class="storybook-section__title">You're Invited to a Very Important Day</h3>
                    <p class="storybook-section__subtitle">A storybook adventure awaits in the Hundred Acre Wood</p>
                </header>
                
                <div class="storybook-grid">
                    <div class="storybook-card storybook-card--story">
                        <p class="storybook-dropcap">
                            Once upon a time, in the Hundred Acre Wood, there lived a bear called Winnie-the-Pooh. 
                            Pooh loved honey more than anything in the world. One sunny morning, he discovered that 
                            his honey pots were nearly empty! "Oh, bother," said Pooh. But then he had a 
                            <span class="storybook-text-highlight">wonderful idea</span>.
                        </p>
                        <p>
                            "I shall have a Honey Hunt!" exclaimed Pooh. "And I shall invite all my friends to help me 
                            find the sweetest honey in all the wood." So Pooh began writing invitations to Piglet, Tigger, 
                            Eeyore, Rabbit, Owl, Kanga, and Roo. Each invitation was written with a special message, just 
                            for them.
                        </p>
                        <p>
                            This is where <strong>you</strong> come in, dear reader. You are cordially invited to join 
                            Pooh and his friends for a day of adventure, games, and of course, plenty of honey!
                        </p>
                    </div>
                    
                    <div class="storybook-card storybook-card--details">
                        <h4><i class="fas fa-info-circle"></i> Event Details</h4>
                        <dl class="storybook-detail-list">
                            <div class="storybook-detail-item">
                                <dt>Date:</dt>
                                <dd>April 24th, 2024</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>Time:</dt>
                                <dd>2:00 PM - 5:00 PM</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>Location:</dt>
                                <dd>The Hundred Acre Wood</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>Dress Code:</dt>
                                <dd>Comfortable & Adventurous</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>RSVP By:</dt>
                                <dd>April 17th</dd>
                            </div>
                        </dl>
                        <p class="storybook-card__note">
                            <i class="fas fa-exclamation-circle"></i> 
                            <strong>Note:</strong> Please bring your imagination and appetite for adventure!
                        </p>
                    </div>
                </div>
                
                <div class="storybook-note-banner">
                    <i class="fas fa-lightbulb"></i>
                    <div>
                        <strong>Pooh's Wisdom:</strong> "A day without a friend is like a pot without a single drop of honey left at the bottom."
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Chapter 2: Meet the Characters -->
        <section id="chapter-2" class="storybook-section storybook-section--characters">
            <div class="storybook-section__inner honey-card honey-card--fullscreen">
                <header class="storybook-section__header">
                    <h2 class="storybook-chapter-label">
                        <i class="fas fa-users storybook-chapter-ornament"></i>
                        Chapter 2: Meet the Characters
                    </h2>
                    <h3 class="storybook-section__title">Friends of the Hundred Acre Wood</h3>
                    <p class="storybook-section__subtitle">Get to know the lovable characters who will be joining the adventure</p>
                </header>
                
                <div class="storybook-character-grid">
                    <article class="storybook-character">
                        <div class="storybook-character__avatar">
                            <i class="fas fa-bear" style="font-size: 3rem; color: #f3c562;"></i>
                        </div>
                        <div class="storybook-character__content">
                            <h3 class="storybook-character__name">Winnie-the-Pooh</h3>
                            <p class="storybook-character__role">Honey Enthusiast & Host</p>
                            <p class="storybook-character__description">A bear of very little brain but a huge heart for honey. Pooh is always ready for an adventure, especially if it involves finding sweet treats.</p>
                        </div>
                    </article>
                    
                    <article class="storybook-character">
                        <div class="storybook-character__avatar">
                            <i class="fas fa-pig" style="font-size: 3rem; color: #ffb6c1;"></i>
                        </div>
                        <div class="storybook-character__content">
                            <h3 class="storybook-character__name">Piglet</h3>
                            <p class="storybook-character__role">Brave Little Friend</p>
                            <p class="storybook-character__description">Small and often frightened, but with the biggest heart. Piglet proves that even the smallest can be the bravest of all.</p>
                        </div>
                    </article>
                    
                    <article class="storybook-character">
                        <div class="storybook-character__avatar">
                            <i class="fas fa-paw" style="font-size: 3rem; color: #ff8c00;"></i>
                        </div>
                        <div class="storybook-character__content">
                            <h3 class="storybook-character__name">Tigger</h3>
                            <p class="storybook-character__role">Bouncy Companion</p>
                            <p class="storybook-character__description">The only one! Tigger bounces everywhere he goes and brings endless energy and laughter to any gathering.</p>
                        </div>
                    </article>
                    
                    <article class="storybook-character">
                        <div class="storybook-character__avatar">
                            <i class="fas fa-horse-head" style="font-size: 3rem; color: #a9a9a9;"></i>
                        </div>
                        <div class="storybook-character__content">
                            <h3 class="storybook-character__name">Eeyore</h3>
                            <p class="storybook-character__role">Thoughtful Donkey</p>
                            <p class="storybook-character__description">A bit gloomy but deeply loyal. Eeyore may expect the worst, but he always shows up for his friends.</p>
                        </div>
                    </article>
                </div>
                
                <div class="storybook-note-banner">
                    <i class="fas fa-comments"></i>
                    <div>
                        <strong>Fun Fact:</strong> Each character brings their own special talent to the Honey Hunt. Who will be your favorite?
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Chapter 3: Honey Hunt Game -->
        <section id="chapter-3" class="storybook-section storybook-section--game">
            <div class="storybook-section__inner honey-card honey-card--fullscreen">
                <header class="storybook-section__header">
                    <h2 class="storybook-chapter-label">
                        <i class="fas fa-gamepad storybook-chapter-ornament"></i>
                        Chapter 3: The Honey Hunt Game
                    </h2>
                    <h3 class="storybook-section__title">Find the Hidden Honey Pots</h3>
                    <p class="storybook-section__subtitle">Help Pooh find all the honey pots in the Hundred Acre Wood!</p>
                </header>
                
                <div class="game-layout">
                    <div class="game-card">
                        <div class="game-card__header">
                            <div class="game-card__title-group">
                                <div class="game-card__icon">
                                    <i class="fas fa-honey-pot"></i>
                                </div>
                                <div>
                                    <h4 class="game-card__title">Honey Hunt Adventure</h4>
                                    <p class="game-card__subtitle">Click or tap on the honey pots to collect them!</p>
                                </div>
                            </div>
                            
                            <!-- HUD -->
                            <div class="game-card__stats">
                                <div class="game-stat">
                                    <span class="game-stat__label">Score</span>
                                    <span class="game-stat__value" id="score">0</span>
                                </div>
                                <div class="game-stat">
                                    <span class="game-stat__label">Time</span>
                                    <span class="game-stat__value" id="timer">60</span>
                                </div>
                                <div class="game-stat">
                                    <span class="game-stat__label">Pots</span>
                                    <span class="game-stat__value" id="potsCount">0</span>
                                </div>
                                <div class="game-stat">
                                    <span class="game-stat__label">Streak</span>
                                    <span class="game-stat__value" id="streak">x1</span>
                                </div>
                                <div class="game-stat">
                                    <span class="game-stat__label">High Score</span>
                                    <span class="game-stat__value" id="highScoreStat">0</span>
                                </div>
                            </div>

                            <!-- Power-ups -->
                            <div class="power-ups">
                                <div class="power-up power-up--magnet" data-tooltip="Attracts nearby honey pots" id="magnetPowerUp">
                                    <div class="power-up__icon">
                                        <i class="fas fa-magnet"></i>
                                    </div>
                                    <span class="power-up__count" id="magnetCount">3</span>
                                </div>
                                <div class="power-up power-up--time" data-tooltip="Adds 10 seconds" id="timePowerUp">
                                    <div class="power-up__icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <span class="power-up__count" id="timeCount">3</span>
                                </div>
                                <div class="power-up power-up--shield" data-tooltip="Protects from bees" id="shieldPowerUp">
                                    <div class="power-up__icon">
                                        <i class="fas fa-shield-alt"></i>
                                    </div>
                                    <span class="power-up__count" id="shieldCount">3</span>
                                </div>
                            </div>

                            <div class="streak-meter" aria-live="polite">
                                <div class="streak-meter__label">
                                    <span><i class="fas fa-bolt"></i> Streak Boost</span>
                                    <span id="streakHint">Keep a rhythm for golden pots</span>
                                </div>
                                <div class="streak-meter__track" aria-hidden="true">
                                    <div class="streak-meter__fill" id="streakFill"></div>
                                </div>
                            </div>

                            <div class="objective-tracker" aria-live="polite">
                                <div class="objective-tracker__header">
                                    <div>
                                        <p class="objective-tracker__kicker">Quest progress</p>
                                        <p class="objective-tracker__title" id="objectiveLabel">0 / 10 pots</p>
                                    </div>
                                    <span class="objective-tracker__badge objective-tracker__badge--alert" id="shieldStatus">
                                        <i class="fas fa-shield-alt"></i> No bee shield
                                    </span>
                                </div>
                                <div class="objective-tracker__bar" aria-hidden="true">
                                    <div class="objective-tracker__fill" id="objectiveFill"></div>
                                </div>
                                <p class="objective-tracker__note" id="objectiveNote">Collect 10 pots to earn the Honey Hunter Certificate.</p>
                            </div>
                        </div>

                        <!-- Status Bar -->
                        <div class="honey-status">
                            <div class="honey-status__icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <p id="statusText">Click START to begin the Honey Hunt! Tap the honey pots to collect them.</p>
                        </div>
                        
                        <!-- Game Canvas -->
                        <div class="game-canvas-wrapper honey-canvas-shell honey-canvas-shell--tall">
                            <div class="honey-canvas-inner">
                                <canvas id="gameCanvas" class="game-canvas" width="800" height="500"></canvas>
                                <div class="game-overlay" id="gameOverlay" aria-live="assertive">
                                    <div class="game-overlay__badge" id="overlayText">Ready?</div>
                                    <p class="game-overlay__hint" id="overlayHint">Press Start to begin the honey dash.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Controls -->
                        <div class="game-card__footer">
                            <div class="honey-controls">
                                <div class="honey-controls__left">
                                    <button class="btn btn--primary" id="startBtn">
                                        <i class="fas fa-play"></i> Start Game
                                    </button>
                                    <button class="btn btn--ghost" id="pauseBtn">
                                        <i class="fas fa-pause"></i> Pause
                                    </button>
                                    <button class="btn btn--ghost" id="resetBtn">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                </div>
                                <div class="honey-controls__right">
                                    <div class="difficulty-pill">
                                        <i class="fas fa-sliders-h"></i>
                                        <label for="difficulty">Difficulty:</label>
                                        <select id="difficulty">
                                            <option value="easy">Easy</option>
                                            <option value="medium" selected>Medium</option>
                                            <option value="hard">Hard</option>
                                            <option value="insane">Insane</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Instructions -->
                            <div class="game-controls game-controls--secondary">
                                <p class="game-instructions">
                                    <strong>How to play:</strong> Tap the floating honey pots to collect honey. Golden pots sparkle for extra points and bonus time, but pesky bees will steal honey if you tap them!
                                </p>
                                <p class="game-note">
                                    <i class="fas fa-lightbulb"></i>
                                    Goal: Chain quick collections to build your streak multiplier and reach 10+ pots in 60 seconds to win.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sidebar -->
                    <div class="game-layout__sidebar">
                        <div class="game-prompt-card">
                            <h4 class="game-prompt-card__title">
                                <i class="fas fa-bullhorn"></i>
                                Today's Challenge
                            </h4>
                            <p class="game-prompt-card__subtitle">Can you beat the high score?</p>
                            <div class="game-prompt-card__prompt" id="gamePrompt">
                                Find 10 honey pots in 60 seconds to unlock the next chapter!
                                <br><br>
                                <strong>High Score:</strong> <span id="highScore">0</span>
                            </div>
                        </div>
                        
                        <div class="game-chapter-note">
                            <h5><i class="fas fa-trophy"></i> Rewards</h5>
                            <ul class="storybook-list">
                                <li>10+ pots: Honey Hunter Certificate</li>
                                <li>15+ pots: Golden Honey Badge</li>
                                <li>20+ pots: Master Collector Trophy</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Chapter 4: RSVP & Details -->
        <section id="chapter-4" class="storybook-section storybook-section--rsvp">
            <div class="storybook-section__inner honey-card honey-card--fullscreen">
                <header class="storybook-section__header">
                    <h2 class="storybook-chapter-label">
                        <i class="fas fa-calendar-check storybook-chapter-ornament"></i>
                        Chapter 4: RSVP & Details
                    </h2>
                    <h3 class="storybook-section__title">Will You Join the Adventure?</h3>
                    <p class="storybook-section__subtitle">Let us know if you can make it to the Hundred Acre Wood</p>
                </header>
                
                <div class="storybook-grid storybook-grid--columns-2">
                    <div>
                        <form class="storybook-form" id="rsvpForm">
                            <div class="storybook-form__group">
                                <label for="name"><i class="fas fa-user"></i> Your Name</label>
                                <input type="text" id="name" name="name" required placeholder="Christopher Robin">
                            </div>
                            
                            <div class="storybook-form__group">
                                <label for="email"><i class="fas fa-envelope"></i> Email Address</label>
                                <input type="email" id="email" name="email" required placeholder="christopher@hundredacrewood.com">
                            </div>
                            
                            <div class="storybook-form__group">
                                <label for="guests"><i class="fas fa-users"></i> Number of Guests</label>
                                <select id="guests" name="guests">
                                    <option value="1">1 (Just me)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5+ (A whole party!)</option>
                                </select>
                            </div>
                            
                            <div class="storybook-form__group">
                                <label for="character"><i class="fas fa-heart"></i> Favorite Character</label>
                                <select id="character" name="character">
                                    <option value="pooh">Winnie-the-Pooh</option>
                                    <option value="piglet">Piglet</option>
                                    <option value="tigger">Tigger</option>
                                    <option value="eeyore">Eeyore</option>
                                </select>
                            </div>
                            
                            <div class="storybook-form__actions">
                                <button type="submit" class="btn btn--primary">
                                    <i class="fas fa-paper-plane"></i> Send RSVP
                                </button>
                                <div class="storybook-form__status" id="formStatus"></div>
                            </div>
                        </form>
                    </div>
                    
                    <div class="storybook-rsvp-note">
                        <h3><i class="fas fa-info-circle"></i> Important Information</h3>
                        <p>Before you RSVP, here are a few things to know:</p>
                        <ul class="storybook-list">
                            <li>The event will take place rain or shine (we have plenty of umbrellas!)</li>
                            <li>Comfortable shoes are recommended for exploring the Wood</li>
                            <li>All honey served is 100% bee-approved and delicious</li>
                            <li>There will be activities for adventurers of all ages</li>
                            <li>Special surprises await those who complete the Honey Hunt game</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Chapter 5: Special Surprises -->
        <section id="chapter-5" class="storybook-section">
            <div class="storybook-section__inner honey-card honey-card--fullscreen">
                <header class="storybook-section__header">
                    <h2 class="storybook-chapter-label">
                        <i class="fas fa-gift storybook-chapter-ornament"></i>
                        Chapter 5: Special Surprises
                    </h2>
                    <h3 class="storybook-section__title">What Awaits You in the Wood</h3>
                    <p class="storybook-section__subtitle">Exciting activities and sweet rewards for all adventurers</p>
                </header>
                
                <div class="honey-hud">
                    <div class="hud-pill">
                        <span class="hud-pill__label">Honey Tasting</span>
                        <span class="hud-pill__value"><i class="fas fa-utensil-spoon"></i> 10+ Varieties</span>
                    </div>
                    <div class="hud-pill">
                        <span class="hud-pill__label">Story Time</span>
                        <span class="hud-pill__value"><i class="fas fa-book"></i> With Owl</span>
                    </div>
                    <div class="hud-pill hud-pill--highlight">
                        <span class="hud-pill__label">Treasure Hunt</span>
                        <span class="hud-pill__value"><i class="fas fa-map"></i> 5 Locations</span>
                    </div>
                    <div class="hud-pill">
                        <span class="hud-pill__label">Photo Ops</span>
                        <span class="hud-pill__value"><i class="fas fa-camera"></i> Character Meet</span>
                    </div>
                </div>
                
                <div class="storybook-grid">
                    <div class="storybook-card">
                        <h4><i class="fas fa-medal" style="color: var(--color-gold);"></i> Rewards & Prizes</h4>
                        <p>Every adventurer who completes the Honey Hunt will receive:</p>
                        <ul class="storybook-list">
                            <li>Official "Honey Hunter" certificate signed by Pooh</li>
                            <li>A small pot of Hundred Acre Wood honey</li>
                            <li>Special button badge to show your achievement</li>
                            <li>Entry into the grand prize drawing</li>
                        </ul>
                        <p style="margin-top: 12px;"><strong>Grand Prize:</strong> A year's supply of honey and a personalized storybook!</p>
                    </div>
                    
                    <div class="storybook-card">
                        <h4><i class="fas fa-calendar-alt" style="color: var(--pooh-red);"></i> Schedule of Events</h4>
                        <dl class="storybook-detail-list">
                            <div class="storybook-detail-item">
                                <dt>2:00 PM</dt>
                                <dd>Welcome & Introductions</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>2:30 PM</dt>
                                <dd>Honey Hunt Game Begins</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>3:30 PM</dt>
                                <dd>Story Time with Owl</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>4:00 PM</dt>
                                <dd>Honey Tasting & Snacks</dd>
                            </div>
                            <div class="storybook-detail-item">
                                <dt>4:45 PM</dt>
                                <dd>Prize Ceremony & Farewells</dd>
                            </div>
                        </dl>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="storybook-footer">
        <div class="storybook-footer__inner">
            <p class="storybook-footer__text">
                Made with <i class="fas fa-heart" style="color: var(--pooh-red);"></i> in the Hundred Acre Wood
            </p>
            <p class="storybook-footer__credits">
                &copy; 2024 Winnie-the-Pooh's Honey Hunt. All honey rights reserved.<br>
                This is a fan-made celebration site. Winnie-the-Pooh and friends are copyright A.A. Milne and E.H. Shepard.
            </p>
        </div>
    </footer>
    
    <!-- Enhanced JavaScript -->
    <script>
        // Remove loader when page loads
        window.addEventListener('load', function() {
            const loader = document.getElementById('loader');
            setTimeout(() => {
                loader.classList.add('loader--hidden');
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 500);
            }, 1500);
            
            // Initialize game
            initGame();
        });

        // Mobile navigation toggle
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.querySelector('.storybook-nav__toggle');
            const navList = document.querySelector('.storybook-nav__list');
            
            if (navToggle && navList) {
                navToggle.addEventListener('click', function() {
                    const expanded = this.getAttribute('aria-expanded') === 'true' || false;
                    this.setAttribute('aria-expanded', !expanded);
                    navList.classList.toggle('storybook-nav__list--open');
                });
            }

            // Form submission
            const rsvpForm = document.getElementById('rsvpForm');
            const formStatus = document.getElementById('formStatus');
            
            if (rsvpForm) {
                rsvpForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Get form data
                    const name = document.getElementById('name').value;
                    const character = document.getElementById('character').options[document.getElementById('character').selectedIndex].text;
                    
                    // Show success message
                    formStatus.innerHTML = `
                        <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: var(--radius-sm); border-left: 4px solid var(--color-success);">
                            <i class="fas fa-check-circle" style="color: var(--color-success);"></i>
                            <strong>Thank you, ${name}!</strong> Your RSVP has been sent. We can't wait to see you in the Hundred Acre Wood!
                            <br><small style="margin-top: 8px; display: block;">Psst... ${character} is excited to meet you!</small>
                        </div>
                    `;
                    
                    // Add animation
                    formStatus.style.animation = 'cardAppear 0.5s ease';
                    
                    // Reset form
                    setTimeout(() => {
                        rsvpForm.reset();
                        formStatus.innerHTML = '';
                    }, 5000);
                });
            }

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        
                        // Close mobile menu if open
                        if (navList && navList.classList.contains('storybook-nav__list--open')) {
                            navList.classList.remove('storybook-nav__list--open');
                            navToggle.setAttribute('aria-expanded', 'false');
                        }
                    }
                });
            });
        });

        // =========================
        // ENHANCED GAME ENGINE
        // =========================
        class GameEngine {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.scoreElement = document.getElementById('score');
                this.timerElement = document.getElementById('timer');
                this.potsCountElement = document.getElementById('potsCount');
                this.streakElement = document.getElementById('streak');
                this.highScoreElement = document.getElementById('highScore');
                this.highScoreStat = document.getElementById('highScoreStat');
                this.statusText = document.getElementById('statusText');
                this.streakFill = document.getElementById('streakFill');
                this.streakHint = document.getElementById('streakHint');
                this.overlay = document.getElementById('gameOverlay');
                this.overlayText = document.getElementById('overlayText');
                this.overlayHint = document.getElementById('overlayHint');
                this.objectiveFill = document.getElementById('objectiveFill');
                this.objectiveLabel = document.getElementById('objectiveLabel');
                this.objectiveNote = document.getElementById('objectiveNote');
                this.shieldStatus = document.getElementById('shieldStatus');
                this.gamePrompt = document.getElementById('gamePrompt');
                
                // Power-up elements
                this.magnetCount = document.getElementById('magnetCount');
                this.timeCount = document.getElementById('timeCount');
                this.shieldCount = document.getElementById('shieldCount');
                this.magnetPowerUp = document.getElementById('magnetPowerUp');
                this.timePowerUp = document.getElementById('timePowerUp');
                this.shieldPowerUp = document.getElementById('shieldPowerUp');
                
                // Buttons
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.difficultySelect = document.getElementById('difficulty');
                
                // Game state
                this.state = {
                    score: 0,
                    timeLeft: 60,
                    potsCollected: 0,
                    gameActive: false,
                    gamePaused: false,
                    gameOver: false,
                    difficulty: 'medium',
                    highScore: Number(localStorage.getItem('poohHighScore')) || 0,
                    streakMultiplier: 1,
                    lastCollectTime: 0,
                    streakTimeout: 1500,
                    honeyPots: [],
                    bees: [],
                    particles: [],
                    powerUps: {
                        magnet: { count: 3, active: false, duration: 10000 },
                        time: { count: 3, active: false },
                        shield: { count: 3, active: false, duration: 5000 }
                    },
                    activePowerUps: new Map(),
                    lastSpawn: 0,
                    spawnRates: {
                        easy: 1500,
                        medium: 1000,
                        hard: 700,
                        insane: 500
                    },
                    beeSpawnRates: {
                        easy: 5000,
                        medium: 3000,
                        hard: 2000,
                        insane: 1000
                    },
                    lastBeeSpawn: 0,
                    beeSpeeds: {
                        easy: 1,
                        medium: 2,
                        hard: 3,
                        insane: 4
                    },
                    shieldActiveUntil: 0,
                    lastMilestoneNotified: 0,
                    animationId: null,
                    timerInterval: null,
                    countdown: 0,
                    countingDown: false,
                    countdownInterval: null,
                    milestoneRewards: [
                        { count: 10, title: 'Honey Hunter Certificate' },
                        { count: 15, title: 'Golden Honey Badge' },
                        { count: 20, title: 'Master Collector Trophy' }
                    ]
                };
                
                // Images cache
                this.images = {};
                this.init();
            }
            
            init() {
                this.setCanvasSize();
                this.createImageAssets();
                this.bindEvents();
                this.resetGame();
                this.updateUI();
                this.gameLoop();
                
                // Set high score
                this.highScoreElement.textContent = this.state.highScore;
                this.highScoreStat.textContent = this.state.highScore;
            }
            
            setCanvasSize() {
                const container = this.canvas.parentElement;
                this.canvas.width = container.clientWidth;
                this.canvas.height = container.clientHeight;
            }
            
            createImageAssets() {
                // Create honey pot image
                const potCanvas = document.createElement('canvas');
                potCanvas.width = 60;
                potCanvas.height = 60;
                const potCtx = potCanvas.getContext('2d');
                
                // Honey pot body
                potCtx.fillStyle = '#8B4513';
                potCtx.beginPath();
                potCtx.ellipse(30, 40, 20, 10, 0, 0, Math.PI * 2);
                potCtx.fill();
                
                // Honey
                potCtx.fillStyle = '#FFD700';
                potCtx.beginPath();
                potCtx.ellipse(30, 35, 18, 8, 0, 0, Math.PI * 2);
                potCtx.fill();
                
                // Shine
                potCtx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                potCtx.beginPath();
                potCtx.ellipse(20, 30, 5, 3, 0, 0, Math.PI * 2);
                potCtx.fill();
                
                this.images.honeyPot = potCanvas;
                
                // Create golden honey pot
                const goldenPotCanvas = document.createElement('canvas');
                goldenPotCanvas.width = 70;
                goldenPotCanvas.height = 70;
                const goldenCtx = goldenPotCanvas.getContext('2d');
                
                goldenCtx.fillStyle = '#B8860B';
                goldenCtx.beginPath();
                goldenCtx.ellipse(35, 45, 25, 12, 0, 0, Math.PI * 2);
                goldenCtx.fill();
                
                goldenCtx.fillStyle = '#FFE472';
                goldenCtx.beginPath();
                goldenCtx.ellipse(35, 40, 22, 10, 0, 0, Math.PI * 2);
                goldenCtx.fill();
                
                goldenCtx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                goldenCtx.beginPath();
                goldenCtx.ellipse(25, 35, 6, 4, 0, 0, Math.PI * 2);
                goldenCtx.fill();
                
                goldenCtx.strokeStyle = 'rgba(255, 215, 0, 0.6)';
                goldenCtx.lineWidth = 4;
                goldenCtx.stroke();
                
                this.images.goldenPot = goldenPotCanvas;
                
                // Create bee image
                const beeCanvas = document.createElement('canvas');
                beeCanvas.width = 40;
                beeCanvas.height = 40;
                const beeCtx = beeCanvas.getContext('2d');
                
                // Bee body
                beeCtx.fillStyle = '#FFD54F';
                beeCtx.beginPath();
                beeCtx.ellipse(20, 20, 15, 10, 0, 0, Math.PI * 2);
                beeCtx.fill();
                
                // Stripes
                beeCtx.fillStyle = '#333';
                beeCtx.fillRect(10, 15, 5, 10);
                beeCtx.fillRect(18, 15, 5, 10);
                beeCtx.fillRect(26, 15, 5, 10);
                
                // Wings
                beeCtx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                beeCtx.beginPath();
                beeCtx.ellipse(10, 10, 8, 4, Math.PI/4, 0, Math.PI * 2);
                beeCtx.ellipse(30, 10, 8, 4, -Math.PI/4, 0, Math.PI * 2);
                beeCtx.fill();
                
                this.images.bee = beeCanvas;
            }
            
            bindEvents() {
                // Canvas click/touch
                this.canvas.addEventListener('click', (e) => this.handleClick(e));
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const rect = this.canvas.getBoundingClientRect();
                    const x = touch.clientX - rect.left;
                    const y = touch.clientY - rect.top;
                    this.handleClick({ clientX: touch.clientX, clientY: touch.clientY });
                }, { passive: false });
                
                // Button events
                this.startBtn.addEventListener('click', () => this.startGame());
                this.pauseBtn.addEventListener('click', () => this.pauseGame());
                this.resetBtn.addEventListener('click', () => this.resetGame());
                
                // Difficulty selector
                this.difficultySelect.addEventListener('change', (e) => {
                    this.state.difficulty = e.target.value;
                    if (!this.state.gameActive) {
                        this.createHoneyPots();
                        this.createBees();
                        this.gameLoop();
                    }
                });
                
                // Power-up clicks
                this.magnetPowerUp.addEventListener('click', () => this.activatePowerUp('magnet'));
                this.timePowerUp.addEventListener('click', () => this.activatePowerUp('time'));
                this.shieldPowerUp.addEventListener('click', () => this.activatePowerUp('shield'));
                
                // Window resize
                window.addEventListener('resize', () => {
                    if (!this.state.gameActive) {
                        this.setCanvasSize();
                        this.gameLoop();
                    }
                });
                
                // Keyboard controls
                document.addEventListener('keydown', (e) => {
                    if (!this.state.gameActive) return;
                    
                    switch(e.key) {
                        case ' ':
                            e.preventDefault();
                            this.pauseGame();
                            break;
                        case 'r':
                        case 'R':
                            this.resetGame();
                            break;
                        case '1':
                            this.activatePowerUp('magnet');
                            break;
                        case '2':
                            this.activatePowerUp('time');
                            break;
                        case '3':
                            this.activatePowerUp('shield');
                            break;
                    }
                });
            }
            
            startGame() {
                if (this.state.gameActive || this.state.countingDown) return;
                
                this.resetRoundState();
                this.createHoneyPots();
                this.createBees();
                this.updateUI();
                this.gameLoop();
                
                this.statusText.textContent = 'Ready? A short countdown will launch your honey dash!';
                this.state.countingDown = true;
                this.state.countdown = 3;
                this.showOverlay('3', 'Eyes on the golden pots. Bees sting, honey sings!');
                
                if (this.state.animationId) {
                    cancelAnimationFrame(this.state.animationId);
                }
                
                this.state.countdownInterval = setInterval(() => {
                    if (this.state.countdown <= 0) {
                        clearInterval(this.state.countdownInterval);
                        this.state.countdownInterval = null;
                        this.state.countingDown = false;
                        this.showOverlay('Go!', 'Tap fast to build streaks!');
                        setTimeout(() => this.hideOverlay(), 400);
                        this.beginActivePlay();
                        return;
                    }
                    
                    const hype = this.state.countdown === 1 ? 'Lead with quick taps!' : 'Get set for the buzz!';
                    this.showOverlay(this.state.countdown, hype);
                    this.state.countdown--;
                    this.gameLoop();
                }, 850);
            }
            
            beginActivePlay() {
                this.state.gameActive = true;
                this.state.gamePaused = false;
                this.state.gameOver = false;
                this.state.timeLeft = 60;
                this.state.score = 0;
                this.state.potsCollected = 0;
                this.state.streakMultiplier = 1;
                this.state.lastCollectTime = 0;
                
                this.statusText.textContent = 'Game started! Collect pots, dodge bees, and chase that golden glow!';
                this.startTimer();
                this.gameLoop();
            }
            
            pauseGame() {
                if (!this.state.gameActive || this.state.gameOver) return;
                
                this.state.gamePaused = !this.state.gamePaused;
                
                if (this.state.gamePaused) {
                    this.statusText.textContent = 'Game paused. Click PAUSE again to resume.';
                    this.showOverlay('Paused', 'Deep breath. Keep your streak alive when you return!', 'alert');
                } else {
                    this.statusText.textContent = 'Game resumed! Keep collecting honey pots!';
                    this.hideOverlay();
                    this.gameLoop();
                }
            }
            
            resetGame() {
                this.state.gameActive = false;
                this.state.gamePaused = false;
                this.state.gameOver = false;
                
                if (this.state.animationId) {
                    cancelAnimationFrame(this.state.animationId);
                    this.state.animationId = null;
                }
                
                if (this.state.timerInterval) {
                    clearInterval(this.state.timerInterval);
                    this.state.timerInterval = null;
                }
                
                if (this.state.countdownInterval) {
                    clearInterval(this.state.countdownInterval);
                    this.state.countdownInterval = null;
                }
                
                this.resetRoundState();
                this.createHoneyPots();
                this.createBees();
                this.updateUI();
                this.gameLoop();
                this.statusText.textContent = 'Reset! Press start to launch another honey hunt.';
            }
            
            resetRoundState() {
                this.state.score = 0;
                this.state.timeLeft = 60;
                this.state.potsCollected = 0;
                this.state.honeyPots = [];
                this.state.bees = [];
                this.state.particles = [];
                this.state.gameActive = false;
                this.state.gamePaused = false;
                this.state.gameOver = false;
                this.state.streakMultiplier = 1;
                this.state.lastCollectTime = 0;
                this.state.countingDown = false;
                this.state.countdown = 0;
                this.state.shieldActiveUntil = 0;
                this.state.lastMilestoneNotified = 0;
                this.state.activePowerUps.clear();
                
                this.hideOverlay();
            }
            
            startTimer() {
                if (this.state.timerInterval) clearInterval(this.state.timerInterval);
                
                this.state.timerInterval = setInterval(() => {
                    if (!this.state.gamePaused && this.state.gameActive && !this.state.gameOver) {
                        this.state.timeLeft--;
                        this.updateUI();
                        
                        if (this.state.timeLeft <= 0) {
                            this.gameOver();
                        }
                    }
                }, 1000);
            }
            
            gameLoop() {
                if (!this.state.gameActive || this.state.gamePaused) {
                    // Still run loop for paused/start screen animations
                    this.drawBackground();
                    this.drawGameObjects();
                    this.drawParticles();
                    this.drawUI();
                    this.state.animationId = requestAnimationFrame(() => this.gameLoop());
                    return;
                }
                
                // Update game state
                this.updateGame();
                
                // Draw everything
                this.drawBackground();
                this.drawGameObjects();
                this.drawParticles();
                this.drawUI();
                
                // Continue loop
                this.state.animationId = requestAnimationFrame(() => this.gameLoop());
            }
            
            updateGame() {
                const now = performance.now();
                
                // Spawn honey pots
                if (now - this.state.lastSpawn > this.state.spawnRates[this.state.difficulty]) {
                    this.spawnHoneyPot();
                    this.state.lastSpawn = now;
                }
                
                // Spawn bees
                if (now - this.state.lastBeeSpawn > this.state.beeSpawnRates[this.state.difficulty]) {
                    this.spawnBee();
                    this.state.lastBeeSpawn = now;
                }
                
                // Update honey pots
                this.state.honeyPots = this.state.honeyPots.filter(pot => {
                    pot.y += pot.speed;
                    pot.rotation += pot.rotationSpeed;
                    
                    // Magnet effect
                    if (this.state.activePowerUps.has('magnet')) {
                        const dx = this.canvas.width / 2 - pot.x;
                        const dy = this.canvas.height / 2 - pot.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 200) {
                            pot.x += dx * 0.05;
                            pot.y += dy * 0.05;
                        }
                    }
                    
                    return pot.y < this.canvas.height + 50;
                });
                
                // Update bees
                this.state.bees = this.state.bees.filter(bee => {
                    bee.x += Math.cos(bee.angle) * bee.speed;
                    bee.y += Math.sin(bee.angle) * bee.speed;
                    bee.angle += bee.wiggle;
                    
                    // Bounce off walls
                    if (bee.x < 0 || bee.x > this.canvas.width) bee.angle = Math.PI - bee.angle;
                    if (bee.y < 0 || bee.y > this.canvas.height - 100) bee.angle = -bee.angle;
                    
                    return true;
                });
                
                // Update particles
                this.state.particles = this.state.particles.filter(particle => {
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    particle.life--;
                    particle.vy += 0.1; // Gravity
                    
                    return particle.life > 0 && particle.y < this.canvas.height;
                });
                
                // Update streak decay
                if (now - this.state.lastCollectTime > this.state.streakTimeout && this.state.streakMultiplier > 1) {
                    this.state.streakMultiplier = 1;
                    this.updateUI();
                }
                
                // Update active power-ups
                const expired = [];
                this.state.activePowerUps.forEach((expiry, type) => {
                    if (now > expiry) {
                        expired.push(type);
                    }
                });
                expired.forEach(type => this.state.activePowerUps.delete(type));
                
                // Update shield status
                this.updateShieldStatus();
            }
            
            drawBackground() {
                // Sky gradient
                const skyGradient = this.ctx.createLinearGradient(0, 0, 0, this.canvas.height);
                skyGradient.addColorStop(0, '#87CEEB');
                skyGradient.addColorStop(1, '#B0E0E6');
                this.ctx.fillStyle = skyGradient;
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Clouds
                for (let i = 0; i < 5; i++) {
                    const x = (i * 200 + performance.now() * 0.01) % (this.canvas.width + 400) - 200;
                    const y = 50 + Math.sin(i * 0.5 + performance.now() * 0.001) * 20;
                    const size = 30 + Math.sin(i + performance.now() * 0.002) * 10;
                    
                    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, size, 0, Math.PI * 2);
                    this.ctx.arc(x + size * 0.7, y - size * 0.3, size * 0.8, 0, Math.PI * 2);
                    this.ctx.arc(x + size * 1.4, y, size * 0.7, 0, Math.PI * 2);
                    this.ctx.fill();
                }
                
                // Grass
                const grassGradient = this.ctx.createLinearGradient(0, this.canvas.height - 100, 0, this.canvas.height);
                grassGradient.addColorStop(0, '#7CFC00');
                grassGradient.addColorStop(1, '#32CD32');
                this.ctx.fillStyle = grassGradient;
                this.ctx.fillRect(0, this.canvas.height - 100, this.canvas.width, 100);
                
                // Trees
                for (let i = 0; i < 3; i++) {
                    const x = 100 + i * (this.canvas.width - 200) / 2;
                    const treeHeight = 150 + Math.sin(i + performance.now() * 0.001) * 10;
                    
                    // Tree trunk
                    this.ctx.fillStyle = '#8B4513';
                    this.ctx.fillRect(x - 15, this.canvas.height - 100 - treeHeight, 30, treeHeight);
                    
                    // Leaves
                    this.ctx.fillStyle = '#228B22';
                    this.ctx.beginPath();
                    this.ctx.arc(x, this.canvas.height - 100 - treeHeight - 20, 60, 0, Math.PI * 2);
                    this.ctx.fill();
                }
            }
            
            drawGameObjects() {
                // Draw honey pots
                this.state.honeyPots.forEach(pot => {
                    this.ctx.save();
                    this.ctx.translate(pot.x, pot.y);
                    this.ctx.rotate(pot.rotation);
                    
                    // Draw based on type
                    const image = pot.type === 'golden' ? this.images.goldenPot : this.images.honeyPot;
                    this.ctx.drawImage(image, -pot.size/2, -pot.size/2, pot.size, pot.size);
                    
                    this.ctx.restore();
                });
                
                // Draw bees
                this.state.bees.forEach(bee => {
                    this.ctx.save();
                    this.ctx.translate(bee.x, bee.y);
                    this.ctx.rotate(bee.angle);
                    this.ctx.drawImage(this.images.bee, -20, -20, 40, 40);
                    this.ctx.restore();
                    
                    // Draw trail
                    this.ctx.beginPath();
                    this.ctx.moveTo(bee.x, bee.y);
                    this.ctx.lineTo(bee.x - Math.cos(bee.angle) * 10, bee.y - Math.sin(bee.angle) * 10);
                    this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                    this.ctx.lineWidth = 2;
                    this.ctx.stroke();
                });
            }
            
            drawParticles() {
                this.state.particles.forEach(particle => {
                    this.ctx.save();
                    this.ctx.globalAlpha = particle.life / 100;
                    this.ctx.fillStyle = particle.color;
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.ctx.fill();
                    this.ctx.restore();
                });
            }
            
            drawUI() {
                // Draw score popups
                this.state.particles
                    .filter(p => p.type === 'score')
                    .forEach(particle => {
                        this.ctx.save();
                        this.ctx.globalAlpha = particle.life / 100;
                        this.ctx.fillStyle = particle.color;
                        this.ctx.font = 'bold 24px "Schoolbell"';
                        this.ctx.textAlign = 'center';
                        this.ctx.fillText(`+${particle.value}`, particle.x, particle.y);
                        this.ctx.restore();
                    });
            }
            
            handleClick(event) {
                if (!this.state.gameActive || this.state.gamePaused || this.state.gameOver) return;
                
                const rect = this.canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                // Check for bee hits first
                for (let i = this.state.bees.length - 1; i >= 0; i--) {
                    const bee = this.state.bees[i];
                    const dx = x - bee.x;
                    const dy = y - bee.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 20) {
                        this.hitBee(i, x, y);
                        return;
                    }
                }
                
                // Check for honey pots
                for (let i = this.state.honeyPots.length - 1; i >= 0; i--) {
                    const pot = this.state.honeyPots[i];
                    const dx = x - pot.x;
                    const dy = y - pot.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < pot.size / 2) {
                        this.collectHoneyPot(i, pot, x, y);
                        return;
                    }
                }
            }
            
            collectHoneyPot(index, pot, x, y) {
                // Remove pot
                this.state.honeyPots.splice(index, 1);
                
                // Update streak
                const now = performance.now();
                if (now - this.state.lastCollectTime < this.state.streakTimeout) {
                    this.state.streakMultiplier = Math.min(this.state.streakMultiplier + 0.5, 5);
                } else {
                    this.state.streakMultiplier = 1;
                }
                this.state.lastCollectTime = now;
                
                // Calculate score
                const baseScore = pot.value;
                const streakBonus = Math.floor(baseScore * (this.state.streakMultiplier - 1) * 0.5);
                const totalScore = baseScore + streakBonus;
                
                // Update game state
                this.state.score += totalScore;
                this.state.potsCollected++;
                
                // Check for golden pot bonus
                if (pot.type === 'golden') {
                    this.state.timeLeft = Math.min(120, this.state.timeLeft + 5);
                    this.state.shieldActiveUntil = now + 5000; // 5 second shield
                    this.statusText.textContent = 'Golden honey! Bonus time and shield activated!';
                }
                
                // Create particles
                this.createParticles(x, y, totalScore, pot.type);
                
                // Check for high score
                if (this.state.score > this.state.highScore) {
                    this.state.highScore = this.state.score;
                    localStorage.setItem('poohHighScore', this.state.highScore);
                    this.highScoreElement.textContent = this.state.highScore;
                    this.highScoreStat.textContent = this.state.highScore;
                }
                
                // Update UI
                this.updateUI(true);
                
                // Check win condition
                if (this.state.potsCollected >= 10) {
                    this.gameOver(true);
                }
                
                // Announce milestones
                this.announceMilestone(this.state.potsCollected);
            }
            
            hitBee(index, x, y) {
                // Remove bee
                this.state.bees.splice(index, 1);
                
                // Check if shield is active
                const now = performance.now();
                if (now < this.state.shieldActiveUntil) {
                    this.statusText.textContent = 'Shield protected you from the bee!';
                    this.createParticles(x, y, 0, 'shield');
                    return;
                }
                
                // Apply penalty
                this.state.score = Math.max(0, this.state.score - 150);
                this.state.timeLeft = Math.max(0, this.state.timeLeft - 3);
                this.state.streakMultiplier = 1;
                
                this.statusText.textContent = 'Ouch! The bees buzzed away some honey. Watch your taps!';
                this.createParticles(x, y, -150, 'bee');
                
                // Update UI
                this.updateUI();
                
                // Check if time ran out
                if (this.state.timeLeft <= 0) {
                    this.gameOver();
                }
            }
            
            createParticles(x, y, score, type) {
                const colors = {
                    normal: ['#FFD700', '#FFC107', '#FFB347'],
                    golden: ['#FFD700', '#FFC107', '#FF9800'],
                    bee: ['#FF6B6B', '#FF5252', '#D32F2F'],
                    shield: ['#4CAF50', '#8BC34A', '#7CB342']
                };
                
                const particleColors = colors[type] || colors.normal;
                
                // Create sparkle particles
                for (let i = 0; i < 15; i++) {
                    this.state.particles.push({
                        x,
                        y,
                        vx: Math.random() * 6 - 3,
                        vy: Math.random() * 6 - 3,
                        color: particleColors[Math.floor(Math.random() * particleColors.length)],
                        size: Math.random() * 4 + 2,
                        life: 100
                    });
                }
                
                // Create score popup if it's a collection
                if (type !== 'bee' && score > 0) {
                    this.state.particles.push({
                        x,
                        y: y - 30,
                        vx: 0,
                        vy: -2,
                        color: type === 'golden' ? '#FFD700' : '#8B4513',
                        size: 0,
                        life: 60,
                        type: 'score',
                        value: score
                    });
                }
            }
            
            spawnHoneyPot() {
                const types = ['normal', 'golden'];
                const weights = [0.7, 0.3];
                let random = Math.random();
                let potType = 'normal';
                
                for (let i = 0; i < types.length; i++) {
                    random -= weights[i];
                    if (random <= 0) {
                        potType = types[i];
                        break;
                    }
                }
                
                const size = potType === 'golden' ? 50 : 40;
                const value = potType === 'golden' ? 250 : 100;
                const speed = 1 + Math.random() * 2;
                
                this.state.honeyPots.push({
                    x: Math.random() * (this.canvas.width - size) + size/2,
                    y: -size,
                    type: potType,
                    size: size,
                    speed: speed,
                    value: value,
                    rotation: 0,
                    rotationSpeed: (Math.random() - 0.5) * 0.1
                });
            }
            
            spawnBee() {
                this.state.bees.push({
                    x: Math.random() * this.canvas.width,
                    y: Math.random() * (this.canvas.height - 200),
                    speed: this.state.beeSpeeds[this.state.difficulty],
                    angle: Math.random() * Math.PI * 2,
                    wiggle: (Math.random() - 0.5) * 0.1
                });
            }
            
            createHoneyPots() {
                this.state.honeyPots = [];
                const count = this.state.difficulty === 'easy' ? 8 : 
                             this.state.difficulty === 'medium' ? 12 :
                             this.state.difficulty === 'hard' ? 16 : 20;
                
                for (let i = 0; i < count; i++) {
                    this.spawnHoneyPot();
                }
            }
            
            createBees() {
                this.state.bees = [];
                const count = this.state.difficulty === 'easy' ? 1 : 
                             this.state.difficulty === 'medium' ? 2 :
                             this.state.difficulty === 'hard' ? 3 : 4;
                
                for (let i = 0; i < count; i++) {
                    this.spawnBee();
                }
            }
            
            activatePowerUp(type) {
                if (this.state.powerUps[type].count <= 0 || !this.state.gameActive || this.state.powerUps[type].active) return;
                
                this.state.powerUps[type].count--;
                this.state.powerUps[type].active = true;
                
                switch(type) {
                    case 'magnet':
                        this.state.activePowerUps.set(type, performance.now() + this.state.powerUps[type].duration);
                        this.statusText.textContent = 'Magnet activated! Honey pots are attracted to you!';
                        break;
                    case 'time':
                        this.state.timeLeft += 10;
                        this.statusText.textContent = 'Time extended! +10 seconds!';
                        this.state.powerUps[type].active = false; // Time power-up is instant
                        break;
                    case 'shield':
                        this.state.activePowerUps.set(type, performance.now() + this.state.powerUps[type].duration);
                        this.state.shieldActiveUntil = performance.now() + this.state.powerUps[type].duration;
                        this.statusText.textContent = 'Shield activated! Bees can\'t sting you!';
                        break;
                }
                
                // Create power-up particles
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                this.createParticles(centerX, centerY, 0, type);
                
                this.updateUI();
                
                // Reset power-up active state after duration (for magnet and shield)
                if (type === 'magnet' || type === 'shield') {
                    setTimeout(() => {
                        this.state.powerUps[type].active = false;
                        this.statusText.textContent = `${type.charAt(0).toUpperCase() + type.slice(1)} power-up expired!`;
                    }, this.state.powerUps[type].duration);
                }
            }
            
            gameOver(win = false) {
                this.state.gameActive = false;
                this.state.gameOver = true;
                
                if (this.state.timerInterval) {
                    clearInterval(this.state.timerInterval);
                    this.state.timerInterval = null;
                }
                
                this.hideOverlay();
                
                if (win) {
                    this.showOverlay('Victory!', `You collected ${this.state.potsCollected} honey pots!`, 'success');
                    this.statusText.textContent = `Congratulations! You collected ${this.state.potsCollected} honey pots and scored ${this.state.score} points!`;
                    this.gamePrompt.innerHTML = `
                        <strong>üéâ You Win! üéâ</strong><br><br>
                        Final Score: ${this.state.score}<br>
                        Honey Pots: ${this.state.potsCollected}<br>
                        Time Left: ${this.state.timeLeft}s<br><br>
                        <button class="btn btn--primary" id="playAgainBtn" style="margin-top: 10px; padding: 8px 16px; font-size: 0.9rem;">
                            <i class="fas fa-redo"></i> Play Again
                        </button>
                    `;
                    
                    // Re-bind play again button
                    setTimeout(() => {
                        document.getElementById('playAgainBtn')?.addEventListener('click', () => this.startGame());
                    }, 100);
                } else {
                    this.showOverlay('Game Over!', `Time's up! You collected ${this.state.potsCollected} pots.`, 'alert');
                    this.statusText.textContent = `Time's up! You collected ${this.state.potsCollected} honey pots and scored ${this.state.score} points.`;
                    this.gamePrompt.innerHTML = `
                        <strong>Game Over!</strong><br><br>
                        Final Score: ${this.state.score}<br>
                        Honey Pots: ${this.state.potsCollected}<br><br>
                        <button class="btn btn--primary" id="tryAgainBtn" style="margin-top: 10px; padding: 8px 16px; font-size: 0.9rem;">
                            <i class="fas fa-redo"></i> Try Again
                        </button>
                    `;
                    
                    // Re-bind try again button
                    setTimeout(() => {
                        document.getElementById('tryAgainBtn')?.addEventListener('click', () => this.startGame());
                    }, 100);
                }
            }
            
            updateUI(animate = false) {
                // Update score with animation
                this.scoreElement.textContent = this.state.score;
                if (animate) {
                    this.scoreElement.classList.add('score-updated');
                    setTimeout(() => this.scoreElement.classList.remove('score-updated'), 300);
                }
                
                // Update other stats
                this.timerElement.textContent = this.state.timeLeft;
                this.potsCountElement.textContent = this.state.potsCollected;
                this.streakElement.textContent = `x${this.state.streakMultiplier.toFixed(1)}`;
                
                // Update streak meter
                const streakPercent = Math.min(100, (this.state.streakMultiplier / 5) * 100);
                this.streakFill.style.width = `${Math.max(streakPercent, 10)}%`;
                this.streakFill.classList.toggle('streak-meter__fill--hot', this.state.streakMultiplier >= 3);
                this.streakElement.classList.toggle('streak-hot', this.state.streakMultiplier >= 3);
                this.streakHint.textContent = this.state.streakMultiplier >= 3 ? 'Hot streak! Watch for surprise gold.' : 'Keep a rhythm for golden pots';
                
                // Update objective progress
                this.updateObjectiveProgress();
                
                // Update power-up counts
                this.magnetCount.textContent = this.state.powerUps.magnet.count;
                this.timeCount.textContent = this.state.powerUps.time.count;
                this.shieldCount.textContent = this.state.powerUps.shield.count;
                
                // Disable power-up buttons if no charges or active
                this.magnetPowerUp.disabled = this.state.powerUps.magnet.count <= 0 || this.state.powerUps.magnet.active;
                this.timePowerUp.disabled = this.state.powerUps.time.count <= 0;
                this.shieldPowerUp.disabled = this.state.powerUps.shield.count <= 0 || this.state.powerUps.shield.active;
            }
            
            updateObjectiveProgress() {
                const collected = this.state.potsCollected;
                const upcoming = this.state.milestoneRewards.find(reward => collected < reward.count);
                const target = upcoming ? upcoming.count : this.state.milestoneRewards[this.state.milestoneRewards.length - 1].count;
                const progress = Math.min(100, (collected / target) * 100);
                
                this.objectiveFill.style.width = `${Math.max(progress, 4)}%`;
                this.objectiveLabel.textContent = `${Math.min(collected, target)} / ${target} pots`;
                
                if (!upcoming && collected >= target) {
                    this.objectiveNote.textContent = 'All chapter rewards unlocked! Keep tapping to chase a new high score.';
                } else if (upcoming) {
                    const remaining = Math.max(0, upcoming.count - collected);
                    this.objectiveNote.textContent = `Collect ${remaining} more to earn the ${upcoming.title}.`;
                }
            }
            
            updateShieldStatus() {
                const now = performance.now();
                const shieldSeconds = Math.max(0, Math.ceil((this.state.shieldActiveUntil - now) / 1000));
                const shieldActive = shieldSeconds > 0;
                
                this.shieldStatus.classList.toggle('objective-tracker__badge--alert', !shieldActive);
                this.shieldStatus.innerHTML = shieldActive
                    ? `<i class="fas fa-shield-alt"></i> Shield ${shieldSeconds}s`
                    : '<i class="fas fa-shield-alt"></i> No bee shield';
            }
            
            announceMilestone(collected) {
                const reward = this.state.milestoneRewards.find(milestone => milestone.count === collected);
                if (!reward || this.state.lastMilestoneNotified === collected) return;
                
                this.state.lastMilestoneNotified = collected;
                this.showOverlay('Milestone!', `${reward.title} unlocked at ${collected} pots!`, 'success');
                setTimeout(() => this.hideOverlay(), 1200);
                this.statusText.textContent = `${reward.title} unlocked! Keep the rhythm going for the next reward.`;
            }
            
            showOverlay(message, hint = '', state = '') {
                this.overlayText.textContent = message;
                this.overlayHint.textContent = hint;
                this.overlay.className = `game-overlay ${state}`.trim();
                this.overlay.classList.add('game-overlay--visible');
            }
            
            hideOverlay() {
                this.overlay.classList.remove('game-overlay--visible', 'game-overlay--alert');
            }
        }

        // Initialize game
        let game;
        function initGame() {
            game = new GameEngine();
        }
    </script>
</body>
</html>